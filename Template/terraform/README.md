# Terraform é…ç½®

æœ¬é¡¹ç›®ä½¿ç”¨ **GCP Compute Engine VM**ï¼ˆä¸æ˜¯ Cloud Runï¼‰ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```
terraform/
â”œâ”€â”€ README.md              â† æœ¬æ–‡ä»¶
â”œâ”€â”€ BEGINNER-GUIDE.md      â† ğŸ“ æ–°æ‰‹å®Œæ•´æŒ‡å—ï¼ˆä»è¿™é‡Œå¼€å§‹ï¼ï¼‰
â””â”€â”€ vm/                    â† âœ… å®é™…é…ç½®æ–‡ä»¶
    â”œâ”€â”€ main.tf
    â”œâ”€â”€ variables.tf
    â”œâ”€â”€ outputs.tf
    â”œâ”€â”€ terraform.tfvars   
    â””â”€â”€ ... å…¶ä»–æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯¹äºæ–°æ‰‹

**è¯·å…ˆé˜…è¯»ï¼š**
ğŸ“– [Terraform æ–°æ‰‹æŒ‡å—](./BEGINNER-GUIDE.md)

è¿™ä¸ªæŒ‡å—åŒ…å«ï¼š
- âœ… Terraform æ˜¯ä»€ä¹ˆï¼ˆç”¨äººè¯è§£é‡Šï¼‰
- âœ… æˆ‘ä»¬çš„é¡¹ç›®ç”¨ä»€ä¹ˆï¼ˆVMï¼Œä¸æ˜¯ Cloud Runï¼‰
- âœ… æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨
- âœ… ä¸€æ­¥ä¸€æ­¥çš„æ“ä½œæŒ‡å—
- âœ… å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

### å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…

```bash
# 1. è¿›å…¥ vm ç›®å½•
cd terraform/vm

# 2. é…ç½®
cp terraform.tfvars.example terraform.tfvars
vim terraform.tfvars  # å¡«å†™ä½ çš„é¡¹ç›® ID

# 3. éƒ¨ç½²
terraform init
terraform plan
terraform apply
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

**ä¸æ˜¯** Cloud Run â†’ **æ˜¯** Compute Engine VM

```
GCP Compute Engine VM (è™šæ‹Ÿæœº)
    â”œâ”€â”€ Ubuntu 22.04 LTS
    â”œâ”€â”€ Docker + Docker Compose
    â””â”€â”€ ä¸‰ä¸ªå®¹å™¨:
        â”œâ”€â”€ Frontend (React + Nginx) :80
        â”œâ”€â”€ Backend (FastAPI) :8000
        â””â”€â”€ MongoDB :27017
```

**ä¸ºä»€ä¹ˆé€‰ VMï¼Ÿ**
- âœ… å¯ä»¥è¿è¡Œ MongoDB
- âœ… å®Œå…¨æ§åˆ¶æœåŠ¡å™¨
- âœ… æˆæœ¬å¯é¢„æµ‹ï¼ˆçº¦ $27/æœˆï¼‰
- âœ… é€‚åˆå°å‹é¡¹ç›®

## ğŸ“ é…ç½®æ–‡ä»¶

æ‰€æœ‰é…ç½®éƒ½åœ¨ `vm/` ç›®å½•ï¼š

| æ–‡ä»¶ | ä½œç”¨ | æ˜¯å¦æäº¤åˆ° Git |
|------|------|--------------|
| `main.tf` | èµ„æºå®šä¹‰ | âœ… Yes |
| `variables.tf` | å˜é‡å®šä¹‰ | âœ… Yes |
| `outputs.tf` | è¾“å‡ºå€¼ | âœ… Yes |
| `terraform.tfvars.example` | é…ç½®ç¤ºä¾‹ | âœ… Yes |
| `terraform.tfvars` | ä½ çš„é…ç½® | âŒ Noï¼ˆåŒ…å«é¡¹ç›®IDï¼‰|
| `terraform.tfstate` | çŠ¶æ€æ–‡ä»¶ | âŒ Noï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰|

## ğŸ’¡ å¸¸ç”¨å‘½ä»¤

```bash
# åœ¨ vm/ ç›®å½•ä¸‹è¿è¡Œï¼š

terraform init      # åˆå§‹åŒ–ï¼ˆé¦–æ¬¡ï¼‰
terraform plan      # é¢„è§ˆæ›´æ”¹
terraform apply     # åº”ç”¨æ›´æ”¹
terraform destroy   # é”€æ¯èµ„æºï¼ˆå±é™©ï¼ï¼‰
terraform output    # æŸ¥çœ‹è¾“å‡º
```

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **[ğŸ“ Terraform æ–°æ‰‹æŒ‡å—](./BEGINNER-GUIDE.md)** - ä»é›¶å¼€å§‹ï¼ˆæ¨èæ–°æ‰‹ï¼‰
- **[ğŸ“š å®Œæ•´éƒ¨ç½²æŒ‡å—](../docs/beginner-deploy-guide.md)** - åŒ…å« Terraform åœ¨å†…çš„å®Œæ•´æµç¨‹
- **[âœ¨ Git éƒ¨ç½²æŒ‡å—](../docs/git-deployment-guide.md)** - Git-based éƒ¨ç½²
- **[ğŸ“– æ–‡æ¡£ç´¢å¼•](../docs/INDEX.md)** - æ‰€æœ‰æ–‡æ¡£

## âš ï¸ é‡è¦æé†’

1. **ä¸è¦æäº¤** `terraform.tfvars` åˆ° Gitï¼ˆåŒ…å«æ•æ„Ÿä¿¡æ¯ï¼‰
2. **ä¸è¦åˆ é™¤** `terraform.tfstate`ï¼ˆè®°å½•äº†æ‰€æœ‰èµ„æºï¼‰
3. **å…ˆ plan å† apply**ï¼ˆé¢„è§ˆæ›´æ”¹ï¼‰
4. **å®šæœŸå¤‡ä»½** state æ–‡ä»¶

## ğŸ’° æˆæœ¬

**å½“å‰é…ç½®ï¼ˆä¸œäº¬åŒºåŸŸï¼‰ï¼š**
- VM (e2-medium): ~$27/æœˆ
- ç½‘ç»œæµé‡: ~$2-5/æœˆ
- ç£ç›˜ (20GB): ~$2/æœˆ
- **æ€»è®¡: ~$31-34/æœˆ**

**èŠ‚çœæˆæœ¬ï¼š**
- ä½¿ç”¨ e2-small: çœ ~$13/æœˆ
- å¤œé—´åœæ­¢ VM: çœ ~$20/æœˆ
- ä½¿ç”¨æŠ¢å å¼ VM: çœ ~$22/æœˆï¼ˆä½†å¯èƒ½éšæ—¶ä¸­æ–­ï¼‰

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

1. å…ˆçœ‹ [æ–°æ‰‹æŒ‡å—](./BEGINNER-GUIDE.md) çš„"å¸¸è§é—®é¢˜"ç« èŠ‚
2. æŸ¥çœ‹ [å®Œæ•´éƒ¨ç½²æŒ‡å—](../docs/beginner-deploy-guide.md) çš„"GCP æ•…éšœæ’æŸ¥"
3. æäº¤ GitHub Issue

---

**æç¤ºï¼š** å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ Terraformï¼Œå¼ºçƒˆå»ºè®®å…ˆé˜…è¯» [æ–°æ‰‹æŒ‡å—](./BEGINNER-GUIDE.md)ï¼

