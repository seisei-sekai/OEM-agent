(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1338],{58221:function(){},99707:function(){},10191:function(e,t,n){"use strict";n.d(t,{Dc:function(){return u},J1:function(){return a},OE:function(){return s},OW:function(){return c},Y5:function(){return l}});var o=n(16287),r=n(6e3);let i=["ai","pdf"],s=(e,t,n,s)=>{let{file:c,...a}=e;return o.ZP.post("/client/attachments",{...a,description:a.description||""}).then(e=>r.Z.put(e.data.presigned_url,c,{headers:{"Content-Type":a.mime_type},onUploadProgress:e=>{if(!e.total)return;let n=Math.round(100*e.loaded/e.total);null==t||t(n)}}).then(()=>e.data)).then(e=>{let t=(c.name||a.filename).toLowerCase().split(".").pop()||"";return i.includes(t)&&n?d({attachment_id:e.id,output_format:"png"}).then(t=>(null==s||s(e,t.data),t.data)):e})},c=e=>{let{id:t}=e;return o.ZP.delete("/client/attachments/".concat(t)).then(e=>e.data)},a=e=>{let{file:t,id:n,type:i,params:s,...c}=e;return o.ZP.post("/client/attachments",{type:i,...c}).then(e=>r.Z.put(e.data.presigned_url,t).then(()=>o.ZP.put("/api/attachments/".concat(e.data.id,"/link/").concat(n),{type:i},{params:s}).then(e=>e.data)))},l=e=>{let{id:t,...n}=e;return o.ZP.put("/client/attachments/"+t,n).then(e=>e.data)},u=e=>{let t="/client/attachments?page_size=".concat(e.length,"&ids=").concat(e.join(","));return o.ZP.get(t).then(e=>e.data.results)},d=e=>{let{attachment_id:t,output_format:n}=e;return o.ZP.post("/client/attachments/convert",{attachment_id:t,output_format:n}).then(e=>e.data)}},98582:function(e,t,n){"use strict";n.d(t,{Ag:function(){return l},GO:function(){return p},P4:function(){return s},bG:function(){return c},gn:function(){return d},k9:function(){return h},my:function(){return a},om:function(){return u}});var o=n(16287),r=n(47409);function i(e){let t=e.data;if(t&&0===t.code)return e.data;throw Error((null==t?void 0:t.message)||"[".concat(e.status,"] Server Error"))}function s(e){return e=null!=e?e:{},(0,o.S6)("/client/chats/chat/create",e)}function c(e){return(0,o.S6)("/client/chats/chat/send_message",e)}function a(e){return o.ZP.post("/client/chats/chat/read_commit",e).then(i)}function l(e){return o.ZP.get("/client/chats/chat/list",{params:e}).then(i)}function u(e){let t="/client/chats/chat/message/flow?".concat((0,r.FJ)({...e,size:20}));return(0,o.G0)(t)}function d(e){return(0,o.S6)("/client/chats/chat/message/interact",e)}function h(){return o.ZP.get("/client/chats/chat/unread").then(i).then(e=>e.data)}function p(e){return o.ZP.post("/client/chats/chat/delete",{id:e}).then(i)}},26169:function(e,t,n){"use strict";n.d(t,{B3:function(){return r},Ib:function(){return i},ze:function(){return s}});var o=n(16287);let r=async()=>o.ZP.get("/api/countries").then(e=>e.data),i=async e=>{let{country:t}=e;return o.ZP.get("/api/states?country=".concat(t)).then(e=>e.data)},s=async e=>{let{state:t}=e;return o.ZP.get("/api/cities?state=".concat(t)).then(e=>e.data)}},49018:function(e,t,n){"use strict";n.d(t,{e2:function(){return C},Tw:function(){return f},LH:function(){return v}});var o=n(27573),r=n(50966),i=n(32103),s=n(74769),c=n(65880),a=n(7653),l=n(2216),u=n(67732),d=n(87278),h={src:"/_next/static/media/nory.ab9cfee0.png",height:64,width:64,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAM1BMVEXv7/3NzOza2vLY1fTv7/3Fw+fz8//p6fvr6/np6fp8esGUks26uOFnY7VAPKKqqdhSTa1lrEr6AAAACXRSTlP9////////kJBv07S4AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAOklEQVR4nB3KyRHAIBADwQG0gLjs/KN14V8/mi7bVgPqJZCeVMtVHmW+Ieyxz8xg1tnrT4oIQZMl1D85uQGRk1D82gAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},p=n(16727);function C(){let{isOpen:e,dismissTutorial:t,checkAndShowTutorial:n,showTutorial:C}=(0,p.E)(),{data:f}=(0,i.O4)(),{position:m}=(0,u.p1)(),{ua:g}=(0,r.useAgentInfo)(),S=(0,a.useRef)(null);(0,a.useEffect)(()=>{n()},[n]),(0,a.useEffect)(()=>(C&&(null==g?void 0:g.isMobile)&&(S.current=setTimeout(()=>{t()},2e3)),()=>{S.current&&(clearTimeout(S.current),S.current=null)}),[C,null==g?void 0:g.isMobile,t]);let y=e=>void 0!==e?"".concat(e,"px"):"auto",w={inset:"".concat(y(m.top)," ").concat(y(m.right)," ").concat(y(m.bottom)," ").concat(y(m.left))};return(0,o.jsxs)(l.kC,{style:w,className:"group fixed z-[10000]",flexDirection:"column",children:[(0,o.jsxs)(s.u,{show:C,enter:"transition-all duration-500 ease-out",enterFrom:"opacity-0 translate-y-5",enterTo:"opacity-100 translate-y-0",className:"flex flex-col",children:[(0,o.jsx)("button",{className:"mb-1 flex h-8 w-8 items-center justify-center self-end rounded-lg border border-[#E0E0E0] bg-white opacity-0 transition-opacity duration-200 group-hover:opacity-100",onClick:t,children:(0,o.jsx)(d.lH,{})}),(0,o.jsx)("div",{className:"relative mb-3 max-w-[316px] cursor-pointer rounded-xl max-md:w-[min(343px,calc(100vw-30px))]",onClick:t,style:{background:"linear-gradient(90deg, #9453C8 4.28%, #4572ED 53.95%, #30BBA0 97.7%)",padding:"1px",borderRadius:"12px"},children:(0,o.jsxs)(l.kC,{id:"tutorial",className:"gap-x-3 rounded-xl p-3",style:{backgroundColor:"white",borderRadius:"11px"},children:[(0,o.jsx)(c.default,{src:h,alt:"Nory",className:"h-8 w-8"}),(0,o.jsxs)(l.kC,{flexDirection:"column",className:"gap-y-1.5",children:[(0,o.jsx)("div",{className:"font-inter text-[12px] font-medium leading-[1.4] tracking-normal max-md:text-[12px]",children:"Hey \uD83D\uDC4B I'm Nory, your AI Agent for turning product ideas to real things!"}),(0,o.jsx)("div",{className:"font-inter text-[10px] font-normal not-italic leading-[1.4] tracking-normal text-[#0B0B0BA8] max-md:text-[10px]",children:"From sharing product recommendations and design mockups to tracking order and shipping status – I’ve got you covered."})]})]})})]}),(0,o.jsx)(s.u,{show:!e,enter:"transition-opacity duration-[200ms] ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-[200ms] ease-in",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"self-end",children:(0,o.jsx)(v,{children:(0,o.jsxs)("div",{className:"relative cursor-pointer rounded-full shadow-[0_3.2px_2.4px_0_rgba(0,0,0,0.07),_0_1.6px_1.6px_0_rgba(0,0,0,0.06)] transition-transform hover:scale-105",children:[(0,o.jsx)(d.kB,{}),f&&f.unread>0&&(0,o.jsx)("div",{className:"absolute right-0 top-[-12px] h-6 w-6 rounded-full border-[10px] border-[#C12E5A] bg-white"})]})})})]})}function v(e){let{children:t,onClick:n,mode:o="toggle",expand:r,defaultScene:i,...s}=e,{toggleOpen:c,setOpen:l,setExpanded:u,dismissTutorial:d,setDefaultScene:h,setMenuOpen:C,triggerAgentOpener:v}=(0,p.E)();return a.Children.map(t,e=>a.isValidElement(e)?a.cloneElement(e,{...s,onClick:t=>{d(),v(),i&&h(i),void 0!==r&&u(r),"open"===o?l(!0):c(),C(!1),e.props.onClick&&e.props.onClick(t),n&&n(t)}}):e)}function f(e){let{expand:t,defaultScene:n,...r}=e;return(0,o.jsx)(v,{...r,mode:"open",expand:t,defaultScene:n})}},67732:function(e,t,n){"use strict";n.d(t,{AP:function(){return l},p1:function(){return u}});var o=n(27573),r=n(67754),i=n(7653);let s={right:20,bottom:20},c=[{pattern:/^\/custom\/[^/]+\/[^/]+\/editor$/,position:{right:20,bottom:140}}],a=(0,i.createContext)(void 0);function l(e){let{children:t}=e,n=(0,r.usePathname)(),l=(0,i.useMemo)(()=>{if(!n)return s;let e=c.find(e=>"string"==typeof e.pattern?n===e.pattern:e.pattern.test(n));return(null==e?void 0:e.position)||s},[n]);return(0,o.jsx)(a.Provider,{value:{position:l},children:t})}function u(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useAgentPosition must be used within an AgentPositionProvider");return e}},87278:function(e,t,n){"use strict";n.d(t,{LZ:function(){return u},N_:function(){return g},Oq:function(){return d},PS:function(){return i},Tw:function(){return C},cY:function(){return l},jM:function(){return y},kB:function(){return r},lH:function(){return f},mT:function(){return a},oN:function(){return s},pO:function(){return p},pg:function(){return h},q$:function(){return c},tB:function(){return m},vE:function(){return v},vc:function(){return S}});var o=n(27573);function r(){return(0,o.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("circle",{cx:"32",cy:"32",r:"32",fill:"white"}),(0,o.jsxs)("g",{"clip-path":"url(#clip0_40003585_13112)",children:[(0,o.jsx)("path",{d:"M25.7773 29.333H25.7907M31.1107 29.333H31.124M36.444 29.333H36.4573",stroke:"url(#paint0_linear_40003585_13112)","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.jsx)("path",{d:"M43.1113 28.4441V29.333V34.6663C43.1113 36.1391 41.9174 37.333 40.4447 37.333H33.778L27.1113 43.9997V37.333H21.778C20.3052 37.333 19.1113 36.1391 19.1113 34.6663V23.9997C19.1113 22.5269 20.3052 21.333 21.778 21.333L35.1113 21.333",stroke:"url(#paint1_linear_40003585_13112)","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.jsx)("path",{d:"M42.295 16.4992C42.4282 16.1615 42.906 16.1615 43.0392 16.4992L43.8604 18.5814C43.9011 18.6845 43.9827 18.7661 44.0858 18.8068L46.1681 19.628C46.5057 19.7612 46.5057 20.239 46.1681 20.3722L44.0858 21.1934C43.9827 21.2341 43.9011 21.3157 43.8604 21.4188L43.0392 23.5011C42.906 23.8387 42.4282 23.8387 42.295 23.5011L41.4738 21.4188C41.4331 21.3157 41.3515 21.2341 41.2484 21.1934L39.1661 20.3722C38.8285 20.239 38.8285 19.7612 39.1661 19.628L41.2484 18.8068C41.3515 18.7661 41.4331 18.6845 41.4738 18.5814L42.295 16.4992Z",fill:"url(#paint2_linear_40003585_13112)"})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("linearGradient",{id:"paint0_linear_40003585_13112",x1:"26.2341",y1:"29.833",x2:"36.2114",y2:"29.833",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{"stop-color":"#9453C8"}),(0,o.jsx)("stop",{offset:"0.531748","stop-color":"#4572ED"}),(0,o.jsx)("stop",{offset:"1","stop-color":"#30BBA0"})]}),(0,o.jsxs)("linearGradient",{id:"paint1_linear_40003585_13112",x1:"20.1376",y1:"32.6663",x2:"42.5587",y2:"32.6663",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{"stop-color":"#9453C8"}),(0,o.jsx)("stop",{offset:"0.531748","stop-color":"#4572ED"}),(0,o.jsx)("stop",{offset:"1","stop-color":"#30BBA0"})]}),(0,o.jsxs)("linearGradient",{id:"paint2_linear_40003585_13112",x1:"38.6028",y1:"20.0001",x2:"46.9069",y2:"20.0001",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{"stop-color":"#9453C8"}),(0,o.jsx)("stop",{offset:"0.531748","stop-color":"#4572ED"}),(0,o.jsx)("stop",{offset:"1","stop-color":"#30BBA0"})]}),(0,o.jsx)("clipPath",{id:"clip0_40003585_13112",children:(0,o.jsx)("rect",{width:"32",height:"32",fill:"white",transform:"translate(16 16)"})})]})]})}function i(){return(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("g",{"clip-path":"url(#clip0_2249_11201)",children:(0,o.jsx)("path",{d:"M19 0.964844C19 0.666475 18.8815 0.380327 18.6705 0.169348C18.4595 -0.0416301 18.1734 -0.160156 17.875 -0.160156H12.25C11.9517 -0.160111 11.6656 -0.041564 11.4546 0.169409C11.2437 0.380383 11.1252 0.666505 11.1252 0.964844C11.1252 1.26318 11.2437 1.5493 11.4546 1.76028C11.6656 1.97125 11.9517 2.0898 12.25 2.08984H15.1413L11.4513 5.79109C11.3458 5.89568 11.2621 6.0201 11.205 6.1572C11.1479 6.29429 11.1185 6.44133 11.1185 6.58984C11.1185 6.73836 11.1479 6.8854 11.205 7.02249C11.2621 7.15958 11.3458 7.28401 11.4513 7.38859C11.5558 7.49404 11.6803 7.57773 11.8174 7.63485C11.9544 7.69196 12.1015 7.72137 12.25 7.72137C12.3985 7.72137 12.5456 7.69196 12.6826 7.63485C12.8197 7.57773 12.9442 7.49404 13.0487 7.38859L16.75 3.68734V6.58984C16.75 6.88821 16.8685 7.17436 17.0795 7.38534C17.2905 7.59632 17.5766 7.71484 17.875 7.71484C18.1734 7.71484 18.4595 7.59632 18.6705 7.38534C18.8815 7.17436 19 6.88821 19 6.58984V0.964844ZM8.54875 10.2911C8.44417 10.1856 8.31974 10.102 8.18265 10.0448C8.04556 9.98773 7.89851 9.95832 7.75 9.95832C7.60149 9.95832 7.45444 9.98773 7.31735 10.0448C7.18026 10.102 7.05583 10.1856 6.95125 10.2911L3.25 13.9811V11.0898C3.25 10.7915 3.13147 10.5053 2.9205 10.2943C2.70952 10.0834 2.42337 9.96484 2.125 9.96484C1.82663 9.96484 1.54048 10.0834 1.3295 10.2943C1.11853 10.5053 1 10.7915 1 11.0898V16.7148C1 17.0132 1.11853 17.2994 1.3295 17.5103C1.54048 17.7213 1.82663 17.8398 2.125 17.8398H7.75C8.04834 17.8398 8.33444 17.7213 8.54538 17.5103C8.75633 17.2993 8.87483 17.0132 8.87483 16.7148C8.87483 16.4165 8.75633 16.1304 8.54538 15.9194C8.33444 15.7084 8.04834 15.5899 7.75 15.5898H4.8475L8.54875 11.8886C8.65419 11.784 8.73789 11.6596 8.795 11.5225C8.85212 11.3854 8.88152 11.2384 8.88152 11.0898C8.88152 10.9413 8.85212 10.7943 8.795 10.6572C8.73789 10.5201 8.65419 10.3957 8.54875 10.2911Z",fill:"#0B0B0B"})}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_2249_11201",children:(0,o.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}function s(){return(0,o.jsx)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M22.9997 13.8331C23.309 13.8331 23.6061 13.9562 23.8249 14.1748C24.0436 14.3936 24.1666 14.6907 24.1667 15C24.1667 15.3095 24.0437 15.6064 23.8249 15.8252C23.6061 16.044 23.309 16.167 22.9997 16.167H17.7975L25.1735 23.543L25.1794 23.5498C25.3918 23.7699 25.5101 24.0643 25.5075 24.3702C25.5048 24.6759 25.3818 24.9683 25.1657 25.1846C24.9494 25.4009 24.6562 25.5238 24.3503 25.5264C24.0445 25.529 23.7499 25.4117 23.53 25.1993L16.1667 17.837V23C16.1667 23.3095 16.0437 23.6064 15.8249 23.8252C15.6061 24.044 15.309 24.167 14.9997 24.167C14.6905 24.167 14.3942 24.0438 14.1755 23.8252C13.9567 23.6064 13.8337 23.3095 13.8337 23V15C13.8337 14.6907 13.9567 14.3936 14.1755 14.1748C14.3941 13.9564 14.6906 13.8331 14.9997 13.8331H22.9997ZM1.64909 0.473677C1.95499 0.471019 2.25034 0.588307 2.47038 0.800825L9.83366 8.16411V3.00004C9.83369 2.69067 9.95669 2.39362 10.1755 2.17485C10.3941 1.95637 10.6906 1.83313 10.9997 1.83305C11.309 1.83305 11.6061 1.95618 11.8249 2.17485C12.0436 2.39362 12.1666 2.69067 12.1667 3.00004V11C12.1667 11.3095 12.0437 11.6064 11.8249 11.8252C11.6061 12.044 11.3091 12.167 10.9997 12.167H2.99968C2.6905 12.167 2.39415 12.0438 2.17546 11.8252C1.95667 11.6064 1.83366 11.3095 1.83366 11C1.83369 10.6907 1.95669 10.3936 2.17546 10.1748C2.39414 9.95637 2.69055 9.83313 2.99968 9.83305H8.2028L0.826826 2.45708L0.819991 2.45122C0.607472 2.23118 0.490183 1.93582 0.492842 1.62993C0.495571 1.32413 0.618394 1.03172 0.834639 0.815474C1.05088 0.59923 1.3433 0.476407 1.64909 0.473677Z",fill:"#0B0B0B"})})}function c(e){let{size:t=48}=e;return(0,o.jsx)("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M5.83337 9.58333V11.6667M5.83337 9.58333V4.58333C5.83337 3.89298 6.39302 3.33333 7.08337 3.33333C7.77373 3.33333 8.33337 3.89298 8.33337 4.58333M5.83337 9.58333C5.83337 8.89298 5.27373 8.33333 4.58337 8.33333C3.89302 8.33333 3.33337 8.89298 3.33337 9.58333V11.25C3.33337 14.7018 6.13159 17.5 9.58337 17.5C13.0352 17.5 15.8334 14.7018 15.8334 11.25V7.08333C15.8334 6.39298 15.2737 5.83333 14.5834 5.83333C13.893 5.83333 13.3334 6.39298 13.3334 7.08333M8.33337 4.58333V9.16667M8.33337 4.58333V3.75C8.33337 3.05964 8.89302 2.5 9.58337 2.5C10.2737 2.5 10.8334 3.05964 10.8334 3.75V4.58333M10.8334 4.58333V9.16667M10.8334 4.58333C10.8334 3.89298 11.393 3.33333 12.0834 3.33333C12.7737 3.33333 13.3334 3.89298 13.3334 4.58333V7.08333M13.3334 7.08333V9.16667",stroke:"#30BBA0","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}function a(e){let{size:t=48}=e;return(0,o.jsx)("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M8.33329 17.5H14.1666C15.0871 17.5 15.8333 16.7538 15.8333 15.8333V7.84518C15.8333 7.62416 15.7455 7.4122 15.5892 7.25592L11.0774 2.74408C10.9211 2.5878 10.7091 2.5 10.4881 2.5H5.83329C4.91282 2.5 4.16663 3.24619 4.16663 4.16667V13.3333M4.16663 17.5L8.23219 13.4344M8.23219 13.4344C8.6846 13.8868 9.3096 14.1667 9.99996 14.1667C11.3807 14.1667 12.5 13.0474 12.5 11.6667C12.5 10.286 11.3807 9.16667 9.99996 9.16667C8.61925 9.16667 7.49996 10.286 7.49996 11.6667C7.49996 12.357 7.77978 12.982 8.23219 13.4344Z",stroke:"#423EA2","stroke-width":"1.5","stroke-linecap":"round"})})}function l(e){let{size:t=48}=e;return(0,o.jsx)("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M12.5 12.4998L10.8333 16.6665L7.49998 7.4998L16.6666 10.8331L12.5 12.4998ZM12.5 12.4998L16.6666 16.6665M5.99017 1.86523L6.63722 4.28005M4.28017 6.63706L1.86536 5.99002M11.6247 3.37504L9.85697 5.14281M5.143 9.85677L3.37524 11.6245",stroke:"#FFB329","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}function u(e){let{size:t=20}=e;return(0,o.jsx)("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M12.1667 4.1665L18 9.99984M18 9.99984L12.1667 15.8332M18 9.99984L3 9.99984",stroke:"#0B0B0B","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})}function d(){return(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"#0B0B0B","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})}function h(e){let{size:t=48}=e;return(0,o.jsx)("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M10.8334 8.33333V2.5L3.33337 11.6667H9.16671L9.16671 17.5L16.6667 8.33333L10.8334 8.33333Z",stroke:"#BE6CFF","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}function p(){return(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M10 3.3335V16.6668M16.6667 10.0002L3.33337 10.0002",stroke:"#0B0B0B",strokeOpacity:"0.66",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function C(){return(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M6 18L18 6M6 6L18 18",stroke:"#0B0B0B","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})}function v(){return(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M8 24L24 8M8 8L24 24",stroke:"#0B0B0B","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})})}function f(){return(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M4 12L12 4M4 4L12 12",stroke:"#0B0B0B","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}function m(e){let{size:t=16,className:n}=e;return(0,o.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:[(0,o.jsx)("path",{d:"M10.6663 4.66667C10.6663 6.13943 9.47244 7.33333 7.99968 7.33333C6.52692 7.33333 5.33301 6.13943 5.33301 4.66667C5.33301 3.19391 6.52692 2 7.99968 2C9.47244 2 10.6663 3.19391 10.6663 4.66667Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M7.99968 9.33333C5.42235 9.33333 3.33301 11.4227 3.33301 14H12.6663C12.6663 11.4227 10.577 9.33333 7.99968 9.33333Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function g(){return(0,o.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M3.30542 15.9955C3.30542 22.9755 8.7093 28.2623 15.9955 28.2623C22.8134 28.2623 27.9651 23.651 28.6046 17.3645H22.5703C22.3376 18.942 21.5418 20.382 20.3299 21.4184C19.118 22.4547 17.572 23.0175 15.9775 23.0026C15.0712 23.0035 14.1741 22.8206 13.3405 22.4648C12.5069 22.1091 11.7541 21.588 11.1277 20.9329C10.5013 20.2779 10.0143 19.5026 9.69613 18.6539C9.37798 17.8053 9.23529 16.9009 9.27671 15.9955C9.1915 14.4006 9.68345 12.8283 10.6626 11.5664C11.6417 10.3044 13.0424 9.43729 14.6085 9.12358V3.79175C8.0068 4.39518 3.30542 9.34874 3.30542 15.9955Z",fill:"#423EA2"}),(0,o.jsx)("path",{d:"M25.2812 14.6355V6.80884H17.3555V8.99741H22.7053V14.6355H25.2812Z",fill:"#30BBA0"}),(0,o.jsx)("path",{d:"M17.3555 3.72876V5.90833H26.1818V14.6356H28.6946V3.72876H17.3555Z",fill:"#30BBA0"})]})}function S(){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[(0,o.jsx)("g",{"clip-path":"url(#clip0_2247_30452)",children:(0,o.jsx)("path",{d:"M19 0.964966C19 0.666597 18.8815 0.380449 18.6705 0.16947C18.4595 -0.041508 18.1734 -0.160034 17.875 -0.160034H12.25C11.9517 -0.159989 11.6656 -0.041442 11.4546 0.169532C11.2437 0.380505 11.1252 0.666627 11.1252 0.964966C11.1252 1.2633 11.2437 1.54943 11.4546 1.7604C11.6656 1.97137 11.9517 2.08992 12.25 2.08997H15.1413L11.4513 5.79122C11.3458 5.8958 11.2621 6.02023 11.205 6.15732C11.1479 6.29441 11.1185 6.44145 11.1185 6.58997C11.1185 6.73848 11.1479 6.88552 11.205 7.02261C11.2621 7.15971 11.3458 7.28413 11.4513 7.38872C11.5558 7.49416 11.6803 7.57785 11.8174 7.63497C11.9544 7.69208 12.1015 7.72149 12.25 7.72149C12.3985 7.72149 12.5456 7.69208 12.6826 7.63497C12.8197 7.57785 12.9442 7.49416 13.0487 7.38872L16.75 3.68747V6.58997C16.75 6.88833 16.8685 7.17448 17.0795 7.38546C17.2905 7.59644 17.5766 7.71497 17.875 7.71497C18.1734 7.71497 18.4595 7.59644 18.6705 7.38546C18.8815 7.17448 19 6.88833 19 6.58997V0.964966ZM8.54875 10.2912C8.44417 10.1858 8.31974 10.1021 8.18265 10.045C8.04556 9.98785 7.89851 9.95844 7.75 9.95844C7.60149 9.95844 7.45444 9.98785 7.31735 10.045C7.18026 10.1021 7.05583 10.1858 6.95125 10.2912L3.25 13.9812V11.09C3.25 10.7916 3.13147 10.5054 2.9205 10.2945C2.70952 10.0835 2.42337 9.96497 2.125 9.96497C1.82663 9.96497 1.54048 10.0835 1.3295 10.2945C1.11853 10.5054 1 10.7916 1 11.09V16.715C1 17.0133 1.11853 17.2995 1.3295 17.5105C1.54048 17.7214 1.82663 17.84 2.125 17.84H7.75C8.04834 17.8399 8.33444 17.7214 8.54538 17.5104C8.75633 17.2994 8.87483 17.0133 8.87483 16.715C8.87483 16.4166 8.75633 16.1305 8.54538 15.9195C8.33444 15.7086 8.04834 15.59 7.75 15.59H4.8475L8.54875 11.8887C8.65419 11.7841 8.73789 11.6597 8.795 11.5226C8.85212 11.3855 8.88152 11.2385 8.88152 11.09C8.88152 10.9415 8.85212 10.7944 8.795 10.6573C8.73789 10.5202 8.65419 10.3958 8.54875 10.2912Z",fill:"#0B0B0B"})}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_2247_30452",children:(0,o.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}function y(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:(0,o.jsx)("path",{d:"M26 16.8329C26.3093 16.8329 26.6064 16.956 26.8252 17.1747C27.044 17.3934 27.167 17.6905 27.167 17.9999C27.167 18.3093 27.044 18.6063 26.8252 18.8251C26.6064 19.0438 26.3094 19.1669 26 19.1669H20.7979L28.1738 26.5428L28.1797 26.5497C28.3922 26.7697 28.5105 27.0641 28.5078 27.37C28.5051 27.6757 28.3821 27.9682 28.166 28.1844C27.9497 28.4008 27.6565 28.5236 27.3506 28.5262C27.0448 28.5288 26.7502 28.4115 26.5303 28.1991L19.167 20.8368V25.9999C19.167 26.3093 19.044 26.6063 18.8252 26.8251C18.6064 27.0438 18.3094 27.1669 18 27.1669C17.6908 27.1668 17.3945 27.0436 17.1758 26.8251C16.957 26.6063 16.834 26.3093 16.834 25.9999V17.9999C16.834 17.6905 16.957 17.3934 17.1758 17.1747C17.3945 16.9562 17.6909 16.833 18 16.8329H26ZM4.64941 3.47351C4.95531 3.47085 5.25067 3.58814 5.4707 3.80066L12.834 11.1639V5.99988C12.834 5.6905 12.957 5.39345 13.1758 5.17468C13.3945 4.95621 13.6909 4.83297 14 4.83289C14.3093 4.83289 14.6064 4.95602 14.8252 5.17468C15.044 5.39345 15.167 5.6905 15.167 5.99988V13.9999C15.167 14.3093 15.044 14.6063 14.8252 14.8251C14.6064 15.0438 14.3094 15.1669 14 15.1669H6C5.69082 15.1668 5.39447 15.0436 5.17578 14.8251C4.95699 14.6063 4.83398 14.3093 4.83398 13.9999C4.83401 13.6905 4.95701 13.3935 5.17578 13.1747C5.39446 12.9562 5.69087 12.833 6 12.8329H11.2031L3.82715 5.45691L3.82031 5.45105C3.60779 5.23101 3.49051 4.93566 3.49316 4.62976C3.49589 4.32397 3.61872 4.03155 3.83496 3.81531C4.05121 3.59906 4.34362 3.47624 4.64941 3.47351Z",fill:"#0B0B0B"})})}},48296:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var o=n(27573),r=n(57908),i=n(7653),s=n(2216);function c(e){let{children:t,options:n,onSelect:c,disabled:a=!1,menuContent:l,className:u,stopClickPropagation:d=!1,menuContentClassName:h,onOpenChange:p,open:C,modal:v=!0}=e,[f,m]=i.useState(!1);return(0,o.jsxs)(s.h_,{onOpenChange:e=>{m(e),null==p||p(e)},open:void 0!==C?C:f,modal:v,children:[(0,o.jsx)(s.$F,{disabled:a,asChild:!0,className:(0,r.Z)("group cursor-pointer",u),children:(0,o.jsx)("div",{className:"block items-center",children:t})}),(0,o.jsx)(s.AW,{align:"start",className:h,children:l||(null==n?void 0:n.map((e,t)=>{let{disable:n,onClick:i,title:a,icon:l,value:u,render:h,key:p}=e;return(0,o.jsx)(s.Xi,{className:(0,r.Z)("cursor-pointer px-4 py-2 hover:bg-gray-50",{"border-top-slate-100":0!==t}),onMouseUp:e=>e.stopPropagation(),onClick:t=>{d&&(t.stopPropagation(),t.preventDefault()),n||(c?null==c||c(e):null==i||i())},children:h?h():(0,o.jsxs)("div",{className:(0,r.Z)("flex w-full items-center gap-2",n?"text-slate-200":"text-slate-700"),children:[l,(0,o.jsx)("div",{className:"text-sm font-normal",children:a})]})},u||p)}))})]})}},74340:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});var o=n(4302);function r(e,t){return(0,o.Z)(e,(e,n)=>{let{arg:o}=n;return t(o)})}},17379:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var o=n(69389);function r(e){let t=(0,o.useTranslations)(e),n=(e,n)=>t(e,n);return n.rich=(e,n,o)=>t.rich(e,n,o),n}},32103:function(e,t,n){"use strict";n.d(t,{Bl:function(){return m},vz:function(){return v},$3:function(){return f},O4:function(){return C}});var o=n(98582),r=n(52900),i=n(40112),s=n(87013);let c=null;async function a(){if(c)return c;try{return c=(await n.e(6930).then(n.t.bind(n,86930,23))).EventSourcePolyfill}catch(e){return console.warn("[SSE] EventSourcePolyfill not available, falling back to native EventSource"),null}}class l{setStore(e){this.store=e}acquireConnectionLock(){return this.connectionMutex?(console.log("[SSE] Connection lock already acquired, skipping operation"),!1):(this.connectionMutex=!0,!0)}releaseConnectionLock(){this.connectionMutex=!1}updateConnectionState(e,t,n){void 0!==e&&(this.isConnecting=e),void 0!==t&&(this.readyState=t),void 0!==n&&(this.isManuallyDisconnected=n)}addCustomEventListener(e,t){this.eventSource&&"addEventListener"in this.eventSource&&(this.eventListeners.set(e,t),this.eventSource.addEventListener(e,t))}cleanupEventListeners(){this.eventSource&&"removeEventListener"in this.eventSource&&this.eventListeners.forEach((e,t)=>{var n,o;null===(o=this.eventSource)||void 0===o||null===(n=o.removeEventListener)||void 0===n||n.call(o,t,e)}),this.eventListeners.clear()}getAuthHeaders(){let e={};try{if(this.store){var t,n;let o=this.store.getState(),r=null==o?void 0:null===(t=o.userAuth)||void 0===t?void 0:t.access;r&&(e.Authorization="Bearer ".concat(r));let i=null==o?void 0:null===(n=o.userAuth)||void 0===n?void 0:n.anonymous_info;i&&(e["X-ODIN-ID"]=i.odin_id,e["X-ODIN-BRUCE"]=i.bruce)}let o=(0,s.F4)();o&&(e.Wayo=o.password);let c=(0,r.ej)("countryCode");e["X-Country-Code"]=(0,i.Nv)(c)}catch(e){console.warn("[SSE] Failed to get auth headers:",e)}return e}buildSSEUrl(){return"".concat("https://backend.thewayo.com","/client/chats/chat/").concat(this.options.chat_id,"/sse")}buildSSEUrlWithParams(){let e=this.buildSSEUrl(),t=this.getAuthHeaders(),n=new URLSearchParams;t.Authorization&&n.set("authorization",t.Authorization),t["X-Country-Code"]&&n.set("country_code",t["X-Country-Code"]);let o=n.toString();return o?"".concat(e,"?").concat(o):e}async connectWithPolyfill(){let e=await a();if(!e){console.warn("[SSE] EventSourcePolyfill not available, falling back to native EventSource"),this.connectWithNativeEventSource();return}let t=this.buildSSEUrl(),n=this.getAuthHeaders();console.log("[SSE] Connecting with EventSourcePolyfill and custom headers:",n,"URL:",t);let o={headers:n,heartbeatTimeout:45e3};try{console.log("create>>> connectWithPolyfill",t,o),this.eventSource=new e(t,o),this.setupEventListeners()}catch(e){console.error("[SSE] Failed to create EventSourcePolyfill:",e),this.handleConnectionError(e)}}connectWithNativeEventSource(){let e="url-params"===this.options.authMethod?this.buildSSEUrlWithParams():this.buildSSEUrl();console.log("[SSE] Connecting with native EventSource:",e);try{this.eventSource=new EventSource(e),this.setupEventListeners()}catch(e){console.error("[SSE] Failed to create native EventSource:",e),this.handleConnectionError(e)}}setupEventListeners(){this.eventSource&&(this.eventSource.onopen=e=>{var t,n,o,r,i;if(this.isManuallyDisconnected){console.log("[SSE] Connection opened but was manually disconnected, closing immediately"),null===(t=this.eventSource)||void 0===t||t.close(),this.releaseConnectionLock();return}console.log("[SSE] Connection opened for chat:",this.options.chat_id),this.updateConnectionState(!1,EventSource.OPEN),this.isSuccessfullyConnected=!0,this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null,console.log("[SSE] Reconnection stopped - connection successful")),this.heartbeatTimeoutId&&(clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null),this.reconnectAttempts=0,this.releaseConnectionLock(),this.isReconnecting?(console.log("[SSE] Reconnection successful"),this.isReconnecting=!1,null===(n=(o=this.options).onReconnectSuccess)||void 0===n||n.call(o,e)):null===(r=(i=this.options).onOpen)||void 0===r||r.call(i,e)},this.eventSource.onmessage=e=>{var t,n,o,r;if(!this.isManuallyDisconnected)try{let o=JSON.parse(e.data);console.log("[SSE] Message received:",o),null===(t=(n=this.options).onMessage)||void 0===t||t.call(n,o)}catch(e){console.error("[SSE] Failed to parse message:",e),null===(o=(r=this.options).onError)||void 0===o||o.call(r,new Event("parse-error"))}},this.eventSource.onerror=e=>{var t,n,o,r,i,s;if(!this.isManuallyDisconnected){if(console.error("[SSE] Connection error for chat:",this.options.chat_id,e),this.isSuccessfullyConnected){this.safeCleanupConnection(),this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.updateConnectionState(!1,EventSource.CLOSED),this.releaseConnectionLock(),null===(r=(i=this.options).onError)||void 0===r||r.call(i,e);return}if(this.heartbeatTimeoutId&&(clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null),this.stabilizeResetTimeoutId&&(clearTimeout(this.stabilizeResetTimeoutId),this.stabilizeResetTimeoutId=null),e&&"object"==typeof e&&"message"in e){let t=e.message||"";t.includes("Content-Type")&&t.includes("application/json")&&console.error("[SSE] Server returned JSON instead of SSE stream.","This usually means:","\n1. The SSE endpoint path is incorrect","\n2. Authentication failed","\n3. The server returned an error response","\nPlease check the network tab for the actual response.")}this.updateConnectionState(!1,null!==(s=null===(t=this.eventSource)||void 0===t?void 0:t.readyState)&&void 0!==s?s:EventSource.CLOSED),this.safeCleanupConnection(),this.releaseConnectionLock(),null===(n=(o=this.options).onError)||void 0===n||n.call(o,e),this.handleReconnect()}},"addEventListener"in this.eventSource&&(this.addCustomEventListener("close",e=>{var t,n;this.isManuallyDisconnected||(console.log("[SSE] Connection closed for chat:",this.options.chat_id),this.updateConnectionState(void 0,EventSource.CLOSED),null===(t=(n=this.options).onClose)||void 0===t||t.call(n,e))}),this.addCustomEventListener("heartbeat",e=>{this.heartbeatTimeoutId&&(clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null),this.heartbeatTimeoutId=setTimeout(()=>{console.log("[SSE] Heartbeat timeout detected, marking connection as failed"),this.isSuccessfullyConnected=!1,this.updateConnectionState(!1,EventSource.CLOSED),this.handleReconnect()},3e4)}),this.addCustomEventListener("connected",e=>{console.log("[SSE] Connected event received",e)}),this.addCustomEventListener("chat_message_started",e=>{try{var t,n;let o=JSON.parse(e.data);console.log("[SSE] chat_message_started event:",o),null===(t=(n=this.options).onMessageStarted)||void 0===t||t.call(n,o)}catch(e){console.error("[SSE] Failed to parse chat_message_started event:",e)}}),this.addCustomEventListener("thinking",e=>{try{var t,n;let o=JSON.parse(e.data);console.log("[SSE] thinking event:",o),null===(t=(n=this.options).onThinking)||void 0===t||t.call(n,o)}catch(e){console.error("[SSE] Failed to parse thinking event:",e)}}),this.addCustomEventListener("chat_message",e=>{try{var t,n;let o=JSON.parse(e.data);console.log("[SSE] chat_message event:",o),null===(t=(n=this.options).onMessage)||void 0===t||t.call(n,o)}catch(e){console.error("[SSE] Failed to parse chat_message event:",e)}}),this.addCustomEventListener("chat_message_deleted",e=>{try{var t,n;let o=JSON.parse(e.data);console.log("[SSE] chat_message_deleted event:",o),null===(t=(n=this.options).onMessageDeleted)||void 0===t||t.call(n,o)}catch(e){console.error("[SSE] Failed to parse chat_message_deleted event:",e)}}),this.addCustomEventListener("typing",e=>{try{var t,n;let o=JSON.parse(e.data);console.log("[SSE] Typing event:",o),null===(t=(n=this.options).onMessage)||void 0===t||t.call(n,o)}catch(e){console.error("[SSE] Failed to parse typing event:",e)}})))}handleConnectionError(e){var t,n;this.updateConnectionState(!1,EventSource.CLOSED),this.releaseConnectionLock(),null===(t=(n=this.options).onError)||void 0===t||t.call(n,new Event("connection-error")),this.handleReconnect()}handleReconnect(){if(this.isSuccessfullyConnected){console.log("[SSE] Connection was previously successful, skipping reconnect");return}if(this.isManuallyDisconnected){console.log("[SSE] Connection was manually disconnected, skipping reconnect");return}if(this.connectionMutex){console.log("[SSE] Already reconnecting, skipping duplicate reconnect");return}if(this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.options.reconnect&&this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++,console.log(this.reconnectAttempts);let e=Math.min(this.reconnectInterval*Math.pow(2,this.reconnectAttempts-1),3e4);console.log("[SSE] Attempting to reconnect (".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,") in ").concat(e,"ms...")),this.reconnectTimeoutId=setTimeout(()=>{if(this.isManuallyDisconnected){console.log("[SSE] Reconnect timer fired but connection was manually disconnected, aborting");return}this.connectionMutex&&console.log("[SSE] Reconnect timer fired but connection is already in progress, aborting"),this.safeCleanupConnection(),this.connect()},e)}else console.warn("[SSE] Max reconnection attempts reached"),this.updateConnectionState(!1,EventSource.CLOSED,!0),this.safeCleanupConnection(),this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null)}safeCleanupConnection(){this.eventSource&&(this.eventSource.onopen=null,this.eventSource.onmessage=null,this.eventSource.onerror=null,this.cleanupEventListeners(),this.eventSource.close(),this.eventSource=null),this.stabilizeResetTimeoutId&&(clearTimeout(this.stabilizeResetTimeoutId),this.stabilizeResetTimeoutId=null),this.updateConnectionState(!1,EventSource.CLOSED)}async connect(){if(this.isConnecting||this.readyState===EventSource.OPEN){console.log("[SSE] Already connecting or connected, skipping");return}if(!this.acquireConnectionLock()){console.log("[SSE] Failed to acquire connection lock, another connection in progress");return}try{this.updateConnectionState(!0,EventSource.CONNECTING,!1),console.log("[SSE] Connecting using EventSourcePolyfill (".concat("direct"," mode)...")),await this.connectWithPolyfill()}catch(e){throw console.error("[SSE] Connect failed:",e),this.updateConnectionState(!1,EventSource.CLOSED),this.releaseConnectionLock(),e}}disconnect(){console.log("[SSE] Manually disconnecting..."),this.updateConnectionState(!1,EventSource.CLOSED,!0),this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.safeCleanupConnection(),this.reconnectAttempts=0,this.isSuccessfullyConnected=!1,this.releaseConnectionLock()}isConnected(){return this.readyState===EventSource.OPEN}getReadyState(){return this.readyState}forceReconnect(){console.log("[SSE] Force reconnect triggered"),this.isSuccessfullyConnected=!1,this.isManuallyDisconnected=!1,this.isReconnecting=!0,this.reconnectAttempts=0,this.safeCleanupConnection(),this.releaseConnectionLock(),this.handleReconnect()}constructor(e){var t,n;this.eventSource=null,this.reconnectAttempts=0,this.isConnecting=!1,this.store=null,this.readyState=EventSource.CLOSED,this.reconnectTimeoutId=null,this.isManuallyDisconnected=!1,this.connectionMutex=!1,this.eventListeners=new Map,this.stabilizeResetTimeoutId=null,this.isSuccessfullyConnected=!1,this.heartbeatTimeoutId=null,this.isReconnecting=!1,this.options=e,this.maxReconnectAttempts=null!==(t=e.maxReconnectAttempts)&&void 0!==t?t:5,this.reconnectInterval=null!==(n=e.reconnectInterval)&&void 0!==n?n:3e3}}var u=n(74340),d=n(74036),h=n(7653),p=n(46575);function C(){return(0,p.ZP)("CHAT_UNREAD",()=>(0,o.k9)(),{refreshInterval:5e3})}function v(){return(0,u.d)("CHAT_CHAT_FLOW",o.om)}function f(){return(0,u.d)("CHAT_SEND_MESSAGE",o.bG)}function m(e,t){let n=(0,h.useRef)([]),[r,i]=(0,h.useState)(!1),[s,c]=(0,h.useState)([]),[a,u]=(0,h.useState)([]),[p,C]=(0,h.useState)([]),v=(0,h.useRef)(),f=(0,h.useRef)(),m=(0,h.useRef)(null),g=(0,h.useRef)(),S=(0,h.useRef)(),y=(0,h.useCallback)(()=>{m.current&&(clearTimeout(m.current),m.current=null)},[]),w=(0,h.useCallback)(()=>{y(),m.current=setTimeout(()=>{i(!1),c([]),m.current=null},12e4)},[y]),x=(0,h.useCallback)(e=>{(null==e?void 0:e.user_type)==="ai"&&(i(!0),w())},[w]);g.current=x;let E=(0,h.useCallback)(e=>{c(t=>((null==t?void 0:t.length)?null==t?void 0:t[(null==t?void 0:t.length)-1]:"")===e.message?t:[...t,e.message]),i(()=>(w(),!0))},[c,w]);f.current=E;let L=(0,h.useRef)(),k=(0,h.useCallback)(e=>{let t=(Array.isArray(e)?e:[e]).filter(e=>e.id).filter(e=>!n.current.some(t=>t.id===e.id));n.current=[...n.current,...t],n.current.length>1e3&&(n.current=n.current.slice(-1e3)),t.some(e=>{var t;return(null===(t=e.user)||void 0===t?void 0:t.type)==="ai"})&&(y(),i(!1),c([])),u([...n.current])},[y]),j=(0,h.useCallback)(t=>{console.log("[SSE] Reconnect success",t),e&&(0,o.om)({chat_id:e}).then(e=>{var t;null===(t=v.current)||void 0===t||t.call(v,e.data||[])})},[e]);S.current=j,v.current=k;let b=(0,h.useCallback)(e=>{C(t=>[...t,e])},[C]);L.current=b;let A=(0,h.useCallback)(()=>{n.current=[],u([]),C([]),y()},[C,u,y]),M=(0,h.useMemo)(()=>({chat_id:e,authMethod:null!=t?t:"fetch-stream",onMessageStarted:e=>{var t;return null===(t=g.current)||void 0===t?void 0:t.call(g,e)},onMessage:e=>{var t;return null===(t=v.current)||void 0===t?void 0:t.call(v,e)},onThinking:e=>{var t;return null===(t=f.current)||void 0===t?void 0:t.call(f,e)},reconnect:!0,onReconnectSuccess:e=>{var t;return null===(t=S.current)||void 0===t?void 0:t.call(S,e)},onMessageDeleted:e=>{var t;return null===(t=L.current)||void 0===t?void 0:t.call(L,e)},maxReconnectAttempts:5,reconnectInterval:3e3}),[e,t]),{connect:T,disconnect:_,isConnected:P,getReadyState:B}=function(e){let t=(0,h.useRef)(null),n=(0,h.useRef)(!1),o=(0,h.useRef)(e),[r,i]=(0,h.useState)({isConnected:!1,readyState:null});o.current=e;let s=(0,h.useCallback)(async()=>{let e=o.current;if(!e.chat_id||n.current)return;if(t.current){let e=t.current.getReadyState();if(e===EventSource.OPEN||e===EventSource.CONNECTING){console.log("[SSE] Connection already exists and active, skipping");return}if(e===EventSource.CLOSED){console.log("[SSE] Connection closed, letting internal reconnect logic handle it");return}}console.log("[SSE] Creating new connection instance");let r=new l({...e,chat_id:e.chat_id,onOpen:t=>{var o;n.current=!0,i({isConnected:!0,readyState:EventSource.OPEN}),null===(o=e.onOpen)||void 0===o||o.call(e,t)},onClose:t=>{var o;n.current=!1,i({isConnected:!1,readyState:EventSource.CLOSED}),null===(o=e.onClose)||void 0===o||o.call(e,t)},onError:t=>{var o;n.current=!1,i({isConnected:!1,readyState:EventSource.CLOSED}),null===(o=e.onError)||void 0===o||o.call(e,t)}});r.setStore(d.h),t.current=r,await r.connect()},[]),c=(0,h.useCallback)(()=>{t.current&&(n.current=!1,i({isConnected:!1,readyState:EventSource.CLOSED}))},[]);(0,h.useEffect)(()=>{let e=()=>{var e;console.log("[SSE] Force disconnect triggered",document.visibilityState),"visible"===document.visibilityState&&(console.log("[SSE] Force disconnect triggered"),null===(e=t.current)||void 0===e||e.forceReconnect())};return window.addEventListener("visibilitychange",e),()=>{window.removeEventListener("visibilitychange",e)}},[]);let a=(0,h.useCallback)(()=>{t.current&&(t.current.disconnect(),t.current=null,n.current=!1,i({isConnected:!1,readyState:EventSource.CLOSED}))},[]),u=(0,h.useCallback)(()=>{t.current&&(t.current.disconnect(),t.current=null,n.current=!1,i({isConnected:!1,readyState:EventSource.CLOSED}))},[]),p=(0,h.useCallback)(()=>r.isConnected,[r.isConnected]),C=(0,h.useCallback)(()=>r.readyState,[r.readyState]),v=(0,h.useRef)();return(0,h.useEffect)(()=>(v.current!==e.chat_id&&(t.current&&a(),v.current=e.chat_id),e.chat_id?s():c(),()=>{u()}),[e.chat_id,s,c,a,u]),{connect:s,disconnect:c,forceDisconnect:a,isConnected:p,getReadyState:C}}(M);return(0,h.useEffect)(()=>()=>{y()},[y]),(0,h.useEffect)(()=>{M.chat_id&&(c([]),i(!1),y())},[M.chat_id,y]),{deleteMessageIds:p,messages:a,clearMessages:A,connect:T,disconnect:_,isConnected:P,getReadyState:B,isThinking:r,thinkingList:s}}},99007:function(e,t,n){"use strict";n.d(t,{dh:function(){return c}});var o=n(35816),r=n(69856),i=n(10191);let s=(0,o.LC)({reducerPath:"attachmentApi",baseQuery:(0,r.LK)(),tagTypes:[""],endpoints:e=>({createAttachment:e.mutation({queryFn:async e=>({data:await (0,i.OE)(e)})}),createAndLinkAttachment:e.mutation({queryFn:async e=>({data:await (0,i.J1)(e)})}),deleteProjectAttachment:e.mutation({queryFn:async e=>({data:await (0,i.OW)(e)}),onQueryStarted:async(e,t)=>{let{id:n,projectId:o}=e,{dispatch:r,queryFulfilled:i}=t;try{await i}catch(e){}}}),deleteAttachment:e.mutation({queryFn:async e=>({data:await (0,i.OW)(e)})}),updateAttachment:e.mutation({queryFn:async e=>({data:await (0,i.Y5)(e)})})})}),{useCreateAttachmentMutation:c,useDeleteProjectAttachmentMutation:a,useCreateAndLinkAttachmentMutation:l,useUpdateAttachmentMutation:u,useDeleteAttachmentMutation:d}=s;t.ZP=s},47951:function(e,t,n){"use strict";n.d(t,{hO:function(){return u},xs:function(){return l}});var o=n(77449),r=n(7653),i=n(45806);let s=(0,o.oM)({name:"chat",initialState:{target:{id:"",type:""},expand:!1},reducers:{setChatProjectId(e,t){let n={id:t.payload,type:"project"};e.target=t.payload?n:null},toggleChatbox(e,t){e.expand=t.payload}}}),{setChatProjectId:c,toggleChatbox:a}=s.actions,l=s.reducer;function u(){let e=(0,i.T)();return(0,r.useCallback)(t=>{e(c(t))},[e])}},734:function(e,t,n){"use strict";n.d(t,{f0:function(){return l},p8:function(){return c}});var o=n(35816),r=n(69856),i=n(26169);let s=(0,o.LC)({reducerPath:"geolocationApi",baseQuery:(0,r.LK)(),tagTypes:[""],endpoints:e=>({listCountries:e.query({queryFn:async()=>({data:await (0,i.B3)()})}),listStates:e.query({queryFn:async e=>({data:await (0,i.Ib)(e)})}),listCities:e.query({queryFn:async e=>({data:await (0,i.ze)(e)})})})}),{useListCountriesQuery:c,useListCitiesQuery:a,useListStatesQuery:l}=s;t.ZP=s},74036:function(e,t,n){"use strict";n.d(t,{Dj:function(){return G},h:function(){return J}});var o=n(77449),r=n(26312),i=n(47772),s=n(99007),c=n(90012);let a=(0,o.oM)({name:"auth",initialState:{user:null,access:null,refresh:null},reducers:{clearAuth(e){e.access=null,e.refresh=null,e.user=null}},extraReducers(e){e.addMatcher(c.Z.endpoints.signinWithCredentials.matchFulfilled,(e,t)=>{let{payload:n}=t;e.access=n.access,e.refresh=n.refresh,e.user=n.user}),e.addMatcher(c.Z.endpoints.refreshToken.matchFulfilled,(e,t)=>{let{payload:n}=t,{access:o,refresh:r}=n;e.user&&(e.access=o,e.refresh=r)})}}),{clearAuth:l}=a.actions;var u=n(35816),d=n(69856),h=n(16287);let p=async e=>h.ZP.post("/api/comments",e).then(e=>e.data),C=async e=>{let{id:t,...n}=e;return h.ZP.put("/api/comments/".concat(t),n).then(e=>e.data)},v=async e=>h.ZP.delete("/api/comments/".concat(e)).then(e=>e.status),f=async e=>{let t=new URLSearchParams(e).toString();return h.ZP.get("/api/comments?".concat(t)).then(e=>e.data)},m=(0,u.LC)({reducerPath:"commentsApi",baseQuery:(0,d.LK)(),tagTypes:["ListComments"],endpoints:e=>({listComments:e.query({queryFn:async e=>({data:await f(e)}),providesTags:["ListComments"]}),createComment:e.mutation({queryFn:async e=>({data:await p(e)}),invalidatesTags:["ListComments"]}),updateComment:e.mutation({queryFn:async e=>({data:await C(e)}),invalidatesTags:["ListComments"]}),deleteComment:e.mutation({queryFn:async e=>({data:await v(e)}),invalidatesTags:["ListComments"]})})}),{useListCommentsQuery:g,useCreateCommentMutation:S,useUpdateCommentMutation:y,useDeleteCommentMutation:w}=m;var x=n(734);let E=e=>"/api/projects/".concat(e,"/notes"),L=async e=>{let{projectId:t,payload:n}=e;return h.ZP.get(E(t),n?{params:n}:{}).then(e=>e.data)},k=async e=>{let{projectId:t,payload:n}=e;return h.ZP.post("/api/projects/".concat(t,"/notes"),n).then(e=>e.data)},j=async e=>{let{projectId:t,noteId:n,payload:o}=e,r="/api/projects/".concat(t,"/notes/").concat(n);return h.ZP.put(r,o).then(e=>e.data)},b=async e=>{let{projectId:t,noteId:n}=e,o="/api/projects/".concat(t,"/notes/").concat(n);return h.ZP.delete(o).then(e=>e.data)},A=(0,u.LC)({reducerPath:"notesApi",baseQuery:(0,d.LK)(),tagTypes:["ListNotes"],endpoints:e=>({listNotes:e.query({queryFn:async e=>({data:await L(e)}),providesTags:["ListNotes"]}),createNote:e.mutation({queryFn:async e=>({data:await k(e)}),invalidatesTags:["ListNotes"]}),updateNote:e.mutation({queryFn:async e=>{let{projectId:t,noteId:n,payload:o}=e;return{data:await j({projectId:t,noteId:n,payload:o})}},invalidatesTags:["ListNotes"]}),deleteNote:e.mutation({queryFn:async e=>{let{projectId:t,noteId:n}=e;return{data:await b({projectId:t,noteId:n})}},invalidatesTags:["ListNotes"]})})}),{useListNotesQuery:M,useCreateNoteMutation:T,useDeleteNoteMutation:_,useUpdateNoteMutation:P}=A,B=(0,n(8381).Z)("local");var Z=n(24251),N=n(61027),I=n(90231),O=n(28692),R=n(47951),H=n(90785);let V=(0,o.PH)("resetStore"),D={predicate:e=>null!=e&&!!e.type&&e.type.startsWith("".concat(N.Ss,"/")),channel:"wayo-portal-state-sync",broadcastChannelOption:{type:"native"}},F={key:"usr:root",version:1,storage:B,blacklist:[a.name,x.ZP.reducerPath,s.ZP.reducerPath,A.reducerPath,m.reducerPath,N.Ss]},q={key:"usr:".concat(a.name),version:1,storage:B,whitelist:["user","access","refresh"]},U={key:"usr:".concat(N.Ss),version:1,storage:B,blacklist:["isUpdatingAnonymousInfo"]},z=(0,r.UY)({auth:(0,i.OJ)(q,a.reducer),[c.Z.reducerPath]:c.Z.reducer,[x.ZP.reducerPath]:x.ZP.reducer,[s.ZP.reducerPath]:s.ZP.reducer,[A.reducerPath]:A.reducer,[m.reducerPath]:m.reducer,userAuth:(0,i.OJ)(U,N.wW),chat:R.xs,orderInfo:Z.zL,notification:H.oX}),W=(0,i.OJ)(F,(e,t)=>t.type===V.type?z(void 0,t):z(e,t)),J=(()=>{let e=(0,O.K3)(D),t=(0,o.xC)({reducer:W,middleware:t=>t({immutableCheck:!1,serializableCheck:!1}).concat(e,c.Z.middleware,x.ZP.middleware,s.ZP.middleware,A.middleware,m.middleware)});return(0,O.UX)(t),t})(),G=(0,I.Z)(J)},90785:function(e,t,n){"use strict";n.d(t,{Gu:function(){return l},ZE:function(){return u},oX:function(){return a}});var o=n(77449),r=n(7653),i=n(45806);let s=(0,o.oM)({name:"notification",initialState:{unreadCount:0},reducers:{setUnreadCount(e,t){e.unreadCount=t.payload}}}),{setUnreadCount:c}=s.actions,a=s.reducer;function l(){return(0,i.C)(e=>e.notification)}function u(){let e=(0,i.T)();return(0,r.useCallback)(t=>{e(c(Math.max(0,t)))},[e])}},24251:function(e,t,n){"use strict";n.d(t,{kh:function(){return l},zL:function(){return a}});var o=n(77449),r=n(7653),i=n(45806);let s=(0,o.oM)({name:"orderInfo",initialState:{xid:"",orderType:""},reducers:{setOrderInfo(e,t){e.xid=t.payload.xid,e.orderType=t.payload.orderType}}}),{setOrderInfo:c}=s.actions,a=s.reducer;function l(){let e=(0,i.T)();return(0,r.useCallback)(t=>{e(c(t))},[e])}}}]);