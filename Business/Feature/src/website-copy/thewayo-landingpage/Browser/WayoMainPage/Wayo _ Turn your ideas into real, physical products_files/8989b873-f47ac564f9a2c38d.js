"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6111],{19446:function(e,t,n){let r,i,o;n.d(t,{Zw:function(){return eu}});var s=n(46385).lW;let u=(()=>{let e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return t=>e.call(t)})();function f(e){return"Uint8Array"===u(e)}function l(e){return"object"==typeof e&&null!=e&&Symbol.toStringTag in e&&("ArrayBuffer"===e[Symbol.toStringTag]||"SharedArrayBuffer"===e[Symbol.toStringTag])}function a(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)}function h(e){return"object"==typeof e&&null!=e&&Symbol.toStringTag in e&&"Map"===e[Symbol.toStringTag]}function g(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){return JSON.stringify(e,(e,t)=>"bigint"==typeof t?{$numberLong:`${t}`}:h(t)?Object.fromEntries(t):t)}let b=Symbol.for("@@mdb.bson.version"),p=0x7fffffffffffffff-1;Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class d extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,t){super(e,t)}static isBSONError(e){return null!=e&&"object"==typeof e&&"bsonError"in e&&!0===e.bsonError&&"name"in e&&"message"in e&&"stack"in e}}class m extends d{get name(){return"BSONVersionError"}constructor(){super("Unsupported BSON version, bson types must be from bson 6.x.x")}}class y extends d{get name(){return"BSONRuntimeError"}constructor(e){super(e)}}class w extends d{get name(){return"BSONOffsetError"}constructor(e,t,n){super(`${e}. offset: ${t}`,n),this.offset=t}}function S(e,t,n,o){if(o){r??=new TextDecoder("utf8",{fatal:!0});try{return r.decode(e.subarray(t,n))}catch(e){throw new d("Invalid UTF-8 string in BSON document",{cause:e})}}return(i??=new TextDecoder("utf8",{fatal:!1})).decode(e.subarray(t,n))}function B(e,t,n){if(0===e.length)return"";let r=n-t;if(0===r)return"";if(r>20)return null;if(1===r&&e[t]<128)return String.fromCharCode(e[t]);if(2===r&&e[t]<128&&e[t+1]<128)return String.fromCharCode(e[t])+String.fromCharCode(e[t+1]);if(3===r&&e[t]<128&&e[t+1]<128&&e[t+2]<128)return String.fromCharCode(e[t])+String.fromCharCode(e[t+1])+String.fromCharCode(e[t+2]);let i=[];for(let r=t;r<n;r++){let t=e[r];if(t>127)return null;i.push(t)}return String.fromCharCode(...i)}let E={toLocalBufferType(e){if(s.isBuffer(e))return e;if(ArrayBuffer.isView(e))return s.from(e.buffer,e.byteOffset,e.byteLength);let t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if("ArrayBuffer"===t||"SharedArrayBuffer"===t||"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t)return s.from(e);throw new d("Cannot create Buffer from the passed potentialBuffer.")},allocate:e=>s.alloc(e),allocateUnsafe:e=>s.allocUnsafe(e),equals:(e,t)=>E.toLocalBufferType(e).equals(t),fromNumberArray:e=>s.from(e),fromBase64:e=>s.from(e,"base64"),toBase64:e=>E.toLocalBufferType(e).toString("base64"),fromISO88591:e=>s.from(e,"binary"),toISO88591:e=>E.toLocalBufferType(e).toString("binary"),fromHex:e=>s.from(e,"hex"),toHex:e=>E.toLocalBufferType(e).toString("hex"),toUTF8(e,t,n,r){let i=n-t<=20?B(e,t,n):null;if(null!=i)return i;let o=E.toLocalBufferType(e).toString("utf8",t,n);if(r){for(let r=0;r<o.length;r++)if(65533===o.charCodeAt(r)){S(e,t,n,!0);break}}return o},utf8ByteLength:e=>s.byteLength(e,"utf8"),encodeUTF8Into(e,t,n){let r=function(e,t,n){if(0===t.length)return 0;if(t.length>25||e.length-n<t.length)return null;for(let r=0,i=n;r<t.length;r++,i++){let n=t.charCodeAt(r);if(n>127)return null;e[i]=n}return t.length}(e,t,n);return null!=r?r:E.toLocalBufferType(e).write(t,n,void 0,"utf8")},randomBytes:function(e){return E.fromNumberArray(Array.from({length:e},()=>Math.floor(256*Math.random())))},swap32:e=>E.toLocalBufferType(e).swap32()};function N(e){if(e<0)throw RangeError(`The argument 'byteLength' is invalid. Received ${e}`);return _.fromNumberArray(Array.from({length:e},()=>Math.floor(256*Math.random())))}let O=(()=>{let{crypto:e}=globalThis;if(null!=e&&"function"==typeof e.getRandomValues)return t=>e.getRandomValues(_.allocate(t));if(function(){let{navigator:e}=globalThis;return"object"==typeof e&&"ReactNative"===e.product}()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return N})(),x=/(\d|[a-f])/i,_={toLocalBufferType(e){let t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if("Uint8Array"===t)return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));if("ArrayBuffer"===t||"SharedArrayBuffer"===t||"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t)return new Uint8Array(e);throw new d("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(e){if("number"!=typeof e)throw TypeError(`The "size" argument must be of type number. Received ${String(e)}`);return new Uint8Array(e)},allocateUnsafe:e=>_.allocate(e),equals(e,t){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},fromNumberArray:e=>Uint8Array.from(e),fromBase64:e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0)),toBase64:e=>btoa(_.toISO88591(e)),fromISO88591:e=>Uint8Array.from(e,e=>255&e.charCodeAt(0)),toISO88591:e=>Array.from(Uint16Array.from(e),e=>String.fromCharCode(e)).join(""),fromHex(e){let t=e.length%2==0?e:e.slice(0,e.length-1),n=[];for(let e=0;e<t.length;e+=2){let r=t[e],i=t[e+1];if(!x.test(r)||!x.test(i))break;let o=Number.parseInt(`${r}${i}`,16);n.push(o)}return Uint8Array.from(n)},toHex:e=>Array.from(e,e=>e.toString(16).padStart(2,"0")).join(""),toUTF8(e,t,n,r){let i=n-t<=20?B(e,t,n):null;return null!=i?i:S(e,t,n,r)},utf8ByteLength:e=>new TextEncoder().encode(e).byteLength,encodeUTF8Into(e,t,n){let r=new TextEncoder().encode(t);return e.set(r,n),r.byteLength},randomBytes:O,swap32(e){if(e.length%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e.length;t+=4){let n=e[t],r=e[t+1],i=e[t+2],o=e[t+3];e[t]=o,e[t+1]=i,e[t+2]=r,e[t+3]=n}return e}},$="function"==typeof s&&s.prototype?._isBuffer!==!0?E:_;class I{get[b](){return 6}[Symbol.for("nodejs.util.inspect.custom")](e,t,n){return this.inspect(e,t,n)}}let U=new Float64Array(1),T=new Uint8Array(U.buffer,0,8);U[0]=-1;let L=0===T[7],v={isBigEndian:L,getNonnegativeInt32LE(e,t){if(e[t+3]>127)throw RangeError(`Size cannot be negative at offset: ${t}`);return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},getInt32LE:(e,t)=>e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,getUint32LE:(e,t)=>e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3],getUint32BE:(e,t)=>e[t+3]+256*e[t+2]+65536*e[t+1]+16777216*e[t],getBigInt64LE(e,t){let n=BigInt(e[t+4]+256*e[t+5]+65536*e[t+6]+(e[t+7]<<24)),r=BigInt(e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]);return(n<<BigInt(32))+r},getFloat64LE:L?(e,t)=>(T[7]=e[t],T[6]=e[t+1],T[5]=e[t+2],T[4]=e[t+3],T[3]=e[t+4],T[2]=e[t+5],T[1]=e[t+6],T[0]=e[t+7],U[0]):(e,t)=>(T[0]=e[t],T[1]=e[t+1],T[2]=e[t+2],T[3]=e[t+3],T[4]=e[t+4],T[5]=e[t+5],T[6]=e[t+6],T[7]=e[t+7],U[0]),setInt32BE:(e,t,n)=>(e[t+3]=n,n>>>=8,e[t+2]=n,n>>>=8,e[t+1]=n,n>>>=8,e[t]=n,4),setInt32LE:(e,t,n)=>(e[t]=n,n>>>=8,e[t+1]=n,n>>>=8,e[t+2]=n,n>>>=8,e[t+3]=n,4),setBigInt64LE(e,t,n){let r=BigInt(4294967295),i=Number(n&r);e[t]=i,i>>=8,e[t+1]=i,i>>=8,e[t+2]=i,i>>=8,e[t+3]=i;let o=Number(n>>BigInt(32)&r);return e[t+4]=o,o>>=8,e[t+5]=o,o>>=8,e[t+6]=o,o>>=8,e[t+7]=o,8},setFloat64LE:L?(e,t,n)=>(U[0]=n,e[t]=T[7],e[t+1]=T[6],e[t+2]=T[5],e[t+3]=T[4],e[t+4]=T[3],e[t+5]=T[2],e[t+6]=T[1],e[t+7]=T[0],8):(e,t,n)=>(U[0]=n,e[t]=T[0],e[t+1]=T[1],e[t+2]=T[2],e[t+3]=T[3],e[t+4]=T[4],e[t+5]=T[5],e[t+6]=T[6],e[t+7]=T[7],8)};class A extends I{get _bsontype(){return"Binary"}constructor(e,t){if(super(),null!=e&&"string"==typeof e&&!ArrayBuffer.isView(e)&&!l(e)&&!Array.isArray(e))throw new d("Binary can only be constructed from Uint8Array or number[]");this.sub_type=t??A.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=$.allocate(A.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?$.fromNumberArray(e):$.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){let t;if("string"==typeof e&&1!==e.length)throw new d("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new d("only accepts single character Uint8Array or Array");if((t="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0])<0||t>255)throw new d("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=t;else{let e=$.allocate(A.BUFFER_SIZE+this.buffer.length);e.set(this.buffer,0),this.buffer=e,this.buffer[this.position++]=t}}write(e,t){if(t="number"==typeof t?t:this.position,this.buffer.byteLength<t+e.length){let t=$.allocate(this.buffer.byteLength+e.length);t.set(this.buffer,0),this.buffer=t}if(ArrayBuffer.isView(e))this.buffer.set($.toLocalBufferType(e),t),this.position=t+e.byteLength>this.position?t+e.length:this.position;else if("string"==typeof e)throw new d("input cannot be string")}read(e,t){let n=e+(t=t&&t>0?t:this.position);return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return $.toBase64(this.buffer.subarray(0,this.position))}toString(e){return"hex"===e?$.toHex(this.buffer.subarray(0,this.position)):"base64"===e?$.toBase64(this.buffer.subarray(0,this.position)):$.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===A.SUBTYPE_VECTOR&&j(this);let t=$.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===n.length?"0"+n:n}:{$binary:{base64:t,subType:1===n.length?"0"+n:n}}}toUUID(){if(this.sub_type===A.SUBTYPE_UUID)return new D(this.buffer.subarray(0,this.position));throw new d(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${A.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,t){return new A($.fromHex(e),t)}static createFromBase64(e,t){return new A($.fromBase64(e),t)}static fromExtendedJSON(e,t){let n,r;if(t=t||{},"$binary"in e?t.legacy&&"string"==typeof e.$binary&&"$type"in e?(r=e.$type?parseInt(e.$type,16):0,n=$.fromBase64(e.$binary)):"string"!=typeof e.$binary&&(r=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=$.fromBase64(e.$binary.base64)):"$uuid"in e&&(r=4,n=D.bytesFromString(e.$uuid)),!n)throw new d(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return 4===r?new D(n):new A(n,r)}inspect(e,t,n){n??=c;let r=$.toBase64(this.buffer.subarray(0,this.position)),i=n(r,t),o=n(this.sub_type,t);return`Binary.createFromBase64(${i}, ${o})`}toInt8Array(){if(this.sub_type!==A.SUBTYPE_VECTOR)throw new d("Binary sub_type is not Vector");if(this.buffer[0]!==A.VECTOR_TYPE.Int8)throw new d("Binary datatype field is not Int8");return j(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==A.SUBTYPE_VECTOR)throw new d("Binary sub_type is not Vector");if(this.buffer[0]!==A.VECTOR_TYPE.Float32)throw new d("Binary datatype field is not Float32");j(this);let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return v.isBigEndian&&$.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==A.SUBTYPE_VECTOR)throw new d("Binary sub_type is not Vector");if(this.buffer[0]!==A.VECTOR_TYPE.PackedBit)throw new d("Binary datatype field is not packed bit");return j(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==A.SUBTYPE_VECTOR)throw new d("Binary sub_type is not Vector");if(this.buffer[0]!==A.VECTOR_TYPE.PackedBit)throw new d("Binary datatype field is not packed bit");j(this);let e=new Int8Array(8*(this.length()-2)-this.buffer[1]);for(let t=0;t<e.length;t++){let n=t/8|0,r=this.buffer[n+2]>>7-t%8&1;e[t]=r}return e}static fromInt8Array(e){let t=$.allocate(e.byteLength+2);t[0]=A.VECTOR_TYPE.Int8,t[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.set(n,2);let r=new this(t,this.SUBTYPE_VECTOR);return j(r),r}static fromFloat32Array(e){let t=$.allocate(e.byteLength+2);t[0]=A.VECTOR_TYPE.Float32,t[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.set(n,2),v.isBigEndian&&$.swap32(new Uint8Array(t.buffer,2));let r=new this(t,this.SUBTYPE_VECTOR);return j(r),r}static fromPackedBits(e,t=0){let n=$.allocate(e.byteLength+2);n[0]=A.VECTOR_TYPE.PackedBit,n[1]=t,n.set(e,2);let r=new this(n,this.SUBTYPE_VECTOR);return j(r),r}static fromBits(e){let t=new Uint8Array((e.length+7>>>3)+2);t[0]=A.VECTOR_TYPE.PackedBit;let n=e.length%8;t[1]=0===n?0:8-n;for(let n=0;n<e.length;n++){let r=n>>>3,i=e[n];if(0!==i&&1!==i)throw new d(`Invalid bit value at ${n}: must be 0 or 1, found ${e[n]}`);if(0===i)continue;let o=7-n%8;t[r+2]|=i<<o}return new this(t,A.SUBTYPE_VECTOR)}}function j(e){if(e.sub_type!==A.SUBTYPE_VECTOR)return;let t=e.position,n=e.buffer[0],r=e.buffer[1];if((n===A.VECTOR_TYPE.Float32||n===A.VECTOR_TYPE.Int8)&&0!==r)throw new d("Invalid Vector: padding must be zero for int8 and float32 vectors");if(n===A.VECTOR_TYPE.Float32&&0!==t&&t-2!=0&&(t-2)%4!=0)throw new d("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(n===A.VECTOR_TYPE.PackedBit&&0!==r&&2===t)throw new d("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(n===A.VECTOR_TYPE.PackedBit&&r>7)throw new d(`Invalid Vector: padding must be a value between 0 and 7. found: ${r}`)}A.BSON_BINARY_SUBTYPE_DEFAULT=0,A.BUFFER_SIZE=256,A.SUBTYPE_DEFAULT=0,A.SUBTYPE_FUNCTION=1,A.SUBTYPE_BYTE_ARRAY=2,A.SUBTYPE_UUID_OLD=3,A.SUBTYPE_UUID=4,A.SUBTYPE_MD5=5,A.SUBTYPE_ENCRYPTED=6,A.SUBTYPE_COLUMN=7,A.SUBTYPE_SENSITIVE=8,A.SUBTYPE_VECTOR=9,A.SUBTYPE_USER_DEFINED=128,A.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});let R=/^[0-9A-F]{32}$/i,F=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class D extends A{constructor(e){let t;if(null==e)t=D.generate();else if(e instanceof D)t=$.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&16===e.byteLength)t=$.toLocalBufferType(e);else if("string"==typeof e)t=D.bytesFromString(e);else throw new d("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(t,4)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[$.toHex(this.buffer.subarray(0,4)),$.toHex(this.buffer.subarray(4,6)),$.toHex(this.buffer.subarray(6,8)),$.toHex(this.buffer.subarray(8,10)),$.toHex(this.buffer.subarray(10,16))].join("-"):$.toHex(this.buffer)}toString(e){return"hex"===e?$.toHex(this.id):"base64"===e?$.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof D)return $.equals(e.id,this.id);try{return $.equals(new D(e).id,this.id)}catch{return!1}}toBinary(){return new A(this.id,A.SUBTYPE_UUID)}static generate(){let e=$.randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,e}static isValid(e){return!!e&&("string"==typeof e?D.isValidUUIDString(e):f(e)?16===e.byteLength:"Binary"===e._bsontype&&e.sub_type===this.SUBTYPE_UUID&&16===e.buffer.byteLength)}static createFromHexString(e){let t=D.bytesFromString(e);return new D(t)}static createFromBase64(e){return new D($.fromBase64(e))}static bytesFromString(e){if(!D.isValidUUIDString(e))throw new d("UUID string representation must be 32 hex digits or canonical hyphenated representation");return $.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return R.test(e)||F.test(e)}inspect(e,t,n){return n??=c,`new UUID(${n(this.toHexString(),t)})`}}class V extends I{get _bsontype(){return"Code"}constructor(e,t){super(),this.code=e.toString(),this.scope=t??null}toJSON(){return null!=this.scope?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new V(e.$code,e.$scope)}inspect(e,t,n){let r=(n??=c)(this.code,t),i=r.includes("\n");null!=this.scope&&(r+=`,${i?"\n":" "}${n(this.scope,t)}`);let o=i&&null===this.scope;return`new Code(${i?"\n":""}${r}${o?"\n":""})`}}class C extends I{get _bsontype(){return"DBRef"}constructor(e,t,n,r){super();let i=e.split(".");2===i.length&&(n=i.shift(),e=i.shift()),this.collection=e,this.oid=t,this.db=n,this.fields=r||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}static fromExtendedJSON(e){let t=Object.assign({},e);return delete t.$ref,delete t.$id,delete t.$db,new C(e.$ref,e.$id,e.$db,t)}inspect(e,t,n){let r=[(n??=c)(this.namespace,t),n(this.oid,t),...this.db?[n(this.db,t)]:[],...Object.keys(this.fields).length>0?[n(this.fields,t)]:[]];return r[1]=n===c?`new ObjectId(${r[1]})`:r[1],`new DBRef(${r.join(", ")})`}}function P(e){if(""===e)return e;let t=0,n="-"===e[0],r="+"===e[t];(r||n)&&(t+=1);let i=!1;for(;t<e.length&&"0"===e[t];++t)i=!0;return i?`${n?"-":""}${e.length===t?"0":e.slice(t)}`:r?e.slice(1):e}try{o=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}let M={},J={},Y=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class H extends I{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,t,n){super();let r="boolean"==typeof t?t:!!n,i="string"==typeof e?H.fromString(e,r):"bigint"==typeof e?H.fromBigInt(e,r):{low:0|e,high:0|("number"==typeof t?t:0),unsigned:r};this.low=i.low,this.high=i.high,this.unsigned=i.unsigned}static fromBits(e,t,n){return new H(e,t,n)}static fromInt(e,t){let n,r,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(r=J[e]))?r:(n=H.fromBits(e,(0|e)<0?-1:0,!0),i&&(J[e]=n),n):(e|=0,(i=-128<=e&&e<128)&&(r=M[e]))?r:(n=H.fromBits(e,e<0?-1:0,!1),i&&(M[e]=n),n)}static fromNumber(e,t){if(isNaN(e))return t?H.UZERO:H.ZERO;if(t){if(e<0)return H.UZERO;if(e>=18446744073709552e3)return H.MAX_UNSIGNED_VALUE}else{if(e<=-0x8000000000000000)return H.MIN_VALUE;if(e+1>=0x7fffffffffffffff)return H.MAX_VALUE}return e<0?H.fromNumber(-e,t).neg():H.fromBits(e%4294967296|0,e/4294967296|0,t)}static fromBigInt(e,t){let n=BigInt(4294967295),r=BigInt(32);return new H(Number(e&n),Number(e>>r&n),t)}static _fromString(e,t,n){let r;if(0===e.length)throw new d("empty string");if(n<2||36<n)throw new d("radix");if((r=e.indexOf("-"))>0)throw new d("interior hyphen");if(0===r)return H._fromString(e.substring(1),t,n).neg();let i=H.fromNumber(Math.pow(n,8)),o=H.ZERO;for(let t=0;t<e.length;t+=8){let r=Math.min(8,e.length-t),s=parseInt(e.substring(t,t+r),n);if(r<8){let e=H.fromNumber(Math.pow(n,r));o=o.mul(e).add(H.fromNumber(s))}else o=(o=o.mul(i)).add(H.fromNumber(s))}return o.unsigned=t,o}static fromStringStrict(e,t,n){let r=!1;if("number"==typeof t?(n=t,t=!1):r=!!t,n??=10,e.trim()!==e)throw new d(`Input: '${e}' contains leading and/or trailing whitespace`);if(!function(e,t){t=t??10;let n="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,t);return!RegExp(`[^-+${n}]`,"i").test(e)&&e}(e,n))throw new d(`Input: '${e}' contains invalid characters for radix: ${n}`);let i=P(e),o=H._fromString(i,r,n);if(o.toString(n).toLowerCase()!==i.toLowerCase())throw new d(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${null!=n?`with radix: ${n}`:""}`);return o}static fromString(e,t,n){let r=!1;return("number"==typeof t?(n=t,t=!1):r=!!t,n??=10,"NaN"===e&&n<24)?H.ZERO:("Infinity"===e||"+Infinity"===e||"-Infinity"===e)&&n<35?H.ZERO:H._fromString(e,r,n)}static fromBytes(e,t,n){return n?H.fromBytesLE(e,t):H.fromBytesBE(e,t)}static fromBytesLE(e,t){return new H(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)}static fromBytesBE(e,t){return new H(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}static isLong(e){return null!=e&&"object"==typeof e&&"__isLong__"in e&&!0===e.__isLong__}static fromValue(e,t){return"number"==typeof e?H.fromNumber(e,t):"string"==typeof e?H.fromString(e,t):H.fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}add(e){H.isLong(e)||(e=H.fromValue(e));let t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,f=65535&e.low,l=0,a=0,h,g;return h=0+((g=0+(i+f))>>>16),g&=65535,h+=r+u,a+=h>>>16,h&=65535,a+=n+s,l+=a>>>16,a&=65535,l+=t+o,l&=65535,H.fromBits(h<<16|g,l<<16|a,this.unsigned)}and(e){return H.isLong(e)||(e=H.fromValue(e)),H.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(H.isLong(e)||(e=H.fromValue(e)),this.eq(e))return 0;let t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){let t,n,r;if(H.isLong(e)||(e=H.fromValue(e)),e.isZero())throw new d("division by zero");if(o){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;let t=(this.unsigned?o.div_u:o.div_s)(this.low,this.high,e.low,e.high);return H.fromBits(t,o.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?H.UZERO:H.ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return H.UZERO;if(e.gt(this.shru(1)))return H.UONE;r=H.UZERO}else{if(this.eq(H.MIN_VALUE))return e.eq(H.ONE)||e.eq(H.NEG_ONE)?H.MIN_VALUE:e.eq(H.MIN_VALUE)?H.ONE:(t=this.shr(1).div(e).shl(1)).eq(H.ZERO)?e.isNegative()?H.ONE:H.NEG_ONE:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(H.MIN_VALUE))return this.unsigned?H.UZERO:H.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=H.ZERO}for(n=this;n.gte(e);){let i=Math.ceil(Math.log(t=Math.max(1,Math.floor(n.toNumber()/e.toNumber())))/Math.LN2),o=i<=48?1:Math.pow(2,i-48),s=H.fromNumber(t),u=s.mul(e);for(;u.isNegative()||u.gt(n);)t-=o,u=(s=H.fromNumber(t,this.unsigned)).mul(e);s.isZero()&&(s=H.ONE),r=r.add(s),n=n.sub(u)}return r}div(e){return this.divide(e)}equals(e){return H.isLong(e)||(e=H.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){let e;if(this.isNegative())return this.eq(H.MIN_VALUE)?64:this.neg().getNumBitsAbs();let t=0!==this.high?this.high:this.low;for(e=31;e>0&&(t&1<<e)==0;e--);return 0!==this.high?e+33:e+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(1&this.low)==0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(1&this.low)==1}isPositive(){return this.unsigned||this.high>=0}isZero(){return 0===this.high&&0===this.low}lessThan(e){return 0>this.comp(e)}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return 0>=this.comp(e)}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(H.isLong(e)||(e=H.fromValue(e)),o){let t=(this.unsigned?o.rem_u:o.rem_s)(this.low,this.high,e.low,e.high);return H.fromBits(t,o.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return H.ZERO;if(H.isLong(e)||(e=H.fromValue(e)),o){let t=o.mul(this.low,this.high,e.low,e.high);return H.fromBits(t,o.get_high(),this.unsigned)}if(e.isZero())return H.ZERO;if(this.eq(H.MIN_VALUE))return e.isOdd()?H.MIN_VALUE:H.ZERO;if(e.eq(H.MIN_VALUE))return this.isOdd()?H.MIN_VALUE:H.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(H.TWO_PWR_24)&&e.lt(H.TWO_PWR_24))return H.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,u=65535&e.high,f=e.low>>>16,l=65535&e.low,a=0,h=0,g,c;return g=0+((c=0+i*l)>>>16),c&=65535,g+=r*l,h+=g>>>16,g&=65535,g+=i*f,h+=g>>>16,g&=65535,h+=n*l,a+=h>>>16,h&=65535,h+=r*f,a+=h>>>16,h&=65535,h+=i*u,a+=h>>>16,h&=65535,a+=t*l+n*f+r*u+i*s,a&=65535,H.fromBits(g<<16|c,a<<16|h,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(H.MIN_VALUE)?H.MIN_VALUE:this.not().add(H.ONE)}neg(){return this.negate()}not(){return H.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return H.isLong(e)||(e=H.fromValue(e)),H.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return(H.isLong(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?H.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):H.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return(H.isLong(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?H.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):H.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(H.isLong(e)&&(e=e.toInt()),0==(e&=63))return this;{let t=this.high;if(e<32){let n=this.low;return H.fromBits(n>>>e|t<<32-e,t>>>e,this.unsigned)}return 32===e?H.fromBits(t,0,this.unsigned):H.fromBits(t>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return H.isLong(e)||(e=H.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*4294967296+(this.low>>>0):4294967296*this.high+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]}toSigned(){return this.unsigned?H.fromBits(this.low,this.high,!1):this}toString(e){if((e=e||10)<2||36<e)throw new d("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(H.MIN_VALUE))return"-"+this.neg().toString(e);{let t=H.fromNumber(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}}let t=H.fromNumber(Math.pow(e,6),this.unsigned),n=this,r="";for(;;){let i=n.div(t),o=(n.sub(i.mul(t)).toInt()>>>0).toString(e);if((n=i).isZero())return o+r;for(;o.length<6;)o="0"+o;r=""+o+r}}toUnsigned(){return this.unsigned?this:H.fromBits(this.low,this.high,!0)}xor(e){return H.isLong(e)||(e=H.fromValue(e)),H.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,t){let{useBigInt64:n=!1,relaxed:r=!0}={...t};if(e.$numberLong.length>20)throw new d("$numberLong string is too long");if(!Y.test(e.$numberLong))throw new d(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n)return BigInt.asIntN(64,BigInt(e.$numberLong));let i=H.fromString(e.$numberLong);return r?i.toNumber():i}inspect(e,t,n){let r=(n??=c)(this.toString(),t),i=this.unsigned?`, ${n(this.unsigned,t)}`:"";return`new Long(${r}${i})`}}H.TWO_PWR_24=H.fromInt(16777216),H.MAX_UNSIGNED_VALUE=H.fromBits(-1,-1,!0),H.ZERO=H.fromInt(0),H.UZERO=H.fromInt(0,!0),H.ONE=H.fromInt(1),H.UONE=H.fromInt(1,!0),H.NEG_ONE=H.fromInt(-1),H.MAX_VALUE=H.fromBits(-1,2147483647,!1),H.MIN_VALUE=H.fromBits(0,-2147483648,!1);let k=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,q=/^(\+|-)?(Infinity|inf)$/i,Z=/^(\+|-)?NaN$/i,z=$.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),K=$.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),W=$.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),G=/^([-+])?(\d+)?$/;function X(e){return!isNaN(parseInt(e,10))}function Q(e,t){throw new d(`"${e}" is not a valid Decimal128 string - ${t}`)}class ee extends I{get _bsontype(){return"Decimal128"}constructor(e){if(super(),"string"==typeof e)this.bytes=ee.fromString(e).bytes;else if(e instanceof Uint8Array||f(e)){if(16!==e.byteLength)throw new d("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new d("Decimal128 must take a Buffer or string")}static fromString(e){return ee._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return ee._fromString(e,{allowRounding:!0})}static _fromString(e,t){let n=!1,r=!1,i=!1,o=!1,s=0,u=0,f=0,l=0,a=0,h=[0],g=0,c=0,b=0,p=0,m=new H(0,0),y=new H(0,0),w=0,S=0;if(e.length>=7e3)throw new d(""+e+" not a valid Decimal128 string");let B=e.match(k),E=e.match(q),N=e.match(Z);if(!B&&!E&&!N||0===e.length)throw new d(""+e+" not a valid Decimal128 string");if(B){let t=B[2],n=B[4],r=B[5],i=B[6];n&&void 0===i&&Q(e,"missing exponent power"),n&&void 0===t&&Q(e,"missing exponent base"),void 0===n&&(r||i)&&Q(e,"missing e before exponent")}if(("+"===e[S]||"-"===e[S])&&(r=!0,n="-"===e[S++]),!X(e[S])&&"."!==e[S]){if("i"===e[S]||"I"===e[S])return new ee(n?K:W);if("N"===e[S])return new ee(z)}for(;X(e[S])||"."===e[S];){if("."===e[S]){i&&Q(e,"contains multiple periods"),i=!0,S+=1;continue}g<34&&("0"!==e[S]||o)&&(o||(a=u),o=!0,h[c++]=parseInt(e[S],10),g+=1),o&&(f+=1),i&&(l+=1),u+=1,S+=1}if(i&&!u)throw new d(""+e+" not a valid Decimal128 string");if("e"===e[S]||"E"===e[S]){let t=e.substr(++S).match(G);if(!t||!t[2])return new ee(z);p=parseInt(t[0],10),S+=t[0].length}if(e[S])return new ee(z);if(g){if(b=g-1,1!==(s=f))for(;"0"===e[a+s-1+Number(r)+Number(i)];)s-=1}else h[0]=0,f=1,g=1,s=0;for(p<=l&&l>p+16384?p=-6176:p-=l;p>6111;){if((b+=1)>=34){if(0===s){p=6111;break}Q(e,"overflow")}p-=1}if(t.allowRounding){for(;p<-6176||g<f;){if(0===b&&s<g){p=-6176,s=0;break}if(g<f?f-=1:b-=1,p<6111)p+=1;else{if(h.join("").match(/^0+$/)){p=6111;break}Q(e,"overflow")}}if(b+1<s){let t=u;i&&(a+=1,t+=1),r&&(a+=1,t+=1);let o=parseInt(e[a+b+1],10),s=0;if(o>=5&&(s=1,5===o)){s=h[b]%2==1?1:0;for(let n=a+b+2;n<t;n++)if(parseInt(e[n],10)){s=1;break}}if(s){let e=b;for(;e>=0;e--)if(++h[e]>9){if(h[e]=0,0===e){if(!(p<6111))return new ee(n?K:W);p+=1,h[e]=1}}else break}}}else{for(;p<-6176||g<f;){if(0===b){if(0===s){p=-6176;break}Q(e,"exponent underflow")}g<f?("0"!==e[f-1+Number(r)+Number(i)]&&0!==s&&Q(e,"inexact rounding"),f-=1):(0!==h[b]&&Q(e,"inexact rounding"),b-=1),p<6111?p+=1:Q(e,"overflow")}b+1<s&&(i&&(a+=1),r&&(a+=1),0!==parseInt(e[a+b+1],10)&&Q(e,"inexact rounding"))}if(m=H.fromNumber(0),y=H.fromNumber(0),0===s)m=H.fromNumber(0),y=H.fromNumber(0);else if(b<17){let e=0;for(y=H.fromNumber(h[e++]),m=new H(0,0);e<=b;e++)y=(y=y.multiply(H.fromNumber(10))).add(H.fromNumber(h[e]))}else{let e=0;for(m=H.fromNumber(h[e++]);e<=b-17;e++)m=(m=m.multiply(H.fromNumber(10))).add(H.fromNumber(h[e]));for(y=H.fromNumber(h[e++]);e<=b;e++)y=(y=y.multiply(H.fromNumber(10))).add(H.fromNumber(h[e]))}let O=function(e,t){if(!e&&!t)return{high:H.fromNumber(0),low:H.fromNumber(0)};let n=e.shiftRightUnsigned(32),r=new H(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new H(t.getLowBits(),0),s=n.multiply(i),u=n.multiply(o),f=r.multiply(i),l=r.multiply(o);return s=s.add(u.shiftRightUnsigned(32)),u=new H(u.getLowBits(),0).add(f).add(l.shiftRightUnsigned(32)),{high:s=s.add(u.shiftRightUnsigned(32)),low:l=u.shiftLeft(32).add(new H(l.getLowBits(),0))}}(m,H.fromString("100000000000000000"));O.low=O.low.add(y),function(e,t){let n=e.high>>>0,r=t.high>>>0;return!!(n<r)||n===r&&!!(e.low>>>0<t.low>>>0)}(O.low,y)&&(O.high=O.high.add(H.fromNumber(1))),w=p+6176;let x={low:H.fromNumber(0),high:H.fromNumber(0)};O.high.shiftRightUnsigned(49).and(H.fromNumber(1)).equals(H.fromNumber(1))?(x.high=x.high.or(H.fromNumber(3).shiftLeft(61)),x.high=x.high.or(H.fromNumber(w).and(H.fromNumber(16383).shiftLeft(47))),x.high=x.high.or(O.high.and(H.fromNumber(0x7fffffffffff)))):(x.high=x.high.or(H.fromNumber(16383&w).shiftLeft(49)),x.high=x.high.or(O.high.and(H.fromNumber(562949953421311)))),x.low=O.low,n&&(x.high=x.high.or(H.fromString("9223372036854775808")));let _=$.allocateUnsafe(16);return S=0,_[S++]=255&x.low.low,_[S++]=x.low.low>>8&255,_[S++]=x.low.low>>16&255,_[S++]=x.low.low>>24&255,_[S++]=255&x.low.high,_[S++]=x.low.high>>8&255,_[S++]=x.low.high>>16&255,_[S++]=x.low.high>>24&255,_[S++]=255&x.high.low,_[S++]=x.high.low>>8&255,_[S++]=x.high.low>>16&255,_[S++]=x.high.low>>24&255,_[S++]=255&x.high.high,_[S++]=x.high.high>>8&255,_[S++]=x.high.high>>16&255,_[S++]=x.high.high>>24&255,new ee(_)}toString(){let e,t,n,r;let i=0,o=Array(36);for(let e=0;e<o.length;e++)o[e]=0;let s=0,u=!1,f={parts:[0,0,0,0]},l=[];s=0;let a=this.bytes,h=a[s++]|a[s++]<<8|a[s++]<<16|a[s++]<<24,g=a[s++]|a[s++]<<8|a[s++]<<16|a[s++]<<24,c=a[s++]|a[s++]<<8|a[s++]<<16|a[s++]<<24,b=a[s++]|a[s++]<<8|a[s++]<<16|a[s++]<<24;s=0,({low:new H(h,g),high:new H(c,b)}).high.lessThan(H.ZERO)&&l.push("-");let p=b>>26&31;if(p>>3==3){if(30===p)return l.join("")+"Infinity";if(31===p)return"NaN";e=b>>15&16383,t=8+(b>>14&1)}else t=b>>14&7,e=b>>17&16383;let d=e-6176;if(f.parts[0]=(16383&b)+((15&t)<<14),f.parts[1]=c,f.parts[2]=g,f.parts[3]=h,0===f.parts[0]&&0===f.parts[1]&&0===f.parts[2]&&0===f.parts[3])u=!0;else for(r=3;r>=0;r--){let e=0,t=function(e){let t=H.fromNumber(1e9),n=H.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:n};for(let r=0;r<=3;r++)n=(n=n.shiftLeft(32)).add(new H(e.parts[r],0)),e.parts[r]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}(f);if(f=t.quotient,e=t.rem.low)for(n=8;n>=0;n--)o[9*r+n]=e%10,e=Math.floor(e/10)}if(u)i=1,o[s]=0;else for(i=36;!o[s];)i-=1,s+=1;let m=i-1+d;if(m>=34||m<=-7||d>0){if(i>34)return l.push("0"),d>0?l.push(`E+${d}`):d<0&&l.push(`E${d}`),l.join("");l.push(`${o[s++]}`),(i-=1)&&l.push(".");for(let e=0;e<i;e++)l.push(`${o[s++]}`);l.push("E"),m>0?l.push(`+${m}`):l.push(`${m}`)}else if(d>=0)for(let e=0;e<i;e++)l.push(`${o[s++]}`);else{let e=i+d;if(e>0)for(let t=0;t<e;t++)l.push(`${o[s++]}`);else l.push("0");for(l.push(".");e++<0;)l.push("0");for(let t=0;t<i-Math.max(e-1,0);t++)l.push(`${o[s++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return ee.fromString(e.$numberDecimal)}inspect(e,t,n){let r=(n??=c)(this.toString(),t);return`new Decimal128(${r})`}}class et extends I{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let t=Number(e);if("NaN"===e)return new et(NaN);if("Infinity"===e)return new et(1/0);if("-Infinity"===e)return new et(-1/0);if(!Number.isFinite(t))throw new d(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new d(`Input: '${e}' contains whitespace`);if(""===e)throw new d("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new d(`Input: '${e}' is not in decimal or exponential notation`);return new et(t)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,t){let n=parseFloat(e.$numberDouble);return t&&t.relaxed?n:new et(n)}inspect(e,t,n){return n??=c,`new Double(${n(this.value,t)})`}}class en extends I{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=0|+e}static fromString(e){let t=P(e),n=Number(e);if(2147483647<n)throw new d(`Input: '${e}' is larger than the maximum value for Int32`);if(-2147483648>n)throw new d(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==t)throw new d(`Input: '${e}' is not a valid Int32 string`)}else throw new d(`Input: '${e}' is not a safe integer`);return new en(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,t){return t&&t.relaxed?parseInt(e.$numberInt,10):new en(e.$numberInt)}inspect(e,t,n){return n??=c,`new Int32(${n(this.value,t)})`}}class er extends I{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new er}inspect(){return"new MaxKey()"}}class ei extends I{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new ei}inspect(){return"new MinKey()"}}let eo=null,es=new WeakMap;class eu extends I{get _bsontype(){return"ObjectId"}constructor(e){let t;if(super(),"object"==typeof e&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new d("Argument passed in must have an id that is of type string or Buffer");t="toHexString"in e&&"function"==typeof e.toHexString?$.fromHex(e.toHexString()):e.id}else t=e;if(null==t||"number"==typeof t)this.buffer=eu.generate("number"==typeof t?t:void 0);else if(ArrayBuffer.isView(t)&&12===t.byteLength)this.buffer=$.toLocalBufferType(t);else if("string"==typeof t){if(eu.validateHexString(t))this.buffer=$.fromHex(t),eu.cacheHexString&&es.set(this,t);else throw new d("input must be a 24 character hex string, 12 byte Uint8Array, or an integer")}else throw new d("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,eu.cacheHexString&&es.set(this,$.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let t=0;t<24;t++){let n=e.charCodeAt(t);if((!(n>=48)||!(n<=57))&&(!(n>=97)||!(n<=102))&&(!(n>=65)||!(n<=70)))return!1}return!0}toHexString(){if(eu.cacheHexString){let e=es.get(this);if(e)return e}let e=$.toHex(this.id);return eu.cacheHexString&&es.set(this,e),e}static getInc(){return eu.index=(eu.index+1)%16777215}static generate(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));let t=eu.getInc(),n=$.allocateUnsafe(12);return v.setInt32BE(n,0,e),null===eo&&(eo=$.randomBytes(5)),n[4]=eo[0],n[5]=eo[1],n[6]=eo[2],n[7]=eo[3],n[8]=eo[4],n[11]=255&t,n[10]=t>>8&255,n[9]=t>>16&255,n}toString(e){return"base64"===e?$.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}static is(e){return null!=e&&"object"==typeof e&&"_bsontype"in e&&"ObjectId"===e._bsontype}equals(e){if(null==e)return!1;if(eu.is(e))return this.buffer[11]===e.buffer[11]&&$.equals(this.buffer,e.buffer);if("string"==typeof e)return e.toLowerCase()===this.toHexString();if("object"==typeof e&&"function"==typeof e.toHexString){let t=e.toHexString(),n=this.toHexString();return"string"==typeof t&&t.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,t=v.getUint32BE(this.buffer,0);return e.setTime(1e3*Math.floor(t)),e}static createPk(){return new eu}serializeInto(e,t){return e[t]=this.buffer[0],e[t+1]=this.buffer[1],e[t+2]=this.buffer[2],e[t+3]=this.buffer[3],e[t+4]=this.buffer[4],e[t+5]=this.buffer[5],e[t+6]=this.buffer[6],e[t+7]=this.buffer[7],e[t+8]=this.buffer[8],e[t+9]=this.buffer[9],e[t+10]=this.buffer[10],e[t+11]=this.buffer[11],12}static createFromTime(e){let t=$.allocate(12);for(let e=11;e>=4;e--)t[e]=0;return v.setInt32BE(t,0,e),new eu(t)}static createFromHexString(e){if(e?.length!==24)throw new d("hex string must be 24 characters");return new eu($.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new d("base64 string must be 16 characters");return new eu($.fromBase64(e))}static isValid(e){if(null==e)return!1;if("string"==typeof e)return eu.validateHexString(e);try{return new eu(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new eu(e.$oid)}isCached(){return eu.cacheHexString&&es.has(this)}inspect(e,t,n){return n??=c,`new ObjectId(${n(this.toHexString(),t)})`}}function ef(e,t,n){let r=5;if(Array.isArray(e))for(let i=0;i<e.length;i++)r+=el(i.toString(),e[i],t,!0,n);else for(let i of("function"==typeof e?.toBSON&&(e=e.toBSON()),Object.keys(e)))r+=el(i,e[i],t,!1,n);return r}function el(e,t,n=!1,r=!1,i=!1){switch("function"==typeof t?.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+$.utf8ByteLength(e)+1+4+$.utf8ByteLength(t)+1;case"number":if(Math.floor(t)!==t||!(t>=-9007199254740992)||!(t<=9007199254740992))return(null!=e?$.utf8ByteLength(e)+1:0)+9;if(t>=-2147483648&&t<=2147483647)return(null!=e?$.utf8ByteLength(e)+1:0)+5;return(null!=e?$.utf8ByteLength(e)+1:0)+9;case"undefined":if(r||!i)return(null!=e?$.utf8ByteLength(e)+1:0)+1;return 0;case"boolean":return(null!=e?$.utf8ByteLength(e)+1:0)+2;case"object":if(null!=t&&"string"==typeof t._bsontype&&6!==t[b])throw new m;if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?$.utf8ByteLength(e)+1:0)+1;if("ObjectId"===t._bsontype)return(null!=e?$.utf8ByteLength(e)+1:0)+13;if(t instanceof Date||g(t))return(null!=e?$.utf8ByteLength(e)+1:0)+9;else if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer||l(t))return(null!=e?$.utf8ByteLength(e)+1:0)+6+t.byteLength;else if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?$.utf8ByteLength(e)+1:0)+9;else if("Decimal128"===t._bsontype)return(null!=e?$.utf8ByteLength(e)+1:0)+17;else if("Code"===t._bsontype){if(null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?$.utf8ByteLength(e)+1:0)+1+4+4+$.utf8ByteLength(t.code.toString())+1+ef(t.scope,n,i);return(null!=e?$.utf8ByteLength(e)+1:0)+1+4+$.utf8ByteLength(t.code.toString())+1}else if("Binary"===t._bsontype){let n=t;if(n.sub_type===A.SUBTYPE_BYTE_ARRAY)return(null!=e?$.utf8ByteLength(e)+1:0)+(n.position+1+4+1+4);return(null!=e?$.utf8ByteLength(e)+1:0)+(n.position+1+4+1)}else if("Symbol"===t._bsontype)return(null!=e?$.utf8ByteLength(e)+1:0)+$.utf8ByteLength(t.value)+4+1+1;else if("DBRef"===t._bsontype){let r=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(r.$db=t.db),(null!=e?$.utf8ByteLength(e)+1:0)+1+ef(r,n,i)}else if(t instanceof RegExp||a(t))return(null!=e?$.utf8ByteLength(e)+1:0)+1+$.utf8ByteLength(t.source)+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;else if("BSONRegExp"===t._bsontype)return(null!=e?$.utf8ByteLength(e)+1:0)+1+$.utf8ByteLength(t.pattern)+1+$.utf8ByteLength(t.options)+1;else return(null!=e?$.utf8ByteLength(e)+1:0)+ef(t,n,i)+1;case"function":if(n)return(null!=e?$.utf8ByteLength(e)+1:0)+1+4+$.utf8ByteLength(t.toString())+1;return 0;case"bigint":return(null!=e?$.utf8ByteLength(e)+1:0)+9;case"symbol":return 0;default:throw new d(`Unrecognized JS type: ${typeof t}`)}}eu.index=Math.floor(16777215*Math.random());class ea extends I{get _bsontype(){return"BSONRegExp"}constructor(e,t){if(super(),this.pattern=e,this.options=(t??"").split("").sort().join(""),-1!==this.pattern.indexOf("\0"))throw new d(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(-1!==this.options.indexOf("\0"))throw new d(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let e=0;e<this.options.length;e++)if(!("i"===this.options[e]||"m"===this.options[e]||"x"===this.options[e]||"l"===this.options[e]||"s"===this.options[e]||"u"===this.options[e]))throw new d(`The regular expression option [${this.options[e]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e){if("string"==typeof e.$regex)return new ea(e.$regex,ea.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new ea(e.$regularExpression.pattern,ea.parseOptions(e.$regularExpression.options));throw new d(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,t,n){let r=function(e){if(null!=e&&"object"==typeof e&&"stylize"in e&&"function"==typeof e.stylize)return e.stylize}(t)??(e=>e),i=r((n??=c)(this.pattern),"regexp"),o=r(n(this.options),"regexp");return`new BSONRegExp(${i}, ${o})`}}class eh extends I{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new eh(e.$symbol)}inspect(e,t,n){return n??=c,`new BSONSymbol(${n(this.value,t)})`}}let eg=H;class ec extends eg{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(null==e)super(0,0,!0);else if("bigint"==typeof e)super(e,!0);else if(H.isLong(e))super(e.low,e.high,!0);else if("object"==typeof e&&"t"in e&&"i"in e){if("number"!=typeof e.t&&("object"!=typeof e.t||"Int32"!==e.t._bsontype))throw new d("Timestamp constructed from { t, i } must provide t as a number");if("number"!=typeof e.i&&("object"!=typeof e.i||"Int32"!==e.i._bsontype))throw new d("Timestamp constructed from { t, i } must provide i as a number");let t=Number(e.t),n=Number(e.i);if(t<0||Number.isNaN(t))throw new d("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new d("Timestamp constructed from { t, i } must provide a positive i");if(t>4294967295)throw new d("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new d("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,t,!0)}else throw new d("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new ec(H.fromInt(e,!0))}static fromNumber(e){return new ec(H.fromNumber(e,!0))}static fromBits(e,t){return new ec({i:e,t:t})}static fromString(e,t){return new ec(H.fromString(e,!0,t))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let t=H.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i;return new ec({t:H.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t,i:t})}inspect(e,t,n){let r=(n??=c)(this.t,t),i=n(this.i,t);return`new Timestamp({ t: ${r}, i: ${i} })`}}ec.MAX_VALUE=H.MAX_UNSIGNED_VALUE,H.fromNumber(9007199254740992),H.fromNumber(-9007199254740992);let eb=/\x00/,ep=new Set(["$db","$ref","$id","$clusterTime"]);function ed(e,t,n,r){e[r++]=2;let i=$.encodeUTF8Into(e,t,r);e[(r=r+i+1)-1]=0;let o=$.encodeUTF8Into(e,n,r+4);return v.setInt32LE(e,r,o+1),r=r+4+o,e[r++]=0,r}function em(e,t,n,r){let i=!Object.is(n,-0)&&Number.isSafeInteger(n)&&n<=2147483647&&n>=-2147483648?16:1;e[r++]=i;let o=$.encodeUTF8Into(e,t,r);return r+=o,e[r++]=0,16===i?r+=v.setInt32LE(e,r,n):r+=v.setFloat64LE(e,r,n),r}function ey(e,t,n,r){e[r++]=18;let i=$.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r+=v.setBigInt64LE(e,r,n)}function ew(e,t,n,r){e[r++]=10;let i=$.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r}function eS(e,t,n,r){e[r++]=8;let i=$.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,e[r++]=n?1:0,r}function eB(e,t,n,r){e[r++]=9;let i=$.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=H.fromNumber(n.getTime()),s=o.getLowBits(),u=o.getHighBits();return r+=v.setInt32LE(e,r,s),r+=v.setInt32LE(e,r,u)}function eE(e,t,n,r){e[r++]=11;let i=$.encodeUTF8Into(e,t,r);if(r+=i,e[r++]=0,n.source&&null!=n.source.match(eb))throw new d("value "+n.source+" must not contain null bytes");return r+=$.encodeUTF8Into(e,n.source,r),e[r++]=0,n.ignoreCase&&(e[r++]=105),n.global&&(e[r++]=115),n.multiline&&(e[r++]=109),e[r++]=0,r}function eN(e,t,n,r){e[r++]=11;let i=$.encodeUTF8Into(e,t,r);if(r+=i,e[r++]=0,null!=n.pattern.match(eb))throw new d("pattern "+n.pattern+" must not contain null bytes");r+=$.encodeUTF8Into(e,n.pattern,r),e[r++]=0;let o=n.options.split("").sort().join("");return r+=$.encodeUTF8Into(e,o,r),e[r++]=0,r}function eO(e,t,n,r){null===n?e[r++]=10:"MinKey"===n._bsontype?e[r++]=255:e[r++]=127;let i=$.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r}function ex(e,t,n,r){e[r++]=7;let i=$.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r+=n.serializeInto(e,r)}function e_(e,t,n,r){e[r++]=5;let i=$.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.length;if(r+=v.setInt32LE(e,r,o),e[r++]=0,o<=16)for(let t=0;t<o;t++)e[r+t]=n[t];else e.set(n,r);return r+o}function e$(e,t,n,r,i,o,s,u,f){if(f.has(n))throw new d("Cannot convert circular structure to BSON");f.add(n),e[r++]=Array.isArray(n)?4:3;let l=$.encodeUTF8Into(e,t,r);r+=l,e[r++]=0;let a=eD(e,n,i,r,o+1,s,u,f);return f.delete(n),a}function eI(e,t,n,r){e[r++]=19;let i=$.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;for(let t=0;t<16;t++)e[r+t]=n.bytes[t];return r+16}function eU(e,t,n,r){e[r++]="Long"===n._bsontype?18:17;let i=$.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.getLowBits(),s=n.getHighBits();return r+=v.setInt32LE(e,r,o),r+=v.setInt32LE(e,r,s)}function eT(e,t,n,r){n=n.valueOf(),e[r++]=16;let i=$.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r+=v.setInt32LE(e,r,n)}function eL(e,t,n,r){e[r++]=1;let i=$.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r+=v.setFloat64LE(e,r,n.value)}function ev(e,t,n,r){e[r++]=13;let i=$.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.toString(),s=$.encodeUTF8Into(e,o,r+4)+1;return v.setInt32LE(e,r,s),r=r+4+s-1,e[r++]=0,r}function eA(e,t,n,r,i=!1,o=0,s=!1,u=!0,f){if(n.scope&&"object"==typeof n.scope){e[r++]=15;let l=$.encodeUTF8Into(e,t,r);r+=l,e[r++]=0;let a=r,h=n.code;r+=4;let g=$.encodeUTF8Into(e,h,r+4)+1;v.setInt32LE(e,r,g),e[r+4+g-1]=0,r=r+g+4;let c=eD(e,n.scope,i,r,o+1,s,u,f);r=c-1;let b=c-a;a+=v.setInt32LE(e,a,b),e[r++]=0}else{e[r++]=13;let i=$.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.code.toString(),s=$.encodeUTF8Into(e,o,r+4)+1;v.setInt32LE(e,r,s),r=r+4+s-1,e[r++]=0}return r}function ej(e,t,n,r){e[r++]=5;let i=$.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.buffer,s=n.position;if(n.sub_type===A.SUBTYPE_BYTE_ARRAY&&(s+=4),r+=v.setInt32LE(e,r,s),e[r++]=n.sub_type,n.sub_type===A.SUBTYPE_BYTE_ARRAY&&(s-=4,r+=v.setInt32LE(e,r,s)),n.sub_type===A.SUBTYPE_VECTOR&&j(n),s<=16)for(let t=0;t<s;t++)e[r+t]=o[t];else e.set(o,r);return r+n.position}function eR(e,t,n,r){e[r++]=14;let i=$.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=$.encodeUTF8Into(e,n.value,r+4)+1;return v.setInt32LE(e,r,o),r=r+4+o-1,e[r++]=0,r}function eF(e,t,n,r,i,o,s){e[r++]=3;let u=$.encodeUTF8Into(e,t,r);r+=u,e[r++]=0;let f=r,l={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(l.$db=n.db);let a=eD(e,l=Object.assign(l,n.fields),!1,r,i+1,o,!0,s),h=a-f;return f+=v.setInt32LE(e,r,h),a}function eD(e,t,n,r,i,o,s,u){if(null==u){if(null==t)return e[0]=5,e[1]=0,e[2]=0,e[3]=0,e[4]=0,5;if(Array.isArray(t))throw new d("serialize does not support an array as the root input");if("object"!=typeof t)throw new d("serialize does not support non-object as the root input");if("_bsontype"in t&&"string"==typeof t._bsontype)throw new d("BSON types cannot be serialized as a document");if(g(t)||a(t)||f(t)||l(t))throw new d("date, regexp, typedarray, and arraybuffer cannot be BSON documents");u=new Set}u.add(t);let c=r+4;if(Array.isArray(t))for(let r=0;r<t.length;r++){let l=`${r}`,h=t[r];"function"==typeof h?.toBSON&&(h=h.toBSON());let p=typeof h;if(void 0===h)c=ew(e,l,h,c);else if(null===h)c=ew(e,l,h,c);else if("string"===p)c=ed(e,l,h,c);else if("number"===p)c=em(e,l,h,c);else if("bigint"===p)c=ey(e,l,h,c);else if("boolean"===p)c=eS(e,l,h,c);else if("object"===p&&null==h._bsontype)h instanceof Date||g(h)?c=eB(e,l,h,c):h instanceof Uint8Array||f(h)?c=e_(e,l,h,c):c=h instanceof RegExp||a(h)?eE(e,l,h,c):e$(e,l,h,c,n,i,o,s,u);else if("object"===p){if(6!==h[b])throw new m;if("ObjectId"===h._bsontype)c=ex(e,l,h,c);else if("Decimal128"===h._bsontype)c=eI(e,l,h,c);else if("Long"===h._bsontype||"Timestamp"===h._bsontype)c=eU(e,l,h,c);else if("Double"===h._bsontype)c=eL(e,l,h,c);else if("Code"===h._bsontype)c=eA(e,l,h,c,n,i,o,s,u);else if("Binary"===h._bsontype)c=ej(e,l,h,c);else if("BSONSymbol"===h._bsontype)c=eR(e,l,h,c);else if("DBRef"===h._bsontype)c=eF(e,l,h,c,i,o,u);else if("BSONRegExp"===h._bsontype)c=eN(e,l,h,c);else if("Int32"===h._bsontype)c=eT(e,l,h,c);else if("MinKey"===h._bsontype||"MaxKey"===h._bsontype)c=eO(e,l,h,c);else if(void 0!==h._bsontype)throw new d(`Unrecognized or invalid _bsontype: ${String(h._bsontype)}`)}else"function"===p&&o&&(c=ev(e,l,h,c))}else if(t instanceof Map||h(t)){let r=t.entries(),l=!1;for(;!l;){let t=r.next();if(l=!!t.done)continue;let h=t.value?t.value[0]:void 0,p=t.value?t.value[1]:void 0;"function"==typeof p?.toBSON&&(p=p.toBSON());let y=typeof p;if("string"==typeof h&&!ep.has(h)){if(null!=h.match(eb))throw new d("key "+h+" must not contain null bytes");if(n){if("$"===h[0])throw new d("key "+h+" must not start with '$'");if(h.includes("."))throw new d("key "+h+" must not contain '.'")}}if(void 0===p)!1===s&&(c=ew(e,h,p,c));else if(null===p)c=ew(e,h,p,c);else if("string"===y)c=ed(e,h,p,c);else if("number"===y)c=em(e,h,p,c);else if("bigint"===y)c=ey(e,h,p,c);else if("boolean"===y)c=eS(e,h,p,c);else if("object"===y&&null==p._bsontype)p instanceof Date||g(p)?c=eB(e,h,p,c):p instanceof Uint8Array||f(p)?c=e_(e,h,p,c):c=p instanceof RegExp||a(p)?eE(e,h,p,c):e$(e,h,p,c,n,i,o,s,u);else if("object"===y){if(6!==p[b])throw new m;if("ObjectId"===p._bsontype)c=ex(e,h,p,c);else if("Decimal128"===p._bsontype)c=eI(e,h,p,c);else if("Long"===p._bsontype||"Timestamp"===p._bsontype)c=eU(e,h,p,c);else if("Double"===p._bsontype)c=eL(e,h,p,c);else if("Code"===p._bsontype)c=eA(e,h,p,c,n,i,o,s,u);else if("Binary"===p._bsontype)c=ej(e,h,p,c);else if("BSONSymbol"===p._bsontype)c=eR(e,h,p,c);else if("DBRef"===p._bsontype)c=eF(e,h,p,c,i,o,u);else if("BSONRegExp"===p._bsontype)c=eN(e,h,p,c);else if("Int32"===p._bsontype)c=eT(e,h,p,c);else if("MinKey"===p._bsontype||"MaxKey"===p._bsontype)c=eO(e,h,p,c);else if(void 0!==p._bsontype)throw new d(`Unrecognized or invalid _bsontype: ${String(p._bsontype)}`)}else"function"===y&&o&&(c=ev(e,h,p,c))}}else{if("function"==typeof t?.toBSON&&null!=(t=t.toBSON())&&"object"!=typeof t)throw new d("toBSON function did not return an object");for(let r of Object.keys(t)){let l=t[r];"function"==typeof l?.toBSON&&(l=l.toBSON());let h=typeof l;if("string"==typeof r&&!ep.has(r)){if(null!=r.match(eb))throw new d("key "+r+" must not contain null bytes");if(n){if("$"===r[0])throw new d("key "+r+" must not start with '$'");if(r.includes("."))throw new d("key "+r+" must not contain '.'")}}if(void 0===l)!1===s&&(c=ew(e,r,l,c));else if(null===l)c=ew(e,r,l,c);else if("string"===h)c=ed(e,r,l,c);else if("number"===h)c=em(e,r,l,c);else if("bigint"===h)c=ey(e,r,l,c);else if("boolean"===h)c=eS(e,r,l,c);else if("object"===h&&null==l._bsontype)l instanceof Date||g(l)?c=eB(e,r,l,c):l instanceof Uint8Array||f(l)?c=e_(e,r,l,c):c=l instanceof RegExp||a(l)?eE(e,r,l,c):e$(e,r,l,c,n,i,o,s,u);else if("object"===h){if(6!==l[b])throw new m;if("ObjectId"===l._bsontype)c=ex(e,r,l,c);else if("Decimal128"===l._bsontype)c=eI(e,r,l,c);else if("Long"===l._bsontype||"Timestamp"===l._bsontype)c=eU(e,r,l,c);else if("Double"===l._bsontype)c=eL(e,r,l,c);else if("Code"===l._bsontype)c=eA(e,r,l,c,n,i,o,s,u);else if("Binary"===l._bsontype)c=ej(e,r,l,c);else if("BSONSymbol"===l._bsontype)c=eR(e,r,l,c);else if("DBRef"===l._bsontype)c=eF(e,r,l,c,i,o,u);else if("BSONRegExp"===l._bsontype)c=eN(e,r,l,c);else if("Int32"===l._bsontype)c=eT(e,r,l,c);else if("MinKey"===l._bsontype||"MaxKey"===l._bsontype)c=eO(e,r,l,c);else if(void 0!==l._bsontype)throw new d(`Unrecognized or invalid _bsontype: ${String(l._bsontype)}`)}else"function"===h&&o&&(c=ev(e,r,l,c))}}u.delete(t),e[c++]=0;let p=c-r;return r+=v.setInt32LE(e,r,p),c}let eV={$oid:eu,$binary:A,$uuid:A,$symbol:eh,$numberInt:en,$numberDecimal:ee,$numberDouble:et,$numberLong:H,$minKey:ei,$maxKey:er,$regex:ea,$regularExpression:ea,$timestamp:ec};function eC(e){let t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}let eP={Binary:e=>new A(e.value(),e.sub_type),Code:e=>new V(e.code,e.scope),DBRef:e=>new C(e.collection||e.namespace,e.oid,e.db,e.fields),Decimal128:e=>new ee(e.bytes),Double:e=>new et(e.value),Int32:e=>new en(e.value),Long:e=>H.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_),MaxKey:()=>new er,MinKey:()=>new ei,ObjectId:e=>new eu(e),BSONRegExp:e=>new ea(e.pattern,e.options),BSONSymbol:e=>new eh(e.value),Timestamp:e=>ec.fromBits(e.low,e.high)};function eM(e,t){let n={useBigInt64:t?.useBigInt64??!1,relaxed:t?.relaxed??!0,legacy:t?.legacy??!1};return JSON.parse(e,(e,t)=>{if(-1!==e.indexOf("\0"))throw new d(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(e)}`);return function e(t,n={}){var r;if("number"==typeof t){let e=t<=2147483647&&t>=-2147483648,r=t<=p&&t>=-0x8000000000000000;if(n.relaxed||n.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(e)return new en(t);if(r)return n.useBigInt64?BigInt(t):H.fromNumber(t)}return new et(t)}if(null==t||"object"!=typeof t)return t;if(t.$undefined)return null;let i=Object.keys(t).filter(e=>e.startsWith("$")&&null!=t[e]);for(let e=0;e<i.length;e++){let r=eV[i[e]];if(r)return r.fromExtendedJSON(t,n)}if(null!=t.$date){let e=t.$date,r=new Date;if(n.legacy){if("number"==typeof e)r.setTime(e);else if("string"==typeof e)r.setTime(Date.parse(e));else if("bigint"==typeof e)r.setTime(Number(e));else throw new y(`Unrecognized type for EJSON date: ${typeof e}`)}else if("string"==typeof e)r.setTime(Date.parse(e));else if(H.isLong(e))r.setTime(e.toNumber());else if("number"==typeof e&&n.relaxed)r.setTime(e);else if("bigint"==typeof e)r.setTime(Number(e));else throw new y(`Unrecognized type for EJSON date: ${typeof e}`);return r}if(null!=t.$code){let n=Object.assign({},t);return t.$scope&&(n.$scope=e(t.$scope)),V.fromExtendedJSON(t)}if(null!=(r=t)&&"object"==typeof r&&"$id"in r&&null!=r.$id&&"$ref"in r&&"string"==typeof r.$ref&&(!("$db"in r)||"$db"in r&&"string"==typeof r.$db)||t.$dbPointer){let e=t.$ref?t:t.$dbPointer;if(e instanceof C)return e;let n=Object.keys(e).filter(e=>e.startsWith("$")),r=!0;if(n.forEach(e=>{-1===["$ref","$id","$db"].indexOf(e)&&(r=!1)}),r)return C.fromExtendedJSON(e)}return t}(t,n)})}function eJ(e,t,n,r){return null!=n&&"object"==typeof n&&(r=n,n=0),null==t||"object"!=typeof t||Array.isArray(t)||(r=t,t=void 0,n=0),JSON.stringify(function e(t,n){if(t instanceof Map||h(t)){let r=Object.create(null);for(let[e,n]of t){if("string"!=typeof e)throw new d("Can only serialize maps with string keys");r[e]=n}return e(r,n)}if(("object"==typeof t||"function"==typeof t)&&null!==t){let e=n.seenObjects.findIndex(e=>e.obj===t);if(-1!==e){let t=n.seenObjects.map(e=>e.propertyName),r=t.slice(0,e).map(e=>`${e} -> `).join(""),i=t[e],o=" -> "+t.slice(e+1,t.length-1).map(e=>`${e} -> `).join(""),s=t[t.length-1],u=" ".repeat(r.length+i.length/2),f="-".repeat(o.length+(i.length+s.length)/2-1);throw new d(`Converting circular structure to EJSON:
    ${r}${i}${o}${s}
    ${u}\\${f}/`)}n.seenObjects[n.seenObjects.length-1].obj=t}if(Array.isArray(t))return t.map((t,r)=>{n.seenObjects.push({propertyName:`index ${r}`,obj:null});try{return e(t,n)}finally{n.seenObjects.pop()}});if(void 0===t)return null;if(t instanceof Date||g(t)){let e=t.getTime(),r=e>-1&&e<2534023188e5;return n.legacy?n.relaxed&&r?{$date:t.getTime()}:{$date:eC(t)}:n.relaxed&&r?{$date:eC(t)}:{$date:{$numberLong:t.getTime().toString()}}}if("number"==typeof t&&(!n.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=-2147483648&&t<=2147483647)return{$numberInt:t.toString()};if(t>=-0x8000000000000000&&t<=p)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if("bigint"==typeof t)return n.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||a(t)){let e=t.flags;if(void 0===e){let n=t.toString().match(/[gimuy]*$/);n&&(e=n[0])}return new ea(t.source,e).toExtendedJSON(n)}return null!=t&&"object"==typeof t?function(t,n){if(null==t||"object"!=typeof t)throw new d("not an object instance");let r=t._bsontype;if(void 0===r){let r={};for(let i of Object.keys(t)){n.seenObjects.push({propertyName:i,obj:null});try{let o=e(t[i],n);"__proto__"===i?Object.defineProperty(r,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):r[i]=o}finally{n.seenObjects.pop()}}return r}if(null!=t&&"object"==typeof t&&"string"==typeof t._bsontype&&6!==t[b])throw new m;if(null!=t&&"object"==typeof t&&"_bsontype"in t&&"string"==typeof t._bsontype){let i=t;if("function"!=typeof i.toExtendedJSON){let e=eP[t._bsontype];if(!e)throw new d("Unrecognized or invalid _bsontype: "+t._bsontype);i=e(i)}return"Code"===r&&i.scope?i=new V(i.code,e(i.scope,n)):"DBRef"===r&&i.oid&&(i=new C(e(i.collection,n),e(i.oid,n),e(i.db,n),e(i.fields,n))),i.toExtendedJSON(n)}throw new d("_bsontype must be a string, but was: "+typeof r)}(t,n):t}(e,Object.assign({relaxed:!0,legacy:!1},r,{seenObjects:[{propertyName:"(root)",obj:null}]})),t,n)}let eY=Object.create(null);eY.parse=eM,eY.stringify=eJ,eY.serialize=function(e,t){return JSON.parse(eJ(e,t=t||{}))},eY.deserialize=function(e,t){return t=t||{},eM(JSON.stringify(e),t)},Object.freeze(eY);let eH={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function ek(e,t){try{return v.getNonnegativeInt32LE(e,t)}catch(e){throw new w("BSON size cannot be negative",t,{cause:e})}}function eq(e,t){let n=t;for(;0!==e[n];n++);if(n===e.length-1)throw new w("Null terminator not found",t);return n}let eZ=Object.create(null);eZ.parseToElements=function(e,t=0){if(t??=0,e.length<5)throw new w(`Input must be at least 5 bytes, got ${e.length} bytes`,t);let n=ek(e,t);if(n>e.length-t)throw new w(`Parsed documentSize (${n} bytes) does not match input length (${e.length} bytes)`,t);if(0!==e[t+n-1])throw new w("BSON documents must end in 0x00",t+n);let r=[],i=t+4;for(;i<=n+t;){let o;let s=e[i];if(i+=1,0===s){if(i-t!==n)throw new w("Invalid 0x00 type byte",i);break}let u=i,f=eq(e,i)-u;if(i+=f+1,s===eH.double||s===eH.long||s===eH.date||s===eH.timestamp)o=8;else if(s===eH.int)o=4;else if(s===eH.objectId)o=12;else if(s===eH.decimal)o=16;else if(s===eH.bool)o=1;else if(s===eH.null||s===eH.undefined||s===eH.maxKey||s===eH.minKey)o=0;else if(s===eH.regex)o=eq(e,eq(e,i)+1)+1-i;else if(s===eH.object||s===eH.array||s===eH.javascriptWithScope)o=ek(e,i);else if(s===eH.string||s===eH.binData||s===eH.dbPointer||s===eH.javascript||s===eH.symbol)o=ek(e,i)+4,s===eH.binData&&(o+=1),s===eH.dbPointer&&(o+=12);else throw new w(`Invalid 0x${s.toString(16).padStart(2,"0")} type byte`,i);if(o>n)throw new w("value reports length larger than document",i);r.push([s,u,f,i,o]),i+=o}return r},eZ.ByteUtils=$,eZ.NumberUtils=v,Object.freeze(eZ),$.allocate(17825792)}}]);