(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9911,52],{35194:function(e,t,n){"use strict";n.d(t,{EI:function(){return s},Pd:function(){return l},iA:function(){return o},kY:function(){return a}});var i=n(16287),r=n(47409);let s=()=>(0,i.G0)("/client/products/category/tree"),a=()=>i.ZP.get("/api/global/customizations?keys=material&language=en").then(e=>e.data),l=e=>{let t=e?"?".concat((0,r.FJ)({country_code:e})):"";return i.ZP.get("/api/global/delivery_timeline".concat(t)).then(e=>e.data)},o=()=>i.ZP.get("api/global/state_abbreviations").then(e=>e.data)},74847:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(27573),r=n(48296);n(7653);var s=n(80733);function a(e){let{menuContent:t,children:n,onOpenChange:a,open:l,menuOutline:o,menuClassName:c,menuContentClassName:u,triggerClassName:d}=e;o=null==o||o;let h=(0,i.jsx)("div",{className:(0,s.cn)("rounded-2xl bg-white",c),children:t});return(0,i.jsx)(r.L,{menuContentClassName:(0,s.cn)("rounded-none shadow-none outline-none border-none rounded-3xl bg-[#EBEBEB]/[0.88]",o?"p-2":"backdrop-blur-[20px]",u),menuContent:h,className:(0,s.cn)("shadow-none",d),onOpenChange:a||(()=>{}),open:l,modal:!1,children:n})}},42997:function(e,t,n){"use strict";n.d(t,{PortalAgent:function(){return tn}});var i,r,s,a,l=n(27573),o=n(44087),c=n(10124),u=n(7653);let d=[/\/checkout\//,/\/export\//];var h=n(38260),m=n(40164),f=n(49018),g=n(98582),x=n(61027),p=n(16727),v=n(46575),y=n(44665),j=n(72108);function b(){let{chats:e,isLoading:t,isLoadingMore:n,hasNextPage:i,error:r,deleteChat:s,refresh:a,setLoadingElement:l,isValidating:o}=function(){var e;let{anonymous_info:t,user_info:n}=(0,x.xu)(),{isOpen:i}=(0,p.E)(),r=(0,u.useMemo)(()=>(null==n?void 0:n.email)?"user-".concat(n.email):(null==t?void 0:t.odin_id)&&(null==t?void 0:t.bruce)?"anonymous-".concat(t.odin_id,"-").concat(t.bruce):"no-auth",[null==n?void 0:n.email,null==t?void 0:t.odin_id,null==t?void 0:t.bruce]),{data:s,size:a,setSize:l,isLoading:o,error:c,isValidating:d,mutate:h}=(0,y.ZP)((e,t)=>{if(0===e)return"chat-list-first-".concat(r);if(!t||!t.data||0===t.data.length)return null;let n=t.data[t.data.length-1],i=(null==n?void 0:n.cursor)||"";return i?"chat-list-".concat(i,"-").concat(r):null},e=>{if(e.startsWith("chat-list-first-"))return(0,g.Ag)({size:20});let t=e.split("-").slice(2,-1).join("-")||"";return(0,g.Ag)({cursor:t,size:20})},{revalidateOnFocus:!0,revalidateOnReconnect:!1,refreshInterval:i?5e3:0}),m=(0,u.useMemo)(()=>s?s.flatMap(e=>e.data):[],[s]),f=s&&(null===(e=s[s.length-1])||void 0===e?void 0:e.data.length)===20,b=d&&a>1,w=(0,u.useCallback)(()=>{!d&&f&&l(e=>e+1)},[l,d,f]),N=(0,j.e5)({threshold:.1},w);return{chats:m,isLoading:o,isLoadingMore:b,hasNextPage:f,error:c,deleteChat:(0,u.useCallback)(async e=>{try{return await (0,g.GO)(e),await (0,v.JG)(e=>"string"==typeof e&&e.startsWith("chat-list"),void 0,{revalidate:!0}),Promise.resolve()}catch(e){return Promise.reject(e)}},[]),refresh:h,setLoadingElement:N,isValidating:d}}();return{chats:e,isLoading:t,isLoadingMore:n,hasNextPage:i,totalCount:e.length,error:r,deleteChat:s,refresh:a,setLoadingElement:l,isValidating:o}}var w=n(39518),N=n(74769),k=n(82296),C=n(80733),E=n(74847),A=n(39747),T=n(2216),D=n(46161),_=n.n(D),M=n(5480),S=n.n(M),B=n(11054),I=n.n(B),F=n(36067),R=n.n(F);function P(e){let t=_()(e),n=_()();return t.isToday()?"Today, ".concat(t.format("hh:mm a")):t.isYesterday()?"Yesterday, ".concat(t.format("hh:mm a")):t.year()===n.year()?t.format("MMM DD, hh:mm a"):t.format("MMM DD YYYY, hh:mm a")}_().extend(I()),_().extend(R()),_().extend(S());var z=n(64072),L=n(54034);function H(e){let{isOpen:t,onClose:n,onConfirm:i,isLoading:r=!1}=e;return(0,l.jsxs)(L.u,{open:t,onClose:n,className:"w-[436px] rounded-[20px]",children:[(0,l.jsx)(L.u.Header,{children:(0,l.jsx)("h3",{className:"ui-text-lg ui-font-medium ui-text-gray-900",children:"Are you sure you want to delete this conversation?"})}),(0,l.jsx)(L.u.Content,{children:(0,l.jsx)("p",{className:"ui-text-sm ui-text-gray-500",children:"This will permanently delete this chat and all its contents."})}),(0,l.jsxs)(L.u.Footer,{className:"ui-gap-3",children:[(0,l.jsx)(z.z,{variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),(0,l.jsx)(z.z,{variant:"danger",onClick:i,disabled:r,children:r?"Deleting...":"Yes, delete"})]})]})}function O(e){var t;let{chat:n,onDelete:i}=e,[r,s]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[c,d]=(0,u.useState)(!1),[h,m]=(0,u.useState)(!1),{switchToChat:f,setCurrentChatId:g,setMenuOpen:x}=(0,p.E)(),{refresh:v}=b(),y=()=>{s(!0),d(!1)},j=async()=>{try{o(!0),await i(n.id),s(!1),v()}catch(e){}finally{o(!1)}},w=(0,l.jsx)("div",{className:"w-[186px] p-4 text-left",children:(0,l.jsx)("div",{className:"w-full cursor-pointer justify-start text-base font-normal text-[#0D0D2B]",onClick:e=>{e.stopPropagation(),y()},children:"Delete"})}),N=n.unread_count>0,k=h||c;return(0,l.jsxs)("div",{className:"h-14 px-[6px] py-1",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,l.jsxs)("div",{className:"flex h-full w-full cursor-pointer items-center gap-1 rounded-lg px-3  text-left transition-colors hover:bg-gray-200/50",onClick:()=>{g(n.id),f(),x(!1)},children:[(0,l.jsxs)(T.kC,{flexDirection:"column",className:"min-w-0 flex-1",children:[(0,l.jsx)(A.S,{messageInfo:n.title||"New Chat",contentClassName:"z-[9999999]",onClick:e=>{e.stopPropagation()},useModalInMobile:!1,children:(0,l.jsx)("p",{className:"font-inter truncate text-sm font-normal not-italic leading-[140%] tracking-normal text-[#0b0b0b]",children:n.title||"New Chat"})}),(0,l.jsx)("p",{className:"font-inter truncate text-xs font-normal not-italic leading-[140%] tracking-normal text-[#0B0B0BA8]",children:P(null===(t=n.last_message)||void 0===t?void 0:t.created_at)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[!h&&N&&!c&&(0,l.jsx)("div",{className:"h-2 w-2 rounded-full bg-[#C12E5A]"}),k&&(0,l.jsx)(E.e,{menuContent:w,onOpenChange:d,open:c,menuContentClassName:"z-[9999999] p-1 rounded-[20px]",children:(0,l.jsx)("div",{className:(0,C.cn)("flex h-6  w-6 cursor-pointer items-center justify-center rounded-sm transition-colors",{"bg-gray-200":c,"hover:bg-gray-100":!c}),onClick:e=>{e.stopPropagation()},children:(0,l.jsx)("span",{className:"font-medium text-[#0F172A] hover:text-gray-700 ",children:"⋯"})})})]})]}),(0,l.jsx)(H,{isOpen:r,onClose:()=>{s(!1)},onConfirm:j,isLoading:a})]})}function W(){let{chats:e,isLoading:t,error:n,deleteChat:i,setLoadingElement:r,hasNextPage:s,isLoadingMore:a}=b();return t?(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,l.jsx)("div",{className:"px-5 pb-3 pt-5",children:(0,l.jsx)("h3",{className:"text-sm font-normal text-[#0B0B0BA8]",children:"Chat history"})}),(0,l.jsx)(q,{})]}):n?(0,l.jsxs)("div",{className:"flex flex-1 flex-col overflow-y-auto",children:[(0,l.jsx)("div",{className:"px-5 pb-3 pt-5",children:(0,l.jsx)("h3",{className:"text-sm font-normal text-[#0B0B0BA8]",children:"Chat history"})}),(0,l.jsx)("div",{className:"flex-1 px-5  text-center",children:(0,l.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,l.jsx)("p",{className:"text-sm text-[#0B0B0B80]",children:"Chat history couldn't be loaded. Please refresh or try again."})})})]}):0===e.length?(0,l.jsxs)("div",{className:"flex flex-1 flex-col overflow-y-auto",children:[(0,l.jsx)("div",{className:"px-5 pb-3 pt-5",children:(0,l.jsx)("h3",{className:"text-sm font-normal text-[#0B0B0BA8]",children:"Chat history"})}),(0,l.jsx)("div",{className:"flex-1 px-5  text-center",children:(0,l.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,l.jsx)("p",{className:"text-sm text-[#0B0B0B80]",children:"No chat history yet."})})})]}):(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,l.jsx)("div",{className:"px-5 pb-3 pt-5",children:(0,l.jsx)("h3",{className:"text-sm font-normal text-[#0B0B0BA8]",children:"Chat history"})}),(0,l.jsxs)("div",{className:"space-y-0",children:[e.map(e=>(0,l.jsx)(O,{chat:e,onDelete:i},e.id)),s&&(0,l.jsx)("div",{ref:r,className:"flex items-center justify-center py-4",children:a?(0,l.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border border-gray-300 border-t-gray-600"}):(0,l.jsx)("div",{className:"h-4"})})]})]})}function q(){let e=e=>{let{width:t="w-full",height:n="h-4",rounded:i="rounded",className:r=""}=e;return(0,l.jsx)("div",{className:"relative overflow-hidden bg-gray-200 ".concat(t," ").concat(n," ").concat(i," ").concat(r),children:(0,l.jsx)("div",{className:"skeleton-animation absolute inset-0"})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("style",{children:"\n          .skeleton-animation {\n            background: linear-gradient(\n              90deg,\n              rgba(255, 255, 255, 0) 0%,\n              rgba(255, 255, 255, 0.3) 50%,\n              #E7E7E7\n            );\n            animation: skeleton-loading 1.5s infinite;\n          }\n\n          @keyframes skeleton-loading {\n            0% {\n              transform: translateX(-100%);\n            }\n            100% {\n              transform: translateX(100%);\n            }\n          }\n        "}),(0,l.jsx)("div",{className:"flex flex-col items-center justify-center px-5",children:Array.from({length:4},(e,t)=>t).map(t=>(0,l.jsx)(e,{height:"h-[10px]",className:"my-[17px] w-full"},t))})]})}var Z=n(87278),G=n(2684);function U(e){let{onClose:t,showCloseButton:n=!0}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between p-5",children:[(0,l.jsx)(Z.N_,{}),n&&(0,l.jsx)("button",{className:"flex h-5 w-5 items-center justify-center text-gray-600 transition-colors hover:text-gray-900","aria-label":"Close menu",onClick:t,children:(0,l.jsx)(G.s5_,{className:"h-full w-full"})})]})}function J(e){let{onClick:t}=e;return(0,l.jsxs)("button",{className:"flex w-full items-center gap-3 px-5 py-3 text-left transition-colors hover:bg-gray-200/50",onClick:t,children:[(0,l.jsx)(Z.pO,{}),(0,l.jsx)("span",{className:"text-sm font-normal text-[#0b0b0b]",children:"New chat"})]})}function Q(e){var t;let{className:n,onClose:i,showCloseButton:r=!0}=e,{chats:s}=b(),a=(0,x.xu)(),o=!!(null==a?void 0:null===(t=a.user_info)||void 0===t?void 0:t.email),{setCurrentChatId:c,setShouldShowLoginTip:u,shouldShowLoginTip:d,triggerLoginTipShake:h,switchToList:m,nextGreetingTitle:f}=(0,p.E)(),g=async()=>{if(!o&&s.length>0){d?h():u(!0),m();return}m(),f(),c(null)};return(0,l.jsxs)("div",{className:(0,C.cn)("flex h-full w-[286px] flex-col rounded-bl-[12px] rounded-tl-[12px] bg-[#f6f6f6]",n),children:[(0,l.jsx)(U,{onClose:i,showCloseButton:r}),(0,l.jsx)(J,{onClick:g}),(0,l.jsx)(k.i,{className:"mt-2 bg-[#ededed]"}),(0,l.jsx)(W,{})]})}var Y=n(23009),V=n(71517),K=n(96379),X=n(83807),$=n(78949),ee="/_next/static/media/nory-grey-bg.84a23380.svg";let et={colors:{text:{primary:"#0d0d2b",default:"#0b0b0b",secondary:"#0b0b0ba8",tertiary:"#0b0b0b80",inverse:"#ffffff",brand:"#343482",emphasized:"#0E2337"},background:{primary:"#ffffff",light:"#f6f6f6",grey:"#f8f8f8",brand:{default:"#343482",muted:"#423ea2"},info:{muted:"#E1EAFB"},gradient:{teal:"linear-gradient(180deg, #FFF -43.05%, #EAF8F5 100%)",blue:"linear-gradient(180deg, #FFF -49.97%, #E1EAFB 100%)",purple:"linear-gradient(180deg, #FFF -41.89%, #F4E8FF 100%)",green:"linear-gradient(180deg, #FFF -65.99%, #EBFBE5 100%)",cobalt:"linear-gradient(180deg, #FFF -70.34%, #EAEAFA 100%)",yellow:"linear-gradient(180deg, #FFF -109.57%, #FFF7EA 100%)"}},border:{primary:"#e0e0e0",secondary:"#ededed",subtle:"#cfcfd6"},icon:{primary:"#0b0b0b",secondary:"#0b0b0ba8",brand:"#423ea2",inverse:"#ffffff"},grey:{800:"#0f172a",700:"#1e293b"},indigo:{400:"#262099"}},typography:{fontFamily:"Inter",heading:{fontSize:"16px",fontWeight:600,lineHeight:"normal"},body:{fontSize:"14px",fontWeight:400,lineHeight:1.4},bodyLarge:{fontSize:"14px",fontWeight:400,lineHeight:1.8},caption:{fontSize:"12px",fontWeight:400,lineHeight:1.4},captionMedium:{fontSize:"12px",fontWeight:500,lineHeight:1.4},button:{fontSize:"16px",fontWeight:500,lineHeight:1.4}},spacing:{containerPadding:"20px",messagePadding:"12px",messageGap:"8px",headerPadding:"20px"},layout:{containerMaxWidth:"800px",messageMaxWidth:"65%",agentMessageMaxWidth:"85%"},borderRadius:{container:"20px",message:"16px",messageSmall:"4px",input:"200",button:"32px"}},en=["#4572ED","#30BBA0","#BE6CFF","#FF7EEE","#FFB329","#6FC644"],ei=new Map;function er(e){let{id:t,name:n,lastName:i,size:r=32,className:s,style:a,isMe:o}=e;return(0,l.jsx)("div",{className:(0,C.cn)("flex flex-shrink-0 items-center justify-center overflow-hidden rounded-full",s),style:{width:r,height:r,backgroundColor:function(e){let{id:t,name:n,isMe:i}=e;if(i)return en[0];let r="userAvatarColor:".concat(t||n||"unknown"),s=ei.get(r);if(s)return s;{let e=window.localStorage.getItem(r);if(e&&en.includes(e))return ei.set(r,e),e}let a=en[function(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n);return t%en.length}(t||n||"unknown")];ei.set(r,a);try{window.localStorage.setItem(r,a)}catch(e){console.error("set localStorage error",e)}return a}({id:t,name:n,isMe:o}),color:"#FFF",fontFamily:"Inter",fontSize:12,fontStyle:"normal",fontWeight:400,lineHeight:"140%",textTransform:"uppercase",...a},"aria-label":n,children:function(e,t){let n=e.trim();return"string"==typeof t&&t.trim().length>0?(n.charAt(0)+t.trim().charAt(0)).toUpperCase():n.slice(0,2).toUpperCase()}(n,i)})}var es=n(50966),ea=n(86866),el=n(86772),eo=n(58972);let ec=new Map([["invoice-group",et.colors.background.gradient.cobalt],["order-group",et.colors.background.gradient.green],["shipment-group",et.colors.background.gradient.green],["project-group",et.colors.background.gradient.blue],["project-confirm",et.colors.background.gradient.blue],["product-confirm",et.colors.background.gradient.blue],["project-summary",et.colors.background.gradient.blue],["product-summary",et.colors.background.gradient.blue],["spu-group-blue",et.colors.background.gradient.blue],["spu-group-purple",et.colors.background.gradient.purple],["update-account",et.colors.background.gradient.yellow],["brand-selector",et.colors.background.gradient.teal],["website-selector",et.colors.background.light],["tip-button",et.colors.background.primary],["tip",et.colors.background.info.muted],["tip-upload",et.colors.background.primary]]),eu=new Map([["invoice-group","900px"],["order-group","640px"],["shipment-group","640px"],["project-group","720px"],["project-confirm","720px"],["product-confirm","720px"],["project-summary","720px"],["product-summary","720px"],["markdown","600px"],["rich-text","600px"],["text","600px"],["tip","600px"],["tip-button","600px"]]),ed=new Map([["invoice-group","100%"],["order-group","100%"],["shipment-group","100%"],["project-group","100%"],["project-confirm","100%"],["product-confirm","100%"],["project-summary","100%"],["product-summary","100%"]]),eh=(e,t)=>{var n;return"spu-group"===e.node_type?ec.get("spu-group-purple"):null!==(n=ec.get(e.node_type))&&void 0!==n?n:t?et.colors.background.brand.muted:et.colors.background.light},em=(e,t,n,i)=>{let r=(0,ea.S)(i),s=eu.get(e.node_type),a=ed.get(e.node_type),l="tip-button"===e.node_type||"tip-upload"===e.node_type,o={border:"1px solid ".concat(n.colors.border.primary),borderRadius:"12px",padding:"0px",overflow:"hidden"},c="tip"===e.node_type,u={padding:"12px 16px",color:n.colors.text.emphasized};return{flexDirection:"column",display:r?"block":"flex",background:eh(e,t),color:t?n.colors.text.inverse:n.colors.text.default,fontFamily:n.typography.fontFamily,fontSize:n.typography.body.fontSize,fontWeight:n.typography.body.fontWeight,lineHeight:n.typography.body.lineHeight,maxWidth:s,width:a||"fit-content",borderRadius:t?"12px 0 12px 12px":"0 16px 16px 16px",wordBreak:"break-word",padding:"12px 16px",...c?u:{},...l?o:{}}},ef=(0,u.memo)(function(e){let{message:t,isUser:n,isMe:i,designTokens:r,onSendMessage:s,onLoginSuccess:a,isThinking:o,chat_id:c}=e,{ua:d}=(0,es.useAgentInfo)(),{isExpanded:h}=(0,p.E)(),m=(0,u.useMemo)(()=>{var e,n;return(0,K.fK)({message:t.content,defaultTextType:(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.type)==="ai"?"markdown":"text",isAutoAddTip:(null==t?void 0:null===(n=t.user)||void 0===n?void 0:n.type)==="ai"})},[t.content,t.user.type]),f=(0,u.useMemo)(()=>(null==d?void 0:d.isMobile)||!h?"mobile":"pc",[null==d?void 0:d.isMobile,h]),g=(0,u.useMemo)(()=>m.map(e=>em(e[0],i,r,t.content)),[m,i,r,t.content]),x=(0,u.useMemo)(()=>(0,C.cn)("flex flex-wrap items-start gap-2 whitespace-pre-wrap break-words",i?"justify-end":"justify-start"),[i]);return(0,l.jsx)(el.x1,{isThinking:o,onSendMessage:s,onLoginSuccess:a,messageId:t.id,interacts:t.interacts,chatId:c,children:m.map((e,r)=>(0,l.jsx)("div",{className:(0,C.cn)(x),style:g[r],children:e.map((e,s)=>(0,l.jsx)(eo.l,{node:e,mode:f,isUser:n,isMe:i},"".concat(t.id,"-").concat(r,"-").concat(s)))},"".concat(t.id,"-").concat(r)))})}),eg={ai:(0,l.jsx)($.TinyImage,{src:ee,alt:"Agent Avatar",className:"h-8 w-8",width:32,height:32})},ex={ai:"Nory"},ep="Anonymous";function ev(e){var t,n,i,r,s,a,o,c,u;let{message:d,onSendMessage:h,showAvatar:m=!0,showName:f=!0,onLoginSuccess:g,isThinking:p,defaultName:v,chat_id:y}=e,j=(null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.type)==="client"||(null==d?void 0:null===(n=d.user)||void 0===n?void 0:n.type)==="anonymous",b=null==d?void 0:d.is_me,{userName:w,userInfo:N}=(0,x.Xl)(),k=null==N?void 0:N.first_name,C=null==N?void 0:N.last_name;return b?(0,l.jsxs)("div",{className:"flex items-start justify-end gap-2 px-5 pb-5","data-message-id":d.id,children:[(0,l.jsxs)("div",{className:"flex flex-col items-end gap-1",style:{maxWidth:et.layout.messageMaxWidth},children:[f&&(0,l.jsx)("span",{className:"text-black-primary-0/66 self-end text-right font-['Inter'] text-xs font-normal leading-[1.4]",children:w||ep}),(0,l.jsx)(ef,{message:d,isUser:j,isMe:b,designTokens:et,onSendMessage:h,isThinking:p}),d.status&&(0,l.jsxs)("span",{className:"self-end text-right font-['Inter'] text-xs font-normal leading-[1.8] text-[rgba(11,11,11,0.66)]",children:["sending"===d.status&&"Uploading...","sent"===d.status&&"Sent","failed"===d.status&&(0,l.jsxs)("div",{className:"flex items-center gap-1 text-[#972245]",children:[(0,l.jsx)(X.ExclamationCircleIcon,{className:"h-4 w-4"}),"Message failed to send.",(0,l.jsx)(T.Qj,{className:"text-[#972245]",onClick:()=>{null==h||h({content:d.content,attachments:[],isStrict:!0,id:d.id})},children:"Retry"})]})]})]}),m?(0,l.jsx)(er,{id:null==d?void 0:null===(u=d.user)||void 0===u?void 0:u.id,name:k||ep,lastName:C||"",size:32,isMe:null==d?void 0:d.is_me}):(0,l.jsx)("div",{className:"h-8 w-8 flex-shrink-0"})]}):(0,l.jsxs)("div",{className:"flex items-start justify-start gap-2 px-5 pb-5","data-message-id":d.id,children:[!j&&(m?eg[null==d?void 0:null===(i=d.user)||void 0===i?void 0:i.type]||(0,l.jsx)(er,{id:null==d?void 0:null===(r=d.user)||void 0===r?void 0:r.id,name:(null==d?void 0:null===(s=d.user)||void 0===s?void 0:s.name)||v,lastName:null==d?void 0:null===(a=d.user)||void 0===a?void 0:a.last_name,size:32,isMe:null==d?void 0:d.is_me}):(0,l.jsx)("div",{className:"h-8 w-8 flex-shrink-0"})),(0,l.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",style:{maxWidth:et.layout.agentMessageMaxWidth},children:[f&&(0,l.jsx)("span",{className:"font-['Inter'] text-xs font-normal leading-[1.4] text-[rgba(11,11,11,0.66)]",children:ex[null==d?void 0:null===(o=d.user)||void 0===o?void 0:o.type]||(null==d?void 0:null===(c=d.user)||void 0===c?void 0:c.name)||"Agent"}),(0,l.jsx)(ef,{message:d,isUser:j,isMe:b,isThinking:p,designTokens:et,onSendMessage:h,onLoginSuccess:g,chat_id:y})]})]})}function ey(e){let{time:t}=e;return(0,l.jsx)("div",{className:"flex justify-center py-3",children:(0,l.jsx)("div",{className:"text-center",style:{color:"#0B0B0B",fontFamily:"Inter",fontSize:"12px",fontWeight:400,lineHeight:"normal"},children:(0,l.jsx)("span",{style:{fontFamily:"Inter, -apple-system, Roboto, Helvetica, sans-serif",fontWeight:400,fontSize:"12px",color:"rgba(11,11,11,1)"},children:t})})})}function ej(e){let{messages:t,loading:n=!1,hasMore:i=!1,onLoadMore:r,onSendMessage:s,shouldScrollToBottom:a=!1,chatId:o,isThinking:c=!1,thinkingList:d=[]}=e,h=(0,u.useRef)(null),[m,f]=(0,u.useState)(!0),[g,p]=(0,u.useState)(!1),v=(0,u.useRef)(0),y=(0,u.useRef)(0),{postCommitRead:j}=eb(),{trigger:b}=(0,V.TR)(),[w,N]=(0,u.useState)(null),{access:k}=(0,x.xu)(),C=(0,u.useMemo)(()=>{var e,n,i;let r=t.find(e=>{var t;return(null===(t=e.user)||void 0===t?void 0:t.type)==="ai"}),s={id:"thinking",created_at:new Date().toISOString(),content:'<Thinking messages="'.concat(encodeURIComponent(JSON.stringify(d)),'" />'),attachments:[],is_me:!1,user:{id:(null==r?void 0:null===(e=r.user)||void 0===e?void 0:e.id)||"ai",name:(null==r?void 0:null===(n=r.user)||void 0===n?void 0:n.name)||"Nory",avatar:(null==r?void 0:null===(i=r.user)||void 0===i?void 0:i.avatar)||"",type:"ai",is_me:!1},cursor:""},a=[...t];return c&&(null==a?void 0:a.length)>0&&a.push(s),a.filter(e=>!(0,K.Fj)(e.content))},[t,c,d]);(0,u.useEffect)(()=>{var e;let t=h.current;if(!t)return;let n=null==C?void 0:null===(e=C[(null==C?void 0:C.length)-1])||void 0===e?void 0:e.cursor,i=()=>{n&&j({chatId:o,cursor:n})};if(a){let e=setTimeout(()=>{let e=t.querySelectorAll("[data-message-id]"),n=e.item(e.length-1),r=n?t.scrollTop+n.getBoundingClientRect().top-t.getBoundingClientRect().top:t.scrollHeight;console.log("top>>>",t.scrollTop,n.getBoundingClientRect().top,t.getBoundingClientRect().top,t.scrollHeight),t.scrollTop=r-5,i()},0);return()=>clearTimeout(e)}if(m){let e=setTimeout(()=>{t.scrollTop=t.scrollHeight,f(!0),i()},0);return()=>clearTimeout(e)}},[C,m,a,o,j]);let E=(0,u.useCallback)(()=>{let e=h.current;if(!e)return;let{scrollTop:t,scrollHeight:n,clientHeight:s}=e;f(n-t-s<10),t<100&&i&&!g&&r&&(v.current=e.scrollHeight,y.current=e.scrollTop,p(!0),r())},[i,g,r]);(0,u.useEffect)(()=>{let e=h.current;if(!n&&g&&e){let t=e.scrollHeight-v.current;e.scrollTop=y.current+t,p(!1)}else n||p(!1)},[n,g]);let A=(0,u.useCallback)(e=>{let{messageId:t,chatId:n}=e;N(null),b({chat_id:n,message_id:t,type:"login_success"})},[b]);return(0,u.useEffect)(()=>{w&&k&&A({messageId:w,chatId:o})},[w,k,o,A]),(0,l.jsx)("div",{className:"relative min-h-0 flex-1",children:(0,l.jsxs)("div",{ref:h,className:"custom-scrollbar h-full touch-pan-y overflow-y-auto overscroll-contain px-0",onScroll:E,style:{WebkitOverflowScrolling:"touch"},children:[n&&(0,l.jsx)("div",{className:"flex justify-center py-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,l.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-gray-600"}),"Loading more messages..."]})}),(0,l.jsx)("div",{className:"pt-3",children:(()=>{let e=[];for(let t=0;t<C.length;t++){let n=C[t],i=t>0?C[t-1]:null,r=0===t||i&&new Date(n.created_at).getTime()-new Date(i.created_at).getTime()>3e5;if(r){let i="time-".concat(t),r=P(n.created_at);e.push((0,l.jsx)(ey,{time:r},i))}e.push((0,l.jsx)(ev,{message:n,onSendMessage:s,onLoginSuccess:()=>{N(n.id)},isThinking:c,chat_id:o,...(()=>{var e,s,a,l;let o=!(i&&(null===(e=i.user)||void 0===e?void 0:e.id)===(null===(s=n.user)||void 0===s?void 0:s.id)&&(null===(a=i.user)||void 0===a?void 0:a.type)===(null===(l=n.user)||void 0===l?void 0:l.type))||r||0===t;return{showAvatar:o,showName:o}})()},n.id))}return e})()}),0===C.length&&!n&&(0,l.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center text-gray-500",children:[(0,l.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100",children:(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,l.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),(0,l.jsx)("p",{className:"text-sm",children:"Start a conversation"})]})})]})})}let eb=()=>{let e=(0,u.useRef)({});return{postCommitRead:(0,u.useCallback)(t=>{let{chatId:n,cursor:i}=t;if(!n||!i)return;let r="".concat(n,"-").concat(i);e.current[r]||(e.current[r]=!0,(0,g.my)({chat_id:n,cursor:i}))},[])}};function ew(e){var t;let{onClose:n,isExpanded:i,toggleExpanded:r,onMenuButtonClick:s,onClickHumanButton:a,talkToHumanButtonDisabled:o}=e,c=(0,x.xu)(),u=!!(null==c?void 0:null===(t=c.user_info)||void 0===t?void 0:t.email);return(0,l.jsx)("div",{className:"px-5 pb-5 pt-5",style:{borderBottom:"1px solid ".concat(et.colors.border.secondary)},children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[u&&(0,l.jsx)(eC,{onClick:s}),(0,l.jsx)(ek,{isExpanded:i,onClickHumanButton:a,humanButtonDisabled:o})]}),(0,l.jsx)(eN,{onClose:n,toggleExpanded:r,isExpanded:i,talkToHumanButtonDisabled:o,handleTalkToHumanButtonClick:a})]})})}function eN(e){let{onClose:t,toggleExpanded:n,isExpanded:i,talkToHumanButtonDisabled:r,handleTalkToHumanButtonClick:s}=e,{ua:a}=(0,es.useAgentInfo)(),o=(0,l.jsx)(A.S,{customTip:"Talk to the Wayo team",contentClassName:"py-3 px-4 border-[#EDEDED] shadow-none bg-white rounded-xl text-[#0B0B0BA8]",children:(0,l.jsx)(eE,{isDisabled:r,onClick:s,startIcon:(0,l.jsx)("span",{className:"text-[#0B0B0BA8]",children:(0,l.jsx)(Z.tB,{className:"opacity-66"})}),children:i&&(0,l.jsx)("span",{className:"max-md:hidden",children:"Talk to the Wayo team"})})}),c=null;return c=a.isMobile?(0,l.jsx)("div",{className:"rounded-ful flex flex-shrink-0 items-center",children:(0,l.jsx)("button",{onClick:t,className:"flex items-center justify-center rounded-full transition-colors hover:bg-slate-100 active:bg-slate-200",children:(0,l.jsx)("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:(0,l.jsx)(Z.Tw,{})})})}):(0,l.jsxs)("div",{className:"rounded-ful flex flex-shrink-0 items-center gap-x-3",children:[(0,l.jsx)("button",{onClick:n,className:"flex items-center justify-center rounded-md p-1 transition-colors hover:bg-[#EDEDED] active:bg-slate-200",children:(0,l.jsx)("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:i?(0,l.jsx)(Z.jM,{}):(0,l.jsx)(Z.vc,{})})}),(0,l.jsx)("button",{onClick:t,className:"flex items-center justify-center rounded-md p-1 transition-colors hover:bg-[#EDEDED] active:bg-slate-200",children:(0,l.jsx)(Z.Tw,{})})]}),(0,l.jsxs)("div",{className:(0,C.cn)("flex items-center max-md:gap-x-2",i?"gap-x-5":"gap-x-3"),children:[i&&o,c]})}function ek(e){let{isExpanded:t,onClickHumanButton:n,humanButtonDisabled:i}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-[46px] w-[46px]",children:(0,l.jsx)("img",{alt:"",className:"block h-full w-full max-w-none",src:ee})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("h1",{className:"whitespace-nowrap font-['Inter'] text-base font-semibold leading-normal text-[#0d0d2b]",children:"Nory the AI Agent"}),!t&&(0,l.jsx)(eE,{isDisabled:i,onClick:n,className:"gap-x-0.5 border-none p-0 text-[#423EA2] hover:bg-transparent hover:underline",startIcon:(0,l.jsx)(Z.tB,{}),children:(0,l.jsx)("span",{children:"Talk to the Wayo team"})})]})]})}function eC(e){let{onClick:t}=e;return(0,l.jsx)("button",{onClick:t,className:"flex h-6 w-6 items-center justify-center",children:(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"#0F172A","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})})}function eE(e){let{onClick:t,isDisabled:n,children:i,className:r,startIcon:s}=e;return(0,l.jsxs)("button",{className:(0,C.cn)("font-Inter text-black-primary-0 flex items-center justify-center gap-1 gap-x-1 whitespace-nowrap rounded-lg border border-[#E0E0E0] bg-white px-3 py-2 text-center text-sm font-medium  leading-[140%] hover:border-[#EDEDED] hover:bg-[#EDEDED]",n?"opacity-50":"",r),onClick:t,disabled:n,children:[s,i]})}n(86545);var eA=n(32103),eT=n(49784);function eD(){var e;let{chatId:t,setFirstThinking:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[i,r]=(0,u.useState)([]),[s,a]=(0,u.useState)(!1),[l,o]=(0,u.useState)(!0),[c,d]=(0,u.useState)(!1),{trigger:h}=(0,eA.$3)(),{trigger:m}=(0,eA.vz)(),{userName:f}=(0,x.Xl)(),{disconnect:g,messages:p,thinkingList:v,deleteMessageIds:y,isThinking:j}=(0,eA.Bl)(t||null);(0,u.useEffect)(()=>{t||g()},[g,t]);let b=(0,u.useRef)(new Set),w=(0,u.useRef)(new Set),[N,k]=(0,u.useState)(!1);(0,u.useEffect)(()=>{(y||[]).length>0&&r(e=>e_(e.filter(e=>!y.some(t=>t.message_id===e.id))))},[y,r]),(0,u.useEffect)(()=>{var e;if(N)return;let t=[...i,...p],s=t[t.length-1];if((null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.type)==="ai"&&(null==n||n(!1)),p&&p.length>0){let e=p.filter(e=>{let t="".concat(e.id);return!b.current.has(t)&&(b.current.add(t),!0)});if(e.length>0){let t=e.filter(e=>!w.current.has(e.id)&&!i.some(t=>t.id===e.id)).map(e=>({...e,id:"".concat(e.id),content:(null==e?void 0:e.content)||""})),n=e.filter(e=>{var t,n;return(null===(t=e.user)||void 0===t?void 0:t.type)==="client"||(null===(n=e.user)||void 0===n?void 0:n.type)==="anonymous"});n.length>0&&r(e=>e_(e.map(e=>{let t=n.find(t=>t.id===e.id);return t&&t.created_at!==e.created_at?{...e,created_at:t.created_at}:e}))),t.length>0&&(r(e=>e_([...e,...t])),d(!0))}}},[p,i,N,n]);let C=null===(e=i[0])||void 0===e?void 0:e.cursor,E=(0,u.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!t||s||!l)return;a(!0);let n=await m({chat_id:t,cursor:C}),i=((null==n?void 0:n.data)||[]).reverse();if(r(e=>e_([...i.filter(t=>!e.some(e=>e.id===t.id)),...e])),o(i.length>=20),0===i.length&&(!(null==n?void 0:n.data)||0===n.data.length)&&e<3){setTimeout(()=>{E(e+1)},500);return}a(!1)},[s,l,m,C,t]),A=(0,u.useCallback)(async e=>{let{content:n,attachments:i,chatId:s,isStrict:a=!0,id:l}=e,o={id:l||"user-".concat(Date.now()),content:(0,K.wv)(n,i,a),is_me:!0,user:{id:"user-1",name:f,avatar:"",type:"client",is_me:!0},cursor:"",created_at:new Date().toISOString(),attachments:i,status:"sending"};r(e=>{let t=null==e?void 0:e.find(e=>(null==e?void 0:e.id)===l),n=null==e?void 0:e.findLast(e=>{var t;return(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.type)==="ai"});return t&&l?e.map(e=>e.id===t.id?{...e,status:"sending",created_at:eS(o.created_at,eM(null==n?void 0:n.created_at))}:e):e_([...e,{...o,created_at:eS(o.created_at,eM(null==n?void 0:n.created_at))}])}),d(!0),k(!0);try{var c;let e=await h({chat_id:s||t,content:o.content,attachments:null==i?void 0:i.map(e=>e.id)});if(e.code)throw eT.ZP.error(e.message),Error(e.message);w.current.add(null===(c=e.data)||void 0===c?void 0:c.message_id),r(t=>t.map(t=>{var n;return t.id===o.id?{...t,status:"sent",id:null===(n=e.data)||void 0===n?void 0:n.message_id}:t})),k(!1)}catch(e){k(!1),r(e=>e.map(e=>e.id===o.id?{...e,status:"failed"}:e))}},[t,h,f]),T=(0,u.useCallback)(()=>{r([]),o(!0)},[]);return(0,u.useEffect)(()=>{T()},[t,T]),(0,u.useEffect)(()=>{t&&0===i.length&&E()},[t,i.length,E]),(0,u.useEffect)(()=>{if(c){let e=setTimeout(()=>{d(!1)},100);return()=>clearTimeout(e)}},[c,i]),{messages:i,loading:s,isThinking:j,thinkingList:v,hasMore:l,sendMessage:A,loadMoreMessages:E,clearMessages:T,shouldScrollToBottom:c}}function e_(e){return e.every((t,n)=>{if(n+1<e.length){var i;return new Date(null==t?void 0:t.created_at).getTime()-new Date(null===(i=e[n+1])||void 0===i?void 0:i.created_at).getTime()<0}return!0})?e:e.sort((e,t)=>new Date(null==e?void 0:e.created_at).getTime()-new Date(null==t?void 0:t.created_at).getTime())}function eM(e){return e?new Date(e).getTime()+500:new Date().toISOString()}function eS(e,t){return e&&t?e?t?new Date(Math.max(new Date(e).getTime(),new Date(t).getTime())).toISOString():new Date(e).toISOString():new Date(t).toISOString():new Date().toISOString()}function eB(){let{currentChatId:e,toggleExpanded:t,isExpanded:n,setOpen:i,setFirstThinking:r,isFirstThinking:s,isMenuOpen:a,setMenuOpen:o}=(0,p.E)(),{messages:c,loading:d,hasMore:h,sendMessage:m,loadMoreMessages:f,shouldScrollToBottom:g,isThinking:x,thinkingList:v}=eD({chatId:e,setFirstThinking:r});(0,u.useEffect)(()=>{(0,w.W)("Chat SSE Connect Init Props",{currentChatId:e})},[e]);let y=async t=>{if(e)try{r(!1),m({...t,chatId:e})}catch(e){}};return(0,l.jsxs)("div",{className:"relative flex h-full w-full flex-1 flex-col",children:[(0,l.jsx)("div",{className:"z-60 absolute left-0 top-0 h-full",children:(0,l.jsx)(N.u,{show:a,enter:"transition-transform duration-300 ease-out",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition-transform duration-200 ease-in",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",className:"h-full",children:(0,l.jsx)(Q,{onClose:()=>o(!1),showCloseButton:!0,className:"border-r border-r-[#E0E0E0]"})})}),(0,l.jsx)(ew,{onClose:()=>{i(!1)},isExpanded:n,toggleExpanded:t,onMenuButtonClick:()=>{o(!0)},onClickHumanButton:()=>{y({content:"Talk to the Wayo team"})},talkToHumanButtonDisabled:d||x||s}),(0,l.jsx)(ej,{messages:c,loading:d,hasMore:h,chatId:e,onLoadMore:f,shouldScrollToBottom:g,onSendMessage:m,isThinking:x||s,thinkingList:v}),(0,l.jsx)(Y.ZP,{onSendMessage:y,className:"mx-5 mb-5",disabled:x||s})]})}var eI=n(65621),eF=n(67573),eR=n(65880);function eP(e){let{width:t,height:n,size:i,className:r,variant:s="main",shape:a}=e,o=t||i,c=n||i,u=(0,C.cn)("min-w-4",r);return"whale"===a?(0,l.jsxs)("svg",{width:"43",height:"31",viewBox:"0 0 43 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5555 0C4.27814 0 0 4.27814 0 9.5555V21.0221C0 26.2995 4.27815 30.5776 9.55551 30.5776H25.7999C26.0125 30.5776 26.2235 30.5707 26.4326 30.557C26.6793 30.5706 26.9459 30.5776 27.2332 30.5776C35.8991 30.5776 39.4421 24.2123 40.1321 21.0259C40.1325 21.0258 40.1328 21.0258 40.1332 21.0258C40.1297 20.9824 40.126 20.9355 40.1216 20.8853C41.2461 20.5628 42.3036 19.7325 42.7226 18.9023C43.2584 17.8405 42.8814 16.5625 42.7226 16.2479C42.2463 16.4052 41.5407 16.67 40.3594 17.8405C40.0059 18.1908 39.7582 18.5603 39.5846 18.9231C39.4007 18.5817 39.1525 18.2396 38.8153 17.923C37.6584 16.8363 37.002 16.622 36.5607 16.4988C36.4428 16.825 36.2053 18.131 36.7724 19.1551C37.2024 19.9316 38.173 20.6651 39.178 20.9296C39.1779 20.962 39.1779 20.9929 39.1779 21.0221L35.3554 21.0221V9.5555C35.3554 4.27815 31.0772 0 25.7999 0H9.5555ZM39.5406 21.0038C39.4678 21.0124 39.3951 21.0186 39.3226 21.0221L39.6955 21.0221C39.644 21.0174 39.5924 21.0113 39.5406 21.0038Z",fill:"white"}),(0,l.jsx)("circle",{cx:"10.0334",cy:"23.411",r:"1.43333",fill:"#1E293B"})]}):(0,l.jsx)(eR.default,{alt:"wayo",width:o,height:c,className:u,objectFit:"cover",src:"white"===s?eI.Z:eF.Z})}var ez=n(75259),eL=n(49556),eH=n(87659);function eO(e){let{icon:t,title:n,onClick:i,className:r="",requireLogin:s=!1,isLogin:a=!1}=e,o=Array.isArray(n)?n.join(" "):n,c=(0,l.jsxs)("div",{className:"relative flex w-full shrink-0 cursor-pointer flex-row items-center justify-center gap-3 rounded-2xl bg-white px-5 hover:border-[#E0E0E0] hover:bg-[#EDEDED]  ".concat(r),onClick:s&&!a?void 0:i,children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-2xl border border-[#e0e0e0] shadow-[0px_2px_4px_0px_rgba(0,0,0,0.05)]"}),(0,l.jsxs)("div",{className:"flex min-h-px min-w-px grow basis-0 flex-row items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex shrink-0 flex-row items-center gap-2",children:[t,(0,l.jsx)("div",{className:"shrink-0 text-center text-sm font-normal text-[#0d0d2b]",children:(0,l.jsx)("p",{className:"whitespace-pre leading-[1.4]",children:o})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[s&&!a&&(0,l.jsx)("span",{className:"py-1 text-xs font-medium text-[#0B0B0BA8]",children:"Log in"}),(0,l.jsx)(Z.LZ,{size:16})]})]})]});return s&&!a?(0,l.jsx)(ez.LoginModalTrigger,{onLoginSuccess:()=>null==i?void 0:i(),className:"w-full",children:c}):c}function eW(e){let{icon:t,title:n,onClick:i,className:r="",requireLogin:s=!1,isLogin:a=!1}=e,o=Array.isArray(n)?n:[n],c=(0,l.jsxs)("div",{className:"relative flex min-h-0 min-w-0 grow basis-0 cursor-pointer flex-col items-center justify-center gap-y-5 rounded-2xl bg-white pb-5  pt-6 hover:border-[#E0E0E0] hover:bg-[#EDEDED] ".concat(r),onClick:s&&!a?void 0:i,children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-2xl border border-[#e0e0e0] shadow-[0px_2px_4px_0px_rgba(0,0,0,0.05)]"}),(0,l.jsxs)("div",{className:"flex w-full shrink-0 flex-col items-center gap-4",children:[t,(0,l.jsx)("div",{className:"min-w-full shrink-0 text-center text-base font-medium leading-5 text-[#0b0b0b]",children:o.map((e,t)=>(0,l.jsx)("p",{className:0===t?"mb-0":"",children:e},t))})]}),(0,l.jsxs)("div",{className:"flex shrink-0",children:[s&&!a&&(0,l.jsx)("div",{className:"pr-1 text-sm text-[#0B0B0BA8]",children:"Log in"}),(0,l.jsx)(Z.LZ,{})]})]});return s&&!a?(0,l.jsx)(ez.LoginModalTrigger,{onLoginSuccess:()=>null==i?void 0:i(),className:"min-h-0 min-w-0 grow basis-0",children:c}):c}function eq(e){var t;let{isExpanded:n,onPromptClick:i,className:r,itemsPerRow:s}=e,{ua:a}=(0,es.useAgentInfo)(),o=(0,x.xu)(),c=!!(null==o?void 0:null===(t=o.user_info)||void 0===t?void 0:t.email),u=s||(n?eJ:eU).length,d=n?eJ:eU,h=()=>1===u?"flex flex-col gap-2":"grid gap-3 w-full",m=()=>1===u?"":({1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-1 sm:grid-cols-2 md:grid-cols-3",4:"grid-cols-1 sm:grid-cols-2 md:grid-cols-4",5:"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5",6:"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6"})[Math.min((null==a?void 0:a.isMobile)?Math.min(u,2):u,6)]||"grid-cols-1 sm:grid-cols-2 md:grid-cols-4";return n?(0,l.jsx)("div",{className:"".concat(h()," ").concat(m()," w-full shrink-0 ").concat(r),children:d.map(e=>(0,l.jsx)(eW,{icon:e.icon(),title:e.title,onClick:()=>i(e.message,e.scene),requireLogin:e.requireLogin,isLogin:c},e.id))}):(0,l.jsx)("div",{className:"".concat(h()," ").concat(m()," w-full shrink-0 ").concat(r),children:d.map(e=>(0,l.jsx)(eO,{icon:e.icon(20),title:e.title,onClick:()=>i(e.message,e.scene),className:"!h-[44px]",requireLogin:e.requireLogin,isLogin:c},e.id))})}let eZ=[{id:"create-branded-merch",message:"Create branded merch",scene:"source_product",requireLogin:!1},{id:"make-fully-custom-product",message:"Make a fully custom product",scene:"fully_custom_product",requireLogin:!1},{id:"faq",message:"Ask a general question",scene:"faq",requireLogin:!1},{id:"track-order-or-shipment",message:"Track order or shipment",scene:"track_order",requireLogin:!0}],eG={"create-branded-merch":{defaultIcon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(0,l.jsx)(Z.pg,{size:e})},expandedIcon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;return(0,l.jsx)(Z.pg,{size:e})},defaultTitle:"Create branded merch",expandedTitle:["Create branded","merch"]},"make-fully-custom-product":{defaultIcon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(0,l.jsx)(Z.cY,{size:e})},expandedIcon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;return(0,l.jsx)(Z.cY,{size:e})},defaultTitle:"Make a fully custom product",expandedTitle:["Make a fully","custom product"]},faq:{defaultIcon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(0,l.jsx)(Z.q$,{size:e})},expandedIcon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;return(0,l.jsx)(Z.q$,{size:e})},defaultTitle:"Ask a general question",expandedTitle:["Ask a general","question"]},"track-order-or-shipment":{defaultIcon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(0,l.jsx)(Z.mT,{size:e})},expandedIcon:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;return(0,l.jsx)(Z.mT,{size:e})},defaultTitle:"Track order or shipment",expandedTitle:["Track order or","shipment"]}},eU=eZ.map(e=>({...e,icon:eG[e.id].defaultIcon,title:eG[e.id].defaultTitle})),eJ=eZ.map(e=>({...e,icon:eG[e.id].expandedIcon,title:eG[e.id].expandedTitle})),eQ={source_product:"Mock up merch with my branding",fully_custom_product:(null===(i=eZ.find(e=>"fully_custom_product"===e.scene))||void 0===i?void 0:i.message)||"",faq:(null===(r=eZ.find(e=>"faq"===e.scene))||void 0===r?void 0:r.message)||"",track_order:(null===(s=eZ.find(e=>"track_order"===e.scene))||void 0===s?void 0:s.message)||"",update_account:(null===(a=eZ.find(e=>"update_account"===e.scene))||void 0===a?void 0:a.message)||""},eY=e=>{let{greetingTitleIndex:t,firstName:n}=e;return e0(t,n).greetingTitle},eV=e=>{let{greetingTitleIndex:t,firstName:n}=e;return e0(t,n).greetingDescription},eK="[First name]",eX=[{greetingTitle:"How can I help you today?",greetingDescription:"Tell me what you want to create and I’ll help you bring it to life."},{greetingTitle:"Building something new?",greetingDescription:"Let me know what you’re making and I’ll handle the rest."},{greetingTitle:"Let’s make something extraordinary",greetingDescription:"From ready-to-customize catalog products to fully custom builds, I’ve got you covered."},{greetingTitle:"Let’s make something cool",greetingDescription:"Branded merch or fully custom products – it’s your call."},{greetingTitle:"Not sure where to start?",greetingDescription:"I can help with merch design, product ideas, custom sourcing, or questions about Wayo."}],e$=[...eX,{greetingTitle:"Welcome back, ".concat(eK,"!"),greetingDescription:"Pick up where you left off, or starting making something new."},{greetingTitle:"Good to see you again, ".concat(eK,"?"),greetingDescription:"What would you like to make or customize today?"},{greetingTitle:"What’s the plan today, ".concat(eK,"?"),greetingDescription:"I can help you design merch, explore product ideas, or go fully custom."},{greetingTitle:"Ready to make something, ".concat(eK,"?"),greetingDescription:"Tell me what you have in mind, and I’ll guide you through the details."},{greetingTitle:"Planning a product or merch idea, ".concat(eK,"?"),greetingDescription:"I can help you explore ready-to-customize options or source something 100% unique."}],e0=(e,t)=>{if(t){let n=e$[e%e$.length];return{greetingTitle:n.greetingTitle.replace(eK,t),greetingDescription:n.greetingDescription.replace(eK,t)}}return eX[e%eX.length]};function e1(){var e,t,n;let{isExpanded:i,switchToChat:r,currentChatId:s,setCurrentChatId:a,isAnonymous:o,setFirstThinking:c,setShouldShowLoginTip:u,shouldShowLoginTip:d,triggerLoginTipShake:h,greetingTitleIndex:m}=(0,p.E)(),{ua:f}=(0,es.useAgentInfo)(),{refresh:v,chats:y}=b(),j=(0,x.xu)(),N=!!(null==j?void 0:null===(e=j.user_info)||void 0===e?void 0:e.email),k=(0,l.jsx)(eV,{greetingTitleIndex:m,firstName:null==j?void 0:null===(t=j.user_info)||void 0===t?void 0:t.first_name}),C=(0,l.jsx)(eY,{greetingTitleIndex:m,firstName:null==j?void 0:null===(n=j.user_info)||void 0===n?void 0:n.first_name}),{sendMessage:E}=eD({chatId:s}),A=async e=>{let{content:t,attachments:n}=e;if((0,w.W)("Send Message Pre-Judge",{isAnonymous:String(o),hasConversation:String(y.length>0)}),!N&&y.length>0){d?h():u(!0);return}try{c(!1);let e=await (0,g.P4)();(0,w.W)("Send Message Create Chat",{apiRes:JSON.stringify(e),apiProps:JSON.stringify({})});let i=e.data.id;a(i),await E({content:t,attachments:n,chatId:i}),c(!0),setTimeout(()=>{r()},50),v()}catch(e){(0,w.W)("Send Message Create Chat Error",{apiRes:JSON.stringify(e),apiProps:JSON.stringify({})})}},D=async(e,t)=>{if(!N&&y.length>0){d?h():u(!0);return}c(!1);try{let e=await (0,g.P4)({scene:t});(0,w.W)("Prompt Card Create Chat",{apiProps:JSON.stringify({scene:t}),apiResult:JSON.stringify(e)});let n=e.data.id;a(n),c(!0),r(),v()}catch(e){(0,w.W)("Prompt Card Create Chat Error",{apiRes:JSON.stringify(e),apiProps:JSON.stringify({})})}},_=y.length>0;return(null==f?void 0:f.isMobile)?(0,l.jsxs)(T.kC,{className:"flex-1",flexDirection:"column",justifyContent:"spaceBetween",children:[(0,l.jsxs)("div",{className:"flex w-full flex-shrink flex-col gap-y-5",children:[(0,l.jsx)("div",{className:"h-3 flex-shrink"}),(0,l.jsx)(e2,{}),(0,l.jsx)(eP,{size:32}),(0,l.jsxs)("div",{className:"flex w-full flex-col gap-y-1.5",children:[(0,l.jsx)("div",{className:"shrink-0 text-2xl font-semibold ",children:(0,l.jsx)("p",{className:"leading-7",children:C})}),(0,l.jsx)("div",{className:"min-w-full shrink-0 text-sm font-normal leading-5 text-[rgba(11,11,11,0.66)]",children:(0,l.jsx)("p",{className:"mb-0",children:k})})]})]}),(0,l.jsxs)(T.kC,{flexDirection:"column",justifyContent:"center",className:"gap-y-3",children:[(0,l.jsx)(eq,{isExpanded:!1,onPromptClick:D,itemsPerRow:1}),(0,l.jsx)(Y.ZP,{onSendMessage:A,placeholder:"Say anything...",disabled:!1,className:"!h-full !w-full !px-4 !py-4"}),!N&&(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-x-1  text-[10px] leading-[18px] text-[#0B0B0BA8]",children:[(0,l.jsx)("span",{className:"whitespace-nowrap",children:"By messaging Nory, you agree to our"}),(0,l.jsx)(eH.default,{target:"_blank",className:"whitespace-nowrap text-[#343482] underline",href:"https://thewayo.com/agreements/service",children:"Terms of service"}),(0,l.jsx)("span",{className:"whitespace-nowrap",children:"and"}),(0,l.jsx)(eH.default,{target:"_blank",className:"whitespace-nowrap text-[#343482] underline",href:"https://thewayo.com/agreements/privacy",children:"Privacy Policy"}),(0,l.jsx)("span",{children:"."})]})]})]}):i?(0,l.jsxs)("div",{className:"flex min-h-full w-full max-w-[800px] flex-col justify-end gap-y-10 p-0",children:[(0,l.jsxs)("div",{className:"flex w-full shrink-0 flex-col gap-y-2",children:[(0,l.jsx)(e2,{}),(0,l.jsxs)("div",{className:"flex w-full shrink-0 flex-col gap-y-2",children:[(0,l.jsx)("div",{className:"min-w-full shrink-0 text-[32px] font-semibold leading-[37px]",children:(0,l.jsx)("p",{children:C})}),(0,l.jsx)("div",{className:"m-1 mx-0 shrink-0 text-sm font-normal leading-5 text-[rgba(11,11,11,0.66)]",children:(0,l.jsx)("p",{className:"mb-0 w-[684px]",children:k})})]})]}),(0,l.jsx)(eq,{isExpanded:!0,onPromptClick:D}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,l.jsx)(Y.ZP,{onSendMessage:A,placeholder:"Say anything...",disabled:!1,className:"!px-4 !py-4 ".concat(_?"!w-full":"!w-[800px]")}),!N&&(0,l.jsxs)(T.kC,{alignItems:"center",justifyContent:"center",className:"text-xs text-[#0B0B0BA8]",children:[(0,l.jsx)("span",{children:"By messaging Nory, you agree to our\xa0"}),(0,l.jsx)(eH.default,{target:"_blank",className:"text-[#343482] underline",href:"https://thewayo.com/agreements/service",children:"Terms of service"}),(0,l.jsx)("span",{children:"\xa0and\xa0"}),(0,l.jsx)(eH.default,{target:"_blank",className:"text-[#343482] underline",href:"https://thewayo.com/agreements/privacy",children:"Privacy Policy"}),"."]})]})]}):(0,l.jsxs)(T.kC,{className:"w-full flex-1 pt-7",flexDirection:"column",justifyContent:"spaceBetween",children:[(0,l.jsxs)("div",{className:"flex w-full flex-col gap-y-5",children:[(0,l.jsx)(e2,{}),(0,l.jsx)(eP,{size:32}),(0,l.jsxs)("div",{className:"flex w-full flex-col gap-y-1.5",children:[(0,l.jsx)("div",{className:"text-2xl font-semibold ",children:(0,l.jsx)("p",{className:"leading-7",children:C})}),(0,l.jsx)("div",{className:"min-w-full text-sm font-normal leading-5 text-[rgba(11,11,11,0.66)]",children:(0,l.jsx)("p",{className:"mb-0",children:k})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,l.jsx)(eq,{isExpanded:!1,onPromptClick:D,itemsPerRow:1}),(0,l.jsxs)(T.kC,{flexDirection:"column",justifyContent:"center",className:"flex-shrink gap-y-1",children:[(0,l.jsx)(Y.ZP,{onSendMessage:A,placeholder:"Say anything...",disabled:!1,className:"!h-full !w-full !max-w-full !py-4"}),!N&&(0,l.jsxs)(T.kC,{alignItems:"center",justifyContent:"center",className:"text-[10px] leading-[18px] text-[#0B0B0BA8]",children:[(0,l.jsx)("span",{children:"By messaging Nory, you agree to our\xa0"}),(0,l.jsx)(eH.default,{target:"_blank",className:"text-[#343482] underline",href:"https://thewayo.com/agreements/service",children:"Terms of service"}),(0,l.jsx)("span",{children:"\xa0and\xa0"}),(0,l.jsx)(eH.default,{target:"_blank",className:"text-[#343482] underline",href:"https://thewayo.com/agreements/privacy",children:"Privacy Policy"}),"."]})]})]})]})}function e2(e){let{className:t}=e,{access:n}=(0,x.xu)(),{shouldShowLoginTip:i,setShouldShowLoginTip:r,loginTipShakeTrigger:s}=(0,p.E)(),[a,o]=(0,u.useState)(!1),c=(0,u.useRef)(0),d=(0,u.useRef)(!0);return((0,u.useEffect)(()=>{d.current&&(c.current=s,d.current=!1)},[]),(0,u.useEffect)(()=>{if(s>c.current&&i){o(!0);let e=setTimeout(()=>{o(!1)},500);return c.current=s,()=>clearTimeout(e)}},[s,i]),n||!i)?null:(0,l.jsxs)(eL.I,{theme:"info",needClosed:!1,onOpenChange:e=>{e||r(!1)},className:(0,C.cn)(t,a&&"animate-shake"),children:[(0,l.jsx)(ez.LoginModalTrigger,{className:"inline-block cursor-pointer underline",children:"Sign in"}),"\xa0",(0,l.jsx)(l.Fragment,{children:"to start a new chat with Nory. You can try it once as a guest."})]})}var e4=n(14571),e5=n(58602);function e3(e){let{children:t}=e,{isExpanded:n,setExpanded:i}=(0,p.E)(),{ua:r}=(0,es.useAgentInfo)(),{width:s}=(0,j.dz)(),a=!(null==r?void 0:r.isMobile)&&s<1024;return((0,u.useEffect)(()=>{a&&n&&i(!1)},[a,n,i]),null==r?void 0:r.isMobile)?(0,l.jsx)(e8,{children:t}):a?(0,l.jsx)(e9,{hideExpandButton:!0,children:t}):n?(0,l.jsx)(e7,{children:t}):(0,l.jsx)(e9,{hideExpandButton:!1,children:t})}function e6(e){let{children:t}=e,{isOpen:n,setOpen:i}=(0,p.E)(),{ua:r}=(0,es.useAgentInfo)();return(null==r?void 0:r.isMobile)?(0,l.jsx)(N.u.Root,{show:n,as:u.Fragment,children:(0,l.jsx)(e5.V,{as:"div",onClose:()=>{i(!1)},className:"relative z-[51]",children:(0,l.jsx)("div",{className:"fixed inset-0 flex h-[100dvh] w-screen flex-col overflow-hidden bg-black/80  will-change-transform",children:(0,l.jsx)(N.u.Child,{as:u.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",children:(0,l.jsx)(e5.V.Panel,{className:"w-screen bg-white text-black",children:(0,l.jsx)("div",{className:"flex h-[100dvh] flex-col",children:(0,l.jsx)("div",{className:"relative flex flex-1 overflow-auto",children:t})})})})})})}):null}function e8(e){let{children:t}=e,{setOpen:n,viewMode:i,isMenuOpen:r,setMenuOpen:s}=(0,p.E)(),{chats:a}=b(),o=a.length>0;return(0,l.jsxs)(e6,{children:[(0,l.jsxs)("div",{className:"flex w-full flex-1 flex-col bg-[#fff] ".concat("chat"===i?"":"px-5 py-6"),style:"list"===i?{backgroundImage:"url(/images/agent-mobile-bg.svg)",backgroundSize:"cover"}:void 0,onClick:e=>{r&&e.currentTarget.contains(e.target)&&s(!1)},children:["list"===i&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[o?(0,l.jsx)("button",{onClick:()=>s(!0),className:"flex h-6 w-6 items-center justify-center",children:(0,l.jsx)(Z.Oq,{})}):(0,l.jsx)("div",{}),(0,l.jsx)("button",{onClick:()=>n(!1),className:"flex h-6 w-6 items-center justify-center",children:(0,l.jsx)(Z.Tw,{})})]}),t]}),"list"===i&&(0,l.jsx)("div",{className:"absolute left-0 top-0 h-full",children:(0,l.jsx)(N.u,{show:r,enter:"transition-transform duration-300 ease-out",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition-transform duration-200 ease-in",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",className:"h-full",children:(0,l.jsx)(Q,{onClose:()=>s(!1),showCloseButton:!1})})})]})}function e7(e){let{children:t}=e,{isOpen:n,setOpen:i,toggleExpanded:r,viewMode:s,isMenuOpen:a,setMenuOpen:o}=(0,p.E)(),{showFlow:c}=(0,e4.V)();return(0,l.jsx)(T.u_,{open:n,onClose:c?()=>{}:()=>i(!1),containerClassName:"w-[1200px]",className:"!m-0 rounded-[20px] !p-0",unmount:!1,enableExternalClose:!0,children:(0,l.jsxs)("div",{className:"flex h-[min(760px,100vh-80px)] justify-between rounded-[20px] bg-[#fff]",onClick:e=>{a&&e.currentTarget.contains(e.target)&&o(!1)},children:["list"===s&&(0,l.jsx)(Q,{onClose:()=>o(!1),showCloseButton:!1,className:"flex-none"}),(0,l.jsxs)("div",{className:"flex max-h-full w-full flex-col ".concat("chat"===s?"":"p-10 pb-16"),style:"list"===s?{backgroundImage:"url(/images/agent-pc-bg.svg)",backgroundSize:"cover",backgroundPosition:"-1px 0"}:void 0,children:["list"===s&&(0,l.jsx)("div",{className:"mb-6 flex items-start justify-end",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)("button",{onClick:r,className:"flex h-10 w-10 items-center justify-center rounded-lg hover:bg-[#EDEDED]",children:(0,l.jsx)(Z.oN,{})}),(0,l.jsx)("button",{onClick:()=>i(!1),className:"flex h-10 w-10 items-center justify-center rounded-lg hover:bg-[#EDEDED]",children:(0,l.jsx)(Z.vE,{})})]})}),(0,l.jsx)("div",{className:"flex max-h-full w-full flex-1 justify-center",children:t})]})]})})}function e9(e){let{children:t,hideExpandButton:n=!1}=e,{isOpen:i,setOpen:r,toggleExpanded:s,viewMode:a,isMenuOpen:o,setMenuOpen:c}=(0,p.E)(),{chats:d}=b(),h=d.length>0;return(0,u.useEffect)(()=>{let e=e=>{"Escape"===e.key&&i&&r(!1)};return i&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[i,r]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(N.u,{show:i,enter:"transition-all duration-300 ease-out",enterFrom:"opacity-0 translate-y-4 scale-95",enterTo:"opacity-100 translate-y-0 scale-100",leave:"transition-all duration-200 ease-in",leaveFrom:"opacity-100 translate-y-0 scale-100",leaveTo:"opacity-0 translate-y-4 scale-95",style:{position:"fixed",zIndex:50,bottom:"20px",right:"20px"},children:(0,l.jsxs)("div",{className:"relative h-[min(738px,100vh-60px)] w-[420px] overflow-hidden rounded-xl bg-[#fff] shadow-lg",onClick:e=>{o&&e.currentTarget.contains(e.target)&&c(!1)},children:[(0,l.jsxs)("div",{className:"flex h-full flex-col justify-between ".concat("chat"===a?"h-full":"px-5 py-6"),style:"list"===a?{backgroundImage:"url(/images/agent-mobile-bg.svg)",backgroundSize:"cover"}:void 0,children:["list"===a&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[h?(0,l.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md hover:bg-[#EDEDED]",onClick:()=>c(!0),children:(0,l.jsx)(Z.Oq,{})}):(0,l.jsx)("div",{}),(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[!n&&(0,l.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md hover:bg-[#EDEDED]",onClick:s,children:(0,l.jsx)(Z.PS,{})}),(0,l.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md hover:bg-[#EDEDED]",onClick:()=>r(!1),children:(0,l.jsx)(Z.Tw,{})})]})]}),(0,l.jsx)("div",{className:"flex min-h-0 w-full flex-1 justify-center",children:t})]}),"list"===a&&(0,l.jsx)("div",{className:"absolute left-0 top-0 h-full",children:(0,l.jsx)(N.u,{show:o,enter:"transition-transform duration-300 ease-out",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition-transform duration-200 ease-in",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",className:"h-full",children:(0,l.jsx)(Q,{onClose:()=>c(!1)})})})]})})})}function te(){var e;let t=(0,p.E)(e=>e.viewMode),n=(0,p.E)(e=>e.defaultScene),{switchToChat:i,setCurrentChatId:r,setFirstThinking:s,setShouldShowLoginTip:a,shouldShowLoginTip:o,triggerLoginTipShake:c,setDefaultScene:d,agentOpenerTrigger:h}=(0,p.E)(),{sendMessage:m}=eD({chatId:null}),f=(0,x.xu)(),v=!!(null==f?void 0:null===(e=f.user_info)||void 0===e?void 0:e.email),{refresh:y,chats:j}=b(),w=(0,u.useRef)(!1);return(0,u.useEffect)(()=>{if(!n||w.current)return;let e=j.length>0;w.current=!0,(e&&!v?async()=>{let e=j[0];r(e.id),i(),m({content:"<Ghost>".concat(eQ[n]||"","</Ghost>"),chatId:e.id,isStrict:!1}),w.current=!1,d(void 0)}:async()=>{try{s(!1);let e=(await (0,g.P4)({scene:n})).data.id;r(e),s(!0),i(),y(),d(void 0),w.current=!1}catch(e){console.log("[DEBUG-AGENT] createChat error:",e),w.current=!1}})()},[n,y,r,s,i,o,c,a,v,j.length,d,h,m,j]),!function(){var e;let{setAnonymous:t,switchToChat:n,setCurrentChatId:i,switchToList:r,isOpen:s}=(0,p.E)(),a=(0,x.xu)(),{chats:l,isLoading:o,isValidating:c}=b(),{anonymous_info:d,isUpdatingAnonymousInfo:h}=(0,x.xu)(),m=!(null==a?void 0:null===(e=a.user_info)||void 0===e?void 0:e.email),f=!!((null==d?void 0:d.bruce)&&(null==d?void 0:d.odin_id));(0,u.useEffect)(()=>{m&&f&&!o&&!h&&!c&&s&&(l.length>0?(i(l[0].id),n()):r())},[m,f,o,l,n,i,h,c,r,s]),(0,u.useEffect)(()=>{t(m)},[m,t])}(),!function(e){let{chats:t,isLoading:n,isValidating:i,refresh:r}=b(),{defaultScene:s,setFirstThinking:a,setCurrentChatId:l,switchToChat:o,isOpen:c}=(0,p.E)(),d=(0,u.useRef)(!1);(0,u.useEffect)(()=>{n||i||!c||t.length>0||d.current||s||(async()=>{d.current=!0;try{a(!1);let t=(await (0,g.P4)({scene:e})).data.id;l(t),a(!0),o(),r(),d.current=!1}catch(e){console.log("[DEBUG-AGENT] createChat error:",e),d.current=!1}})()},[t,n,i,e,s,a,l,o,r,c])}("source_product"),(0,l.jsx)(e3,{children:"chat"===t?(0,l.jsx)(eB,{}):(0,l.jsx)(e1,{})})}var tt=n(67732);function tn(){return!function(){let e=(0,c.jD)();return(0,u.useMemo)(()=>!e||!d.some(t=>t.test(e)),[e])}()?null:(0,l.jsx)(ti,{})}function ti(){let{data:e}=(0,h.R7)(),{data:t}=(0,m.l)();return(0,l.jsx)(tt.AP,{children:(0,l.jsxs)(o.CategoryProvider,{data:(null==e?void 0:e.data)||[],collectionData:t||{data:[],key:"",id:""},children:[(0,l.jsx)(f.e2,{}),(0,l.jsx)(te,{})]})})}},14571:function(e,t,n){"use strict";n.d(t,{QuestionnaireProvider:function(){return a},V:function(){return l}});var i=n(27573),r=n(7653);let s=(0,r.createContext)(void 0);function a(e){let{children:t}=e,[n,a]=(0,r.useState)(!1);return(0,i.jsx)(s.Provider,{value:{showFlow:n,setShowFlow:a,isQuestionnaireOpen:n},children:t})}function l(){let e=(0,r.useContext)(s);if(!e)throw Error("useQuestionnaireContext must be used within a QuestionnaireProvider");return e}},38260:function(e,t,n){"use strict";n.d(t,{R7:function(){return s},pr:function(){return l},xu:function(){return a}});var i=n(35194),r=n(46575);function s(){return(0,r.ZP)("GLOBAL_CATEGORY_TRY",i.EI)}function a(){return(0,r.ZP)("GLOBAL_MATERIAL_TRY",i.kY)}function l(e){return(0,r.ZP)("GLOBAL_DELIVERY_TIMELINE_TRY",()=>(0,i.Pd)(e))}},40164:function(e,t,n){"use strict";n.d(t,{l:function(){return l}});var i=n(47409),r=n(16287);let s=e=>{let t="/client/operations/homepage_config/get?".concat((0,i.FJ)(e));return(0,r.G0)(t).then(e=>e.data)};var a=n(46575);function l(){return(0,a.ZP)("SWR_GET_OPERATION_PORTAL_COLLECTIONS",()=>s({key:"portal_collections"}))}},39518:function(e,t,n){"use strict";n.d(t,{W:function(){return l},n:function(){return o}});var i=n(67047);function r(){i.Z.init("96bfca6af062c008436a16c5cb1e3af4",{debug:!1,track_pageview:!0,persistence:"localStorage",loaded(e){var t,n;let i=null===(t=localStorage)||void 0===t?void 0:t.getItem("wayo_distinct_id");i||(i=e.get_distinct_id(),null===(n=localStorage)||void 0===n||n.setItem("wayo_distinct_id",i)),setTimeout(()=>{e.register({wayo_distinct_id:i})})}})}function s(e){return i.Z.identify(e)}function a(e){return i.Z.people.set(e)}function l(e,t){}let o={init:r,setUser:a,setUserExtra:function(e){return i.Z.people.set_once(e)},identify:s,register:function(e){return i.Z.register(e)},registerExtra:function(e){return i.Z.register_once(e)},track:function(e,t){var n,s,a;let l={pageName:null===(n=document)||void 0===n?void 0:n.title};try{null===i.Z||void 0===i.Z||null===(s=i.Z.track)||void 0===s||s.call(i.Z,e,{...l,...t})}catch(n){try{r(),null===i.Z||void 0===i.Z||null===(a=i.Z.track)||void 0===a||a.call(i.Z,e,{...l,...t})}catch(e){}}},logout:function(){return i.Z.reset()},login:function(e){let{email:t,businessName:n}=e;t&&(s(t),a({$email:t,businessName:n}))}}},945:function(e,t,n){"use strict";function i(e){let{x:t,y:n,width:i,height:r,rotation:s}=e,a=Math.PI/180*s,l={x:t+i*Math.cos(a),y:n+i*Math.sin(a)},o={x:l.x-r*Math.sin(a),y:l.y+r*Math.cos(a)},c={x:t-r*Math.sin(a),y:n+r*Math.cos(a)},u={x:((t+l.x)/2+(o.x+c.x)/2)/2,y:((n+l.y)/2+(o.y+c.y)/2)/2};return[{x:t,y:n},l,o,c,u]}function r(e,t){let{x:n,y:r}=i(e)[4],s=Math.PI/180*t,a=r-e.width/2*Math.sin(s)-e.height/2*Math.cos(s),l=n-e.width/2*Math.cos(s)+e.height/2*Math.sin(s);return{...e,x:l,y:a,rotation:t}}function s(e,t){let n=i(t),r=e.x,s=e.y,a=e.x+e.width,l=e.y+e.height;return!n.some(e=>e.x<r||e.x>a||e.y<s||e.y>l)}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return!(t.x+n>e.x+e.width||t.x+t.width-n<e.x||t.y+n>e.y+e.height||t.y+t.height-n<e.y)}function l(e,t){let n=i(t),r=e.x,s=e.y,a=e.x+e.width,l=e.y+e.height;return!n.some(e=>e.x>=r&&e.x<=a&&e.y>=s&&e.y<=l)}function o(e,t){return i(t).every(t=>(t.x-e.x)**2+(t.y-e.y)**2<=e.radius**2)}function c(e){return e.reduce((e,t)=>{let[n,r,s,a]=i(t),l=Math.max(n.x,r.x,s.x,a.x),o=Math.min(n.x,r.x,s.x,a.x),c=Math.max(n.y,r.y,s.y,a.y),u=Math.min(n.y,r.y,s.y,a.y),{topLeft:d,bottomRight:h}=e;return{topLeft:{x:d.x<o?d.x:o,y:d.y<u?d.y:u},bottomRight:{x:h.x<l?l:h.x,y:h.y<c?c:h.y}}},{topLeft:{x:Infinity,y:Infinity},bottomRight:{x:-1/0,y:-1/0}})}n.d(t,{Jq:function(){return i},Kh:function(){return o},Qe:function(){return s},Qp:function(){return c},Ue:function(){return l},og:function(){return r},xg:function(){return a}})},60052:function(e,t,n){"use strict";n.d(t,{ZE:function(){return S},zY:function(){return w},eW:function(){return G},xg:function(){return a},_b:function(){return s},Qp:function(){return F.Qp},ms:function(){return c},xm:function(){return k},g4:function(){return l.g4},jf:function(){return l.jf},sH:function(){return d.sH},vQ:function(){return o},Ds:function(){return U},MI:function(){return _},VI:function(){return j},dc:function(){return b},dF:function(){return B},cP:function(){return P},eT:function(){return z},jj:function(){return x},BI:function(){return T},Kk:function(){return A},xR:function(){return O},zB:function(){return H},uu:function(){return J},vo:function(){return F.xg},M_:function(){return D.M},tj:function(){return D.t},PW:function(){return W},Kh:function(){return F.Kh},vM:function(){return N},CO:function(){return p},hU:function(){return v},Qe:function(){return F.Qe},Ue:function(){return F.Ue},G6:function(){return u},Zi:function(){return X},hk:function(){return q},cM:function(){return C},AH:function(){return E},PM:function(){return $},iF:function(){return K},og:function(){return F.og},Hw:function(){return l.Hw},u4:function(){return Z},dj:function(){return I},uR:function(){return V},XE:function(){return Q},EF:function(){return Y},D0:function(){return y},jq:function(){return M}});var i,r,s,a,l=n(5077);async function o(e){try{return await navigator.clipboard.writeText(e),!0}catch(e){return!1}}function c(e){if(e)return["jpg","jpeg","png","gif","bmp","svg","webp","mp4","webm","ogg","mp3","wav","ogg","pdf","txt","html","xml","json","css","js"].includes(e.toLowerCase())}function u(){let e=navigator.userAgent;return e.includes("Safari")&&!e.includes("Chrome")&&!e.includes("Chromium")}var d=n(24370),h=n(46161),m=n.n(h),f=n(51485),g=n.n(f);function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM/DD/YYYY";return e?m()(e).format(t):"--"}m().extend(g());let p=e=>null==e?void 0:e.startsWith("image/"),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return!1;let t=e.split(".");return["jpg","jpeg","pjpeg","pjp","png","gif","bmp","webp","apng","avif","ico","svg","tif","tiff"].includes(t[t.length-1].toLowerCase())};function y(e,t){let n=e.type,i=".".concat(e.name.split(".").pop()).toLowerCase();return t.some(e=>e.startsWith(".")?e.toLowerCase()===i:n===e.toLowerCase())}function j(e){return e.split(".").pop()||""}async function b(e){var t;let{url:n,filename:i,type:r}=e,s=await fetch(n);if(!s.ok)throw Error("Failed to fetch image: ".concat(s.statusText));let a=await s.blob(),l=null===(t=n.split("?"))||void 0===t?void 0:t[0],o=null==l?void 0:l.split("/"),c=null==l?void 0:l.split(".").pop();return new File([a],"".concat(i||(null==o?void 0:o[o.length-1])||"file",".").concat(c),{type:a.type||r})}let w=".rar,.zip,.xls,.xlsx,.doc,.docx,.ppt,.pptx,.pdf,.ai,.jpg,.jpeg,.png,.svg,.psd,.txt,.7z,application/x-rar-compressed,application/zip,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/pdf,application/postscript,image/jpeg,image/png,image/svg+xml,image/vnd.adobe.photoshop,text/plain,application/x-7z-compressed";function N(e){return"image/svg+xml"===e||"application/postscript"===e}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Number(e);return Number.isNaN(n)?"--":(0,d.sH)(.3937*n,t)}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Number(e);return Number.isNaN(n)?"--":(0,d.sH)(2.2046*n,t)}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Number(e);return Number.isNaN(n)?"--":(0,d.sH)(.453592*n,t)}function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return"kg"===t?"kg"===e.unit?(0,d.Ge)((0,d.sH)(e.value,n)):(0,d.Ge)(E(e.value,n)):"lb"===e.unit?(0,d.Ge)((0,d.sH)(e.value,n)):(0,d.Ge)(C(e.value,n))}function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return e?"cm"===t?"cm"===e.unit?(0,d.Ge)((0,d.sH)(e.value,n)):(0,d.Ge)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Number(e);return Number.isNaN(n)?"--":(0,d.sH)(2.54*n,t)}(e.value,n)):"inch"===e.unit?(0,d.Ge)((0,d.sH)(e.value,n)):(0,d.Ge)(k(e.value,n)):null}(i=s||(s={})).LB="lb",i.KG="kg",(r=a||(a={})).CM="cm",r.IN="inch";var D=n(44842);let _=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDE4F]|\uD83D[\uDE80-\uDEFF]|\uD83E[\uDD00-\uDDFF])/g;async function M(e){try{if("function"!=typeof e)throw Error("The first argument must be a function");return{response:await e(),error:null}}catch(e){return{error:e,response:null}}}let S=[{name:"UV printing",value:"UV printing"},{name:"Laser engraving",value:"Laser engraving"},{name:"Laser carving",value:"Laser carving"},{name:"Patch",value:"Patch"},{name:"Debossing",value:"Debossing"},{name:"Offset printing",value:"Offset printing"},{name:"Embroidery",value:"Embroidery"},{name:"3D puff embroidery",value:"3D puff embroidery"},{name:"Heat transfer",value:"Heat transfer"},{name:"Screen printing",value:"Screen printing"},{name:"Thick plate printing",value:"Thick plate printing"},{name:"Direct to Garment (DTG)",value:"Direct to Garment (DTG)"},{name:"Digital printing",value:"Digital printing"},{name:"Flock printing",value:"Flock printing"},{name:"Foam printing",value:"Foam printing"},{name:"Sublimation printing",value:"Sublimation printing"},{name:"Hot stamping (gold foil)",value:"Hot stamping (gold foil)"},{name:"Hot stamping (silver foil)",value:"Hot stamping (silver foil)"},{name:"Hot stamping (reflective strip)",value:"Hot stamping (reflective strip)"},{name:"Decal printing (spot color)",value:"Decal printing (spot color)"},{name:"Decal printing (CYMK)",value:"Decal printing (CYMK)"},{name:"Knitted",value:"knitted"}];function B(e,t){return e.reduceRight((e,n)=>void 0===e&&t(n)?n:e,void 0)}function I(e,t){try{return JSON.parse(e)}catch(e){return t}}var F=n(945),R=n(19616);function P(e){return{x:(e.x||0)/R.aj,y:(e.y||0)/R.aj,width:(e.width||0)/R.aj,height:(e.height||0)/R.aj,rotation:e.rotation||0}}function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.aj;return{x:(e.x||0)*t,y:(e.y||0)*t,width:(e.width||0)*t,height:(e.height||0)*t,cornerRadius:(e.corner_radius||0)*t,rotation:e.rotation||0}}var L=n(19446);function H(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t).toString(16).toUpperCase()}function O(){return new L.Zw().toString()}function W(e,t){return e.map(e=>e.toUpperCase()).includes(t.toUpperCase())}function q(e){return W(R.MN,e)}function Z(e,t){return W(R.MN,e)&&W(R.YK,t)}class G{async get(e){let t=this.generateKey(e),n=this.getCachedItem(t);if((null==n?void 0:n.data)&&!this.isCacheExpired(n))return n.data;if(this.pendingRequests.has(t))return this.pendingRequests.get(t);let i=this.createRequestPromise(e,t);return this.pendingRequests.set(t,i),this.batchQueue.add(e),this.scheduleBatchRequest(),i}createRequestPromise(e,t){return new Promise((e,n)=>{let i=()=>{let n=this.getCachedItem(t);n?(this.pendingRequests.delete(t),e(n.data)):setTimeout(i,10)};setTimeout(()=>{this.pendingRequests.delete(t),n(Error("Request timeout for key: ".concat(t)))},1e4),setTimeout(i,this.batchDelay+50)})}scheduleBatchRequest(){this.batchTimer||(this.batchTimer=setTimeout(async()=>{await this.processBatch()},this.batchDelay))}async processBatch(){if(0===this.batchQueue.size){this.batchTimer=null;return}let e=Array.from(this.batchQueue).slice(0,this.maxBatchSize);e.forEach(e=>this.batchQueue.delete(e)),this.batchTimer=null;try{let t=await this.request(e),n=Date.now(),i=0===this.cacheExpiration?Number.MAX_SAFE_INTEGER:n+this.cacheExpiration;t.forEach((e,t)=>{this.cache.set(t,{data:e,timestamp:n,expiredAt:i})})}catch(t){e.forEach(e=>{let t=this.generateKey(e);this.pendingRequests.delete(t)})}this.batchQueue.size>0&&this.scheduleBatchRequest()}getCachedItem(e){return this.cache.get(e)}isCacheExpired(e){return 0!==this.cacheExpiration&&Date.now()>e.expiredAt}clearExpiredCache(){let e=[];this.cache.forEach((t,n)=>{this.isCacheExpired(t)&&e.push(n)}),e.forEach(e=>this.cache.delete(e))}clearAllCache(){this.cache.clear(),this.pendingRequests.clear()}setCacheExpiration(e){this.cacheExpiration=e}setBatchDelay(e){this.batchDelay=e}setMaxBatchSize(e){this.maxBatchSize=e}getCacheStats(){let e=0,t=0;return this.cache.forEach(n=>{this.isCacheExpired(n)?e++:t++}),{totalCount:this.cache.size,validCount:t,expiredCount:e,pendingRequestsCount:this.pendingRequests.size,queueSize:this.batchQueue.size}}constructor(){this.cache=new Map,this.pendingRequests=new Map,this.batchQueue=new Set,this.batchTimer=null,this.batchDelay=50,this.cacheExpiration=3e5,this.maxBatchSize=100}}function U(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function(){for(var i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];let a=this;clearTimeout(t),t=setTimeout(()=>{t=void 0,e.apply(a,r)},n)}}function J(e){return e}function Q(e){return Array.from(new Map(e.map(e=>[e.id,e])).values())}function Y(e,t){let n=new Map;for(let i of e||[])n.has(i[t])||n.set(i[t],i);return Array.from(n.values())}function V(e,t,n){if(t===n)return;let i=e[t];return e[t]=e[n],e[n]=i,e}function K(e){var t;return e?(e.startsWith("#")||(e="#"+e),null==e?void 0:null===(t=e.toUpperCase)||void 0===t?void 0:t.call(e)):""}function X(e){return/^(https?:\/\/)?(www\.)?(youtube\.com\/(watch\?v=|embed\/|v\/|.+\?v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})$/.test(e)}function $(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i={};return t.filter(e=>null!=e).forEach(e=>{e&&("object"!=typeof e||Array.isArray(e)||Object.keys(e).forEach(t=>{let n=e[t];t in i&&(""===n||null==n||""!==i[t]&&null!==i[t]&&void 0!==i[t])||(i[t]=n)}))}),i}},86545:function(){},65621:function(e,t){"use strict";t.Z={src:"/_next/static/media/wayo-icon-white.d77dab6e.png",height:501,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAP1BMVEVMaXE25MMm4r3///////////////////////8k5r////////////8k4b3///////868c0z4b/8/f004b////+Nhb8+AAAAFHRSTlMAD4Um0uE+AysyEWaRI1avzritxKsnf8IAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA+SURBVHicFctJEsAgCADBQUXAmJiF/7815a0vDYCIAOOd5XsCVl5R7qDmAVFOfKPPgTXtXdXAW2arO5u7wQ8+XAGzNTrofQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},67573:function(e,t){"use strict";t.Z={src:"/_next/static/media/wayo-icon.13f26758.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEVMaXEmIJsz68QlHZk16MUlHJonIJwjHpQlHJcmIJwy4L8sIZAiIpQz8MEy9sQz48Iz7sI28c0oIqJ9Omq2AAAAEnRSTlMAxxiYJqwmCGj3xhc8Nn6Ce83ANRxGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOklEQVR4nCWJWw7AIAjAKoKAe7h5/8MuZP1pkwK4qAKj9XtOhZanrFcZO+B65I8wrxWxDTgsszuFlz4yPgFcYbSomQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}}}]);